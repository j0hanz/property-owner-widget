System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-ui","jimu-theme"],(function(e,t){var o={},a={},r={},s={},l={};return{setters:[function(e){o.DataSourceTypes=e.DataSourceTypes,o.Immutable=e.Immutable,o.React=e.React,o.css=e.css,o.hooks=e.hooks,o.jsx=e.jsx},function(e){a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection},function(e){r.DataSourceSelector=e.DataSourceSelector},function(e){s.NumericInput=e.NumericInput,s.Switch=e.Switch,s.TextArea=e.TextArea},function(e){l.useTheme=e.useTheme}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=l},3089:e=>{"use strict";e.exports=r},4321:e=>{"use strict";e.exports=s},9244:e=>{"use strict";e.exports=o},9298:e=>{"use strict";e.exports=a}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var i={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(i),n.d(i,{__set_webpack_public_path__:()=>u,default:()=>c});var e=n(9244),t=n(9298),o=n(3089),a=n(4321),r=n(1888);const s=()=>(t=>{var o;const a=t.sys.spacing,r=t.sys.color;return{row:(0,e.css)({width:"100%"}),description:(0,e.css)({fontSize:"0.875rem",color:null===(o=null==r?void 0:r.surface)||void 0===o?void 0:o.backgroundHint,marginTop:null==a?void 0:a(1),lineHeight:1.5})}})((0,r.useTheme)()),l={configurationInstructions:"Configure the widget by providing layer URLs and display preferences.",dataSourcesTitle:"Data sources",dataSourcesDescription:"Select two feature layers: first for property parcels, second for ownership information. Both layers must use the FNR field to relate properties to owners.",propertyLayerLabel:"Property layer URL",propertyLayerTooltip:"Portal item or service URL that exposes property parcel features.",ownerLayerLabel:"Owner layer URL",ownerLayerTooltip:"Portal item or service URL that exposes property ownership attributes.",displayOptionsTitle:"Display options",maxResultsLabel:"Maximum results",maxResultsDescription:"Limits the number of features requested per lookup to protect performance.",resetMaxResults:"Reset to default",enableToggleRemovalLabel:"Enable toggle removal",enableToggleRemovalDescription:"Allow users to deselect properties by clicking them again on the map.",enablePIIMaskingLabel:"Enable PII masking",enablePIIMaskingDescription:"Mask personally identifiable information (names, addresses) for privacy protection.",allowedHostsLabel:"Allowed hosts",allowedHostsDescription:"List of allowed hostnames for URL validation (one per line). Leave empty to allow all HTTPS ArcGIS services.",errorInvalidUrl:"Enter a valid ArcGIS REST service URL.",errorInvalidNumber:"Enter a whole number greater than zero."},c=r=>{const{config:n,id:i,onSettingChange:c,useDataSources:u}=r,p=e.hooks.useTranslation(l),d=s(),g=e.hooks.useEventCallback(((e,t)=>{c({id:i,config:n.set(e,t)})})),m=e.hooks.useEventCallback((e=>{if(!e||e.length<2)return void console.log("Both property and owner data sources are required");const t=e[0],o=e[1];(null==t?void 0:t.dataSourceId)&&(null==o?void 0:o.dataSourceId)?c({id:i,useDataSources:e,config:n.set("propertyDataSourceId",null==t?void 0:t.dataSourceId).set("ownerDataSourceId",null==o?void 0:o.dataSourceId)}):console.log("Invalid data source selection - both must have IDs")})),b=e.hooks.useEventCallback((e=>{const t=Math.max(1,Math.min(1e3,Math.floor(e)));g("maxResults",t)})),v=e.hooks.useEventCallback((e=>{g("enableToggleRemoval",e.target.checked)})),S=e.hooks.useEventCallback((e=>{g("enablePIIMasking",e.target.checked)})),h=e.hooks.useEventCallback((e=>{const t=e.target.value.split("\n").map((e=>e.trim())).filter(Boolean);g("allowedHosts",t)}));return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(t.SettingSection,{title:p("dataSourcesTitle")},(0,e.jsx)(t.SettingRow,{flow:"wrap",level:2},(0,e.jsx)(o.DataSourceSelector,{types:(0,e.Immutable)([e.DataSourceTypes.FeatureLayer]),useDataSources:u,mustUseDataSource:!0,onChange:m,widgetId:i,isMultiple:!0,hideTypeDropdown:!0})),(0,e.jsx)("div",{css:d.description},p("dataSourcesDescription"))),(0,e.jsx)(t.SettingSection,{title:p("displayOptionsTitle")},(0,e.jsx)(t.SettingRow,{flow:"wrap",level:2,label:p("maxResultsLabel")},(0,e.jsx)(a.NumericInput,{value:n.maxResults,min:1,max:1e3,onChange:b,"aria-label":p("maxResultsLabel")})),(0,e.jsx)(t.SettingRow,{flow:"no-wrap",level:2,label:p("enableToggleRemovalLabel")},(0,e.jsx)(a.Switch,{checked:n.enableToggleRemoval,onChange:v,"aria-label":p("enableToggleRemovalLabel")})),(0,e.jsx)(t.SettingRow,{flow:"no-wrap",level:2,label:p("enablePIIMaskingLabel")},(0,e.jsx)(a.Switch,{checked:n.enablePIIMasking,onChange:S,"aria-label":p("enablePIIMaskingLabel")})),(0,e.jsx)(t.SettingRow,{flow:"wrap",level:2,label:p("allowedHostsLabel")},(0,e.jsx)(a.TextArea,{value:(n.allowedHosts||[]).join("\n"),onChange:h,placeholder:"lund.se\narcgis.com\nesri.com","aria-label":p("allowedHostsLabel")}))))};function u(e){n.p=e}})(),i})())}}}));