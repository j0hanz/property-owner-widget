/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-core/react","jimu-theme"],(function(e,t){var r={},n={},o={},l={},i={};return{setters:[function(e){r.DataSourceComponent=e.DataSourceComponent,r.DataSourceManager=e.DataSourceManager,r.React=e.React,r.ReactRedux=e.ReactRedux,r.WidgetState=e.WidgetState,r.appActions=e.appActions,r.css=e.css,r.getAppStore=e.getAppStore,r.hooks=e.hooks,r.jsx=e.jsx},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent,n.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){o.Alert=e.Alert,o.Button=e.Button,o.Dropdown=e.Dropdown,o.DropdownButton=e.DropdownButton,o.DropdownItem=e.DropdownItem,o.DropdownMenu=e.DropdownMenu,o.Loading=e.Loading,o.LoadingType=e.LoadingType,o.SVG=e.SVG,o.defaultMessages=e.defaultMessages},function(e){l.createElement=e.createElement,l.useState=e.useState},function(e){i.useTheme=e.useTheme}],execute:function(){e((()=>{var e={844:(e,t,r)=>{"use strict";r.d(t,{createPropertySelectors:()=>a,propertyActions:()=>l});var n=r(7390),o=r(7507);Object.values(o._);const l={setError:(e,t)=>({type:o._.SET_ERROR,error:e,widgetId:t}),clearError:e=>({type:o._.CLEAR_ERROR,widgetId:e}),setSelectedProperties:(e,t)=>({type:o._.SET_SELECTED_PROPERTIES,properties:e,widgetId:t}),clearAll:e=>({type:o._.CLEAR_ALL,widgetId:e}),setQueryInFlight:(e,t)=>({type:o._.SET_QUERY_IN_FLIGHT,inFlight:e,widgetId:t}),setRawResults:(e,t)=>({type:o._.SET_RAW_RESULTS,results:e,widgetId:t}),removeWidgetState:e=>({type:o._.REMOVE_WIDGET_STATE,widgetId:e})},i=(()=>{const e=n;return"function"==typeof e.default?e.default:"function"==typeof e.Immutable?e.Immutable:e=>e})(),a=(i({byId:{}}),e=>{const t=e=>{if(!e||"object"!=typeof e)return!1;return"function"==typeof e.asMutable},r=e=>{const r=(e=>{if(!e)return[];if(Array.isArray(e))return e.slice();if(t(e)){const t=e.asMutable?.({deep:!0});return Array.isArray(t)?t.slice():[]}return[]})(e);return r.filter((e=>!!e&&"object"==typeof e))},n=t=>{const r=t?.["property-state"]?.byId?.[e];return r??null};return{selectSlice:n,selectError:e=>n(e)?.error??null,selectSelectedProperties:e=>r(n(e)?.selectedProperties),selectIsQueryInFlight:e=>n(e)?.isQueryInFlight??!1,selectRawResults:e=>(e=>{if(!e||"object"!=typeof e)return null;if(t(e)){const t=e.asMutable?.({deep:!0});return t&&"object"==typeof t?t:null}return e})(n(e)?.rawPropertyResults)}})},1528:(e,t,r)=>{"use strict";function n(e){return e.valid&&"data"in e}function o(e){return!e.valid}r.d(t,{j:()=>n,k:()=>o})},1688:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTciIHZpZXdCb3g9IjAgMCAxNiAxNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAxMlYxMC41SDFMMSAxMkgyLjVWMTNIMUMwLjQ0NzcxNiAxMyAwIDEyLjU1MjMgMCAxMlpNMSAxSDIuNVYyTDEgMlYzLjVIMFYyQzAgMS40NDc3MiAwLjQ0NzcxNSAxIDEgMVpNMSA4LjVIMFY1LjVIMVY4LjVaTTQuNSAyVjFINy41VjJINC41Wk05LjUgMlYxSDExQzExLjU1MjMgMSAxMiAxLjQ0NzcyIDEyIDJWMy41SDExVjJIOS41Wk0xNC4zMTMzIDE2LjAyMDRMMTAuNzc3OCAxMi40ODQ5TDcuMjQyMjYgMTYuMDIwNEw2LjUzNTE2IDE1LjMxMzNMMTAuMDcwNyAxMS43Nzc4TDYuNTM1MTYgOC4yNDIyNkw3LjI0MjI2IDcuNTM1MTZMMTAuNzc3OCAxMS4wNzA3TDE0LjMxMzMgNy41MzUxNkwxNS4wMjA0IDguMjQyMjZMMTEuNDg0OSAxMS43Nzc4TDE1LjAyMDQgMTUuMzEzM0wxNC4zMTMzIDE2LjAyMDRaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo="},1888:e=>{"use strict";e.exports=i},2686:e=>{"use strict";e.exports=n},2732:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOS40ODg3MiAwLjA3MjI2NTZMMTAuMzM3NCAwLjM2MTgzMUw5LjM0ODMyIDMuMDcyMjdMOC41NjM1MiAyLjYwNzA1TDkuNDg4NzIgMC4wNzIyNjU2WiIgZmlsbD0iYmxhY2siIC8+DQogICAgPHBhdGggZD0iTTEyLjU5MzcgMi45NzRMMTAuMTU0NyA0LjEwMTgzTDEwLjQwNCA0Ljk1MTRMMTIuOTgyNSAzLjc1ODM1TDEyLjU5MzcgMi45NzRaIiBmaWxsPSJibGFjayIgLz4NCiAgICA8cGF0aCBkPSJNMi4wNDAzMiA3Ljg1NEwyLjQyOTEyIDguNjM4MzVMNS4wMDc2MiA3LjQ0NzA1TDQuNDc5MzIgNi43MjYxOEwyLjA0MDMyIDcuODU0WiIgZmlsbD0iYmxhY2siIC8+DQogICAgPHBhdGggZD0iTTUuNTUzOTIgMi44NjE4M0w0LjU4MDEyIDAuODk1NzQ0TDUuMzkxOTIgMC41MjA5NjFMNi4zNjU3MiAyLjQ4NzA1TDUuNTUzOTIgMi44NjE4M1oiIGZpbGw9ImJsYWNrIiAvPg0KICAgIDxwYXRoIGQ9Ik00LjI3MjMyIDQuNTkxNEwxLjY0NzkyIDMuNjk3NDhMMS4zNDkxMiA0LjUxNzQ4TDQuMTU0NDIgNS40NzRMNC4yNzIzMiA0LjU5MTRaIiBmaWxsPSJibGFjayIgLz4NCiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCINCiAgICAgICAgZD0iTTYuMjk5OTIgMy4zODI3TDE1LjI5OTkgOS42Njc2NkgxMS40MjYyTDEzLjc0MTQgMTQuMDg5MkwxMS4wNTQ5IDE1LjM4MjdMOC42ODE5MiAxMC44ODVMNi4yOTk5MiAxNC4wMDg5VjMuMzgyN1pNNy4yOTg5MiA1LjMwMDA5VjExLjA0ODFMOC44MzU5IDkuMDMzOUwxMS40ODg5IDE0LjA2MzFMMTIuMzc0OSAxMy42MzcxTDkuNzczNzUgOC42Njc2NkwxMi4xMjA5IDguNjY3MDlMNy4yOTg5MiA1LjMwMDA5WiINCiAgICAgICAgZmlsbD0iYmxhY2siIC8+DQo8L3N2Zz4="},2796:(e,t,r)=>{"use strict";r.d(t,{Ac:()=>f,Dj:()=>u,Nb:()=>a,RF:()=>n,UP:()=>d,Ye:()=>s,bI:()=>c,nV:()=>l,pd:()=>p,qC:()=>i,rb:()=>o,zW:()=>g});const n=["esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/TextSymbol","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Extent"],o={FASTIGHET:"FASTIGHET",BOSTADR:"BOSTADR",ADDRESS:"ADDRESS"},l=3,i=3,a=20,s=12,u={textColor:"#000000",backgroundColor:"#ffffffe0",fontFamily:"sans-serif",fontSize:10,fontWeight:"normal",verticalAlignment:"top",horizontalAlignment:"center",yoffset:28,xoffset:0,lineWidth:192,lineHeight:1,kerning:!0},c=5,g=10,d=[{id:"json",label:"JSON",description:"Property designations with owner information",extension:"json",mimeType:"application/json"},{id:"csv",label:"CSV",description:"Spreadsheet format (attributes only)",extension:"csv",mimeType:"text/csv"},{id:"geojson",label:"GeoJSON",description:"Geographic data format",extension:"geojson",mimeType:"application/geo+json"}],p=/^#?([0-9a-fA-F]{6})$/,f=["FNR","UUID_FASTIGHET","FASTIGHET","BOSTADR","ADDRESS"]},2945:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCINCiAgICAgICAgZD0iTTYuOTcyODcgMTEuNDg0QzYuOTcyODcgMTEuNzY5IDcuMjA4ODcgMTIgNy41IDEyQzcuNzkxMTMgMTIgOC4wMjcxMyAxMS43NjkgOC4wMjcxMyAxMS40ODRWMS45NzU1NUwxMC42MDAxIDQuNDczMjRDMTAuODA2IDQuNjc0NzYgMTEuMTM5NyA0LjY3NDc2IDExLjM0NTYgNC40NzMyNEMxMS41NTE1IDQuMjcxNzIgMTEuNTUxNSAzLjk0NDk5IDExLjM0NTYgMy43NDM0N0w3LjUgMEwzLjY1NDM5IDMuNzQzNDdDMy40NDg1NCAzLjk0NDk5IDMuNDQ4NTQgNC4yNzE3MiAzLjY1NDM5IDQuNDczMjRDMy44NjAyNSA0LjY3NDc2IDQuMTk0MDEgNC42NzQ3NiA0LjM5OTg3IDQuNDczMjRMNi45NzI4NyAxLjk3NTU1VjExLjQ4NFpNMSA4VjE1SDE0VjhIMTVWMTZIMFY4SDFaIg0KICAgICAgICBmaWxsPSJibGFjayIgLz4NCjwvc3ZnPg=="},3230:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgICA8cGF0aCBmaWxsPSIjMDAwMDAwIg0KICAgICAgICBkPSJNOC4yIDFINC44Yy0uODU3IDAtMS40NCAwLTEuODkuMDM4Yy0uNDM4LjAzNS0uNjYzLjEtLjgxOS4xOGEyIDIgMCAwIDAtLjg3NC44NzRjLS4wOC4xNTYtLjE0NS4zOC0uMTguODE5QzEgMy4zNi45OTkgMy45NC45OTkgNC44djUuNGMwIC44NTcuMDAxIDEuNDQuMDM4IDEuODljLjAzNi40MzguMTAxLjY2My4xOC44MTljLjE5Mi4zNzYuNDk4LjY4Mi44NzQuODc0Yy4xNTYuMDguMzgxLjE0NS44MTkuMThjLjI1LjAyLjU0LjAzLjg5NS4wMzRjLjEzLjM2LjMyOC43MDIuNTk2IDFjLTEuNDItLjAwMi0yLjE3LS4wMjctMi43Ni0uMzI3YTMgMyAwIDAgMS0xLjMxLTEuMzFjLS4zMjctLjY0My0uMzI3LTEuNDgtLjMyNy0zLjE2VjQuOGMwLTEuNjggMC0yLjUyLjMyNy0zLjE2QTMuMDIgMy4wMiAwIDAgMSAxLjY0MS4zM2MuNjQyLS4zMjggMS40OC0uMzI4IDMuMTYtLjMyOGgzLjRjMS42OCAwIDIuNTIgMCAzLjE2LjMyN2EzLjAyIDMuMDIgMCAwIDEgMS4zMSAxLjMxYy4yNC40NzEuMzA0IDEuMDUuMzIxIDEuOTlhMyAzIDAgMCAwLS4zNTkuMDE2YTMuMSAzLjEgMCAwIDAtLjY2NC0uNjA3bC0uMDA5LS4xMmMtLjAzNi0uNDM4LS4xLS42NjMtLjE4LS44MmEyIDIgMCAwIDAtLjg3NC0uODczYy0uMTU2LS4wOC0uMzgtLjE0NS0uODE5LS4xOGMtLjQ1LS4wMzctMS4wMy0uMDM4LTEuODktLjAzOHoiIC8+DQogICAgPHBhdGggZmlsbD0iIzAwMDAwMCINCiAgICAgICAgZD0iTTguMDcgM0gyLjVhLjUuNSAwIDAgMCAwIDFoMy4wN2EzLjEgMy4xIDAgMCAxIDEuOC0uMzYyYy4yMDItLjI0Ny40NDEtLjQ2My43MS0uNjM4ek0yLjUgNmgxLjMxYTMgMyAwIDAgMC0uMTgzIDFoLTEuMTJhLjUuNSAwIDAgMSAwLTF6bS4wOSAzaC0uMDk0YS41LjUgMCAwIDAgMCAxdi0uMjM4cTAtLjM5NS4wOTQtLjc2MiIgLz4NCiAgICA8cGF0aCBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiDQogICAgICAgIGQ9Ik0xMCAxMmMxLjEgMCAyLS44OTUgMi0yYzAtMS4xLS44OTUtMi0yLTJjLTEuMSAwLTIgLjg5NS0yIDJjMCAxLjEuODk1IDIgMiAybTAtMWExIDEgMCAxIDAgMC0yYTEgMSAwIDAgMCAwIDIiDQogICAgICAgIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4NCiAgICA8cGF0aCBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiDQogICAgICAgIGQ9Ik0xMC4yIDRoLS40NzRjLS43OSAwLTEuNDUuNTc1LTEuNTcgMS4zM2E1IDUgMCAwIDAtLjIxMS4wODdhMS41OSAxLjU5IDAgMCAwLTIuMDUuMTczbC0uMzM3LjMzN2ExLjU5NCAxLjU5NCAwIDAgMC0uMTczIDIuMDVxLS4wNDYuMTA1LS4wODcuMjExYTEuNTk2IDEuNTk2IDAgMCAwLTEuMzMgMS41N3YuNDc0YzAgLjc5My41NzcgMS40NSAxLjMzIDEuNThxLjA0LjEwNC4wODUuMjA2YTEuNiAxLjYgMCAwIDAgLjE3MSAyLjA2bC4zMy4zM2MuNTYyLjU2MiAxLjQ0LjYyIDIuMDcuMTY4cS4wOTguMDQ1LjE5OC4wODNhMS42IDEuNiAwIDAgMCAxLjU4IDEuMzRoLjQ1OGMuOCAwIDEuNDYtLjU4NCAxLjU5LTEuMzVxLjA5OC0uMDM5LjE5NC0uMDgxYy42MjguNDU0IDEuNTEuMzk4IDIuMDgtLjE2N2wuMzIxLS4zMjFjLjU2NS0uNTY1LjYyMS0xLjQ1LjE2Ny0yLjA4YTUgNSAwIDAgMCAuMDgxLS4xOTRhMS42MSAxLjYxIDAgMCAwIDEuMzUtMS41OXYtLjQ1OGMwLS43OTctLjU4MS0xLjQ2LTEuMzQtMS41OGE1IDUgMCAwIDAtLjA4Mi0uMmMuNDUtLjYyNS4zOTQtMS41LS4xNy0yLjA3bC0uMzI4LS4zMjhhMS42IDEuNiAwIDAgMC0yLjA2LS4xNzFhNSA1IDAgMCAwLS4yMDYtLjA4NmExLjU5NiAxLjU5NiAwIDAgMC0xLjU4LTEuMzN6TTkuMTMgNS42YzAtLjMyOS4yNjYtLjU5NS41OTUtLjU5NWguNDc0Yy4zMyAwIC41OTguMjY4LjU5OC41OThjMCAuMjgyLjE5OS41MjEuNDY2LjYxM3EuMjM2LjA4MS40NTguMTkxYy4yNTQuMTI1LjU2Ni4wOTcuNzY2LS4xMDNhLjYuNiAwIDAgMSAuODQ3IDBsLjMyOS4zMjlhLjYwMy42MDMgMCAwIDEgMCAuODUyYy0uMjAxLjIwMS0uMjMuNTEzLS4xMDYuNzY4cS4xMDUuMjE3LjE4NC40NDdjLjA5My4yNy4zMzQuNDcyLjYxOS40NzJjLjMzMyAwIC42MDMuMjcuNjAzLjYwM3YuNDU4YS42MDYuNjA2IDAgMCAxLS42MDYuNjA2Yy0uMjg2IDAtLjUyOC4yMDItLjYyMi40NzFxLS4wNzguMjI2LS4xODIuNDM5Yy0uMTI1LjI1Ny0uMDk3LjU3Mi4xMDYuNzc0YS42MDUuNjA1IDAgMCAxIDAgLjg1N2wtLjMyMS4zMjFhLjYwNS42MDUgMCAwIDEtLjg1NyAwYy0uMjAyLS4yMDItLjUxNy0uMjMxLS43NzQtLjEwNnEtLjIxMy4xMDQtLjQzOS4xODJjLS4yNy4wOTQtLjQ3Mi4zMzYtLjQ3Mi42MjJhLjYwNi42MDYgMCAwIDEtLjYwNi42MDZoLS40NThhLjYwMy42MDMgMCAwIDEtLjYwMy0uNjAzYzAtLjI4NS0uMjAyLS41MjctLjQ3Mi0uNjE5YTQgNCAwIDAgMS0uNDQ3LS4xODRjLS4yNTUtLjEyNC0uNTY3LS4wOTUtLjc2OC4xMDVhLjYwMy42MDMgMCAwIDEtLjg1MiAwbC0uMzI5LS4zMjlhLjYuNiAwIDAgMSAwLS44NDdjLjItLjIuMjI4LS41MTIuMTAzLS43NjZhNCA0IDAgMCAxLS4xOTEtLjQ1OGMtLjA5Mi0uMjY3LS4zMzEtLjQ2Ni0uNjEzLS40NjZhLjYuNiAwIDAgMS0uNTk4LS41OTh2LS40NzRjMC0uMzI5LjI2Ni0uNTk1LjU5NS0uNTk1Yy4yODIgMCAuNTItLjE5OS42MTEtLjQ2NmE0IDQgMCAwIDEgLjE5My0uNDY2Yy4xMjQtLjI1Mi4wOTYtLjU2MS0uMTAzLS43NmEuNTk2LjU5NiAwIDAgMSAwLS44NDJsLjMzNy0uMzM3YS41OTYuNTk2IDAgMCAxIC44NDIgMGMuMTk5LjE5OS41MDguMjI3Ljc2LjEwM3EuMjI1LS4xMS40NjYtLjE5M2MuMjY3LS4wOS40NjYtLjMyOS40NjYtLjYxMXoiDQogICAgICAgIGNsaXAtcnVsZT0iZXZlbm9kZCIgLz4NCjwvc3ZnPg=="},3396:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEgMlYxMkgzVjQuNDE0MjFMNS40MTQyMSAyTDExIDJaTTIgNC40MTQyMUMyIDQuMTQ5IDIuMTA1MzYgMy44OTQ2NCAyLjI5Mjg5IDMuNzA3MTFMNC43MDcxMSAxLjI5Mjg5QzQuODk0NjQgMS4xMDUzNiA1LjE0OSAxIDUuNDE0MjEgMUgxMUMxMS41NTIzIDEgMTIgMS40NDc3MiAxMiAyVjEyQzEyIDEyLjU1MjMgMTEuNTUyMyAxMyAxMSAxM0gzQzIuNDQ3NzIgMTMgMiAxMi41NTIzIDIgMTJWNC40MTQyMVpNMTMuMDQ3NiAzVjEzLjU2QzEzLjA0NzYgMTMuODI1MSAxMi44MzQ0IDE0LjA0IDEyLjU3MTQgMTQuMDRINFYxNUgxMi41NzE0QzEzLjM2MDQgMTUgMTQgMTQuMzU1MyAxNCAxMy41NlYzSDEzLjA0NzZaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo="},4321:e=>{"use strict";e.exports=o},6250:(e,t,r)=>{"use strict";r.d(t,{JQ:()=>G,Mv:()=>L,PM:()=>F,XW:()=>O,nS:()=>P});var n=r(2686),o=r(1528),l=r(2796),i=r(8491);const a=/\/(mapserver|featureserver)\/\d+(?:\/query)?$/i,s=[/^10\.\d{1,3}\.\d{1,3}\.\d{1,3}$/u,/^172\.(1[6-9]|2\d|3[0-1])\.\d{1,3}\.\d{1,3}$/u,/^192\.168\.\d{1,3}\.\d{1,3}$/u],u=new Set(["localhost","127.0.0.1","[::1]"]);let c=null,g=null,d=null,p=null,f=null;const m=new Map,h=new Map,y=e=>e.trim().toLowerCase(),S=e=>e?{signal:e}:void 0,w=e=>e||void 0,M=(e,t,r)=>({valid:!1,error:{type:e,message:t},failureReason:r}),I=(e,t,r)=>e?{valid:!0,data:{dataSource:e}}:M("VALIDATION_ERROR",r("errorNoDataAvailable"),`${t}_data_source_missing`),b=(e,t,r,n)=>{const o=(e=>{if(!e)return null;if("string"==typeof e.url&&e.url)return e.url;const t=e.getLayerDefinition?.();if(t&&"object"==typeof t){const e=t.url;if(e)return e}const r=e.getDataSourceJson?.();if(r&&"object"==typeof r){const e=r.url;if(e)return e}return null})(e);return o?N(o,r)?{valid:!0,data:{url:o}}:M("VALIDATION_ERROR",n("errorHostNotAllowed"),`${t}_disallowed_host`):M("VALIDATION_ERROR",n("errorNoDataAvailable"),`${t}_missing_url`)},R=(e,t)=>{const r=new Set,n=[];return e.forEach(((e,o)=>{if(e&&"object"==typeof e)try{const l=i.ownerIdentity.buildKey(e,t,o);if(r.has(l))return;r.add(l),n.push(e)}catch(t){n.push(e)}})),n},v=e=>({id:e.createRowId(e.fnr,e.objectId),FNR:e.fnr,UUID_FASTIGHET:e.uuidFastighet,FASTIGHET:e.fastighet,BOSTADR:e.bostadr,ADDRESS:e.address,geometryType:e.geometryType,geometry:e.geometry??null,rawOwner:e.rawOwner}),C=(e,t,r,n,o,l)=>{if(0===e.length)return o>=l;const i=Math.max(l-o,0),a=i>0?e.slice(0,i):[];return t.rows.push(...a),a.length>0&&t.graphics.push({graphic:r,fnr:n}),o+a.length>=l},A=(e,t)=>e.error?t.isAbortError(e.error)?{skip:!0,reason:"aborted"}:{skip:!1}:e.value?{skip:!1}:{skip:!0,reason:"invalid_value"},D=(e,t,r,n,o)=>{const l=e.graphic.geometry,i=l?.type??null,a=l&&"function"==typeof l.toJSON?l.toJSON():null;if(t.length>0){return R(t,{fnr:e.fnr,propertyId:e.attrs.UUID_FASTIGHET}).map((t=>v({fnr:e.fnr,objectId:t.OBJECTID??e.attrs.OBJECTID,uuidFastighet:t.UUID_FASTIGHET??e.attrs.UUID_FASTIGHET,fastighet:o.helpers.formatPropertyWithShare(t.FASTIGHET??e.attrs.FASTIGHET,t.ANDEL),bostadr:o.helpers.formatOwnerInfo(t,n,o.messages.unknownOwner),address:o.helpers.formatOwnerInfo(t,n,o.messages.unknownOwner),geometryType:i,geometry:a,createRowId:o.helpers.createRowId,rawOwner:t})))}const s=r?o.messages.errorOwnerQueryFailed:o.messages.unknownOwner,u={OBJECTID:e.attrs.OBJECTID,FNR:e.fnr,UUID_FASTIGHET:e.attrs.UUID_FASTIGHET,FASTIGHET:e.attrs.FASTIGHET,NAMN:s,BOSTADR:"",POSTNR:"",POSTADR:"",ORGNR:""};return[v({fnr:e.fnr,objectId:e.attrs.OBJECTID,uuidFastighet:e.attrs.UUID_FASTIGHET,fastighet:e.attrs.FASTIGHET,bostadr:s,address:"",geometryType:i,geometry:a,createRowId:o.helpers.createRowId,rawOwner:u})]},E=(e,t,r,n,o,l)=>{const i=o+n.rows.length;if(i>=l)return!0;const a=D(e,[],!0,r,t);return C(a,n,e.graphic,e.fnr,i,l)},T=(e,t,r,n,o,l)=>{const i=o+n.rows.length;if(i>=l)return!0;const a=D(e.validated,e.owners,e.queryFailed,r,t);return C(a,n,e.validated.graphic,e.validated.fnr,i,l)},x=(e,t,r)=>{const n=new Set,o=[];for(const l of e){const e=l.features?.[0];if(!e?.attributes||!e.geometry)continue;const a=t(e.attributes);if(null==a)continue;const s=(0,i.normalizeFnrKey)(a);if(!n.has(s)&&(n.add(s),o.push({fnr:a,attrs:e.attributes,graphic:e}),"number"==typeof r&&o.length>=r))break}return o},j=async e=>{const{batch:t,context:r,config:o,currentRowCount:l}=e,{helpers:a,maxResults:s}=r,u=await(async()=>{if(f)return f;const[e]=await(0,n.loadArcGISJSAPIModules)(["esri/core/promiseUtils"]);return f=e,e})();i.abortHelpers.throwIfAborted(r.signal);const c=await u.eachAlways(t.map((e=>(async(e,t,r)=>{const{dsManager:n,signal:o,helpers:l}=t;try{if(o?.aborted)throw new DOMException("Aborted","AbortError");return{validated:e,owners:(await l.queryOwnerByFnr(e.fnr,r.ownerDataSourceId,n,{signal:o})).map((e=>(e=>e?.attributes?e.attributes:null)(e))).filter((e=>Boolean(e))),queryFailed:!1}}catch(t){if(l.isAbortError(t))throw t instanceof Error?t:new Error(String(t));return{validated:e,owners:[],queryFailed:!0}}})(e,r,{ownerDataSourceId:o.ownerDataSourceId})))),g={rows:[],graphics:[]};for(let e=0;e<c.length;e+=1){const n=c[e],i=t[e],u=A(n,a);if(u.skip&&("aborted"===u.reason||"invalid_value"===u.reason))continue;if(n.error){if(E(i,r,o.enablePIIMasking,g,l,s))break;continue}const d=n.value;if(!d)continue;if(T(d,r,o.enablePIIMasking,g,l,s))break}return g},N=(e,t)=>{if(!e||"string"!=typeof e)return!1;let r;try{r=new URL(e)}catch(e){return!1}if("https:"!==r.protocol)return!1;if(""!==(n=r.port)&&"443"!==n)return!1;var n;const o=r.hostname;if((e=>{const t=(e=>e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1):e)(e.toLowerCase());return!!u.has(t)||"::1"===t||!!/^\d{1,3}(\.\d{1,3}){3}$/u.test(t)&&s.some((e=>e.test(t)))})(o))return!1;if(!((e,t)=>{if(!t||0===t.length)return!0;const r=y(e);return t.some((e=>{const t=y(e);return r===t||r.endsWith(`.${t}`)}))})(o,t))return!1;const l=r.pathname.replace(/\/+/g,"/").toLowerCase();return!!a.test(l)},L=()=>{m.forEach((e=>{"function"==typeof e.destroy&&e.destroy()})),m.clear(),h.forEach((e=>{const t=e.destroy;"function"==typeof t&&t.call(e)})),h.clear(),f=null},F=e=>{const{propertyDsId:t,ownerDsId:r,dsManager:n,allowedHosts:l,translate:i}=e;if(!t||!r)return M("VALIDATION_ERROR",i("errorNoDataAvailable"),"missing_data_sources");if(!n)return M("QUERY_ERROR",i("errorQueryFailed"),"no_data_source_manager");const a=n.getDataSource(t),s=n.getDataSource(r),u=I(a,"property",i);if((0,o.k)(u))return{valid:!1,error:u.error,failureReason:u.failureReason};const c=I(s,"owner",i);if((0,o.k)(c))return{valid:!1,error:c.error,failureReason:c.failureReason};const g=b(u.data.dataSource,"property",l,i);if((0,o.k)(g))return{valid:!1,error:g.error,failureReason:g.failureReason};const d=b(c.data.dataSource,"owner",l,i);return(0,o.k)(d)?{valid:!1,error:d.error,failureReason:d.failureReason}:{valid:!0,data:{manager:n}}},O=async(e,t,r,o)=>{try{i.abortHelpers.throwIfAborted(o?.signal);const l=r.getDataSource(t);if(!l)throw new Error("Property data source not found");const a=l.url;if(!a)throw new Error("Data source URL not available");if(!c||!g){const e=await(0,n.loadArcGISJSAPIModules)(["esri/layers/FeatureLayer","esri/rest/support/Query"]),[t,r]=e;c=t,g=r}const s=c,u=g;if(!s||!u)throw new Error("Property query modules failed to load");let d=m.get(a);d||(d=new s({url:a}),m.set(a,d));const p=new u({geometry:e,returnGeometry:!0,outFields:["*"],spatialRelationship:"intersects"}),f=await d.queryFeatures(p,S(o?.signal));return i.abortHelpers.throwIfAborted(o?.signal),f?.features&&0!==f.features.length?f.features.map((e=>({features:[e],propertyId:e.attributes.FNR}))):[]}catch(e){if((0,i.isAbortError)(e))throw e instanceof Error?e:new Error(String(e));throw new Error((0,i.parseArcGISError)(e,"Property query failed"))}},P=async(e,t,r,n)=>{try{i.abortHelpers.throwIfAborted(n?.signal);const o=r.getDataSource(t);if(!o)throw new Error("Owner data source not found");const l=S(n?.signal),a=await o.query({where:(0,i.buildFnrWhereClause)(e),returnGeometry:!1,outFields:["*"]},w(l));i.abortHelpers.throwIfAborted(n?.signal);const s=a?.records??[];return 0===s.length?[]:s.map((e=>({attributes:e.getData()})))}catch(e){throw i.abortHelpers.handleOrThrow(e),new Error((0,i.parseArcGISError)(e,"Owner query failed"))}},k=async(e,t,r,o,a,s)=>{try{if(i.abortHelpers.throwIfAborted(s?.signal),!e||0===e.length)return new Map;const r=o.getDataSource(t);if(!r)throw new Error("Property data source not found");const u=r.getLayerDefinition?.(),c=u&&"object"==typeof u?u.url??null:null;if(!c)throw new Error("Property layer URL not available");if(!d||!p){const e=await(0,n.loadArcGISJSAPIModules)(["esri/tasks/QueryTask","esri/rest/support/RelationshipQuery"]),[t,r]=e;d=t,p=r}const g=d,f=p;if(!g||!f)throw new Error("Relationship query modules failed to load");let m=h.get(c)??null;m||(m=new g({url:c}),h.set(c,m));const y=new f,M=[],I=new Map,b=S(s?.signal),R=50,v=[];for(let t=0;t<e.length;t+=R)v.push(e.slice(t,t+R));const C=v.map((e=>r.query({where:e.map((e=>(0,i.buildFnrWhereClause)(e))).join(" OR "),outFields:["FNR","OBJECTID"],returnGeometry:!1},w(b)))),A=[];for(let e=0;e<C.length;e+=l.Nb){const t=C.slice(e,e+l.Nb);(await Promise.all(t)).forEach((e=>{const t=(e?.records??[])||[];t.length>0&&A.push(...t)})),i.abortHelpers.throwIfAborted(s?.signal)}if(0===A.length)return new Map;if(A.forEach((e=>{const t=e.getData(),r=t.OBJECTID,n=String(t.FNR);null!=r&&n&&(M.push(r),I.set(r,n))})),0===M.length)return new Map;y.objectIds=M,y.relationshipId=a,y.outFields=["*"],i.abortHelpers.throwIfAborted(s?.signal);const D=await m.executeRelationshipQuery(y,S(s?.signal));i.abortHelpers.throwIfAborted(s?.signal);const E=new Map;return M.forEach((e=>{const t=D[e],r=I.get(e);if(r&&t?.features){const e=t.features.map((e=>e.attributes)).filter(Boolean);E.set(r,e)}})),E}catch(e){throw i.abortHelpers.handleOrThrow(e),new Error((0,i.parseArcGISError)(e,"Relationship query failed"))}},z={processBatch:async e=>{const{propertyResults:t,config:r,context:n}=e,{helpers:o,maxResults:l}=n,a=[],s=[],u=x(t,o.extractFnr,l);if(0===u.length)return{rowsToProcess:s,graphicsToAdd:a};const c=u.map((e=>e.fnr)),g=new Set;let d;try{d=await o.queryOwnersByRelationship(c,r.propertyDataSourceId,r.ownerDataSourceId,n.dsManager,r.relationshipId,{signal:n.signal})}catch(e){if(o.isAbortError(e))throw e instanceof Error?e:new Error(String(e));i.logger.error("Batch owner query failed",{error:e}),d=new Map,c.forEach((e=>g.add(String(e))))}i.abortHelpers.throwIfAborted(n.signal);for(let e=0;e<u.length;e+=100){const t=u.slice(e,e+100);for(const e of t){const t=d.get(String(e.fnr))??[],o=e.graphic.geometry,l=o?.type??null,i=o&&"function"==typeof o.toJSON?o.toJSON():null;if(t.length>0){R(t,{fnr:e.fnr,propertyId:e.attrs.UUID_FASTIGHET}).forEach((t=>{const o=n.helpers.formatOwnerInfo(t,r.enablePIIMasking,n.messages.unknownOwner),a=n.helpers.formatPropertyWithShare(e.attrs.FASTIGHET,t.ANDEL);s.push(v({fnr:e.fnr,objectId:t.OBJECTID??e.attrs.OBJECTID,uuidFastighet:t.UUID_FASTIGHET??e.attrs.UUID_FASTIGHET,fastighet:a,bostadr:o,address:o,geometryType:l,geometry:i,createRowId:n.helpers.createRowId,rawOwner:t}))}))}else{const t=g.has(String(e.fnr))?n.messages.errorOwnerQueryFailed:n.messages.unknownOwner,r={OBJECTID:e.attrs.OBJECTID,FNR:e.fnr,UUID_FASTIGHET:e.attrs.UUID_FASTIGHET,FASTIGHET:e.attrs.FASTIGHET,NAMN:t,BOSTADR:"",POSTNR:"",POSTADR:"",ORGNR:""};s.push(v({fnr:e.fnr,objectId:e.attrs.OBJECTID,uuidFastighet:e.attrs.UUID_FASTIGHET,fastighet:e.attrs.FASTIGHET,bostadr:t,address:"",geometryType:l,geometry:i,createRowId:n.helpers.createRowId,rawOwner:r}))}a.push({graphic:e.graphic,fnr:e.fnr})}e+100<u.length&&(await new Promise((e=>setTimeout(e,0))),i.abortHelpers.throwIfAborted(n.signal))}return{rowsToProcess:s,graphicsToAdd:a}},processIndividual:async e=>{const{propertyResults:t,config:r,context:n}=e,{helpers:o,maxResults:i}=n,a=[],s=[],u=x(t,o.extractFnr);for(let e=0;e<u.length;){const t=i-s.length;if(t<=0)break;const o=Math.min(t,l.Nb,u.length-e),c=u.slice(e,e+o),g=await j({batch:c,currentRowCount:s.length,context:n,config:{ownerDataSourceId:r.ownerDataSourceId,enablePIIMasking:r.enablePIIMasking}});s.push(...g.rows),a.push(...g.graphics),e+=o}return{rowsToProcess:s,graphicsToAdd:a}}},G=async e=>{const{mapPoint:t,propertyDataSourceId:r,ownerDataSourceId:n,dsManager:o,maxResults:l,toggleEnabled:a,enableBatchOwnerQuery:s,relationshipId:u,enablePIIMasking:c,signal:g,selectedProperties:d,translate:p}=e,f=performance.now();console.log("[PERF-API] Property query started");const m=await O(t,r,o,{signal:g}),h=performance.now();if(console.log("[PERF-API] Property query completed in",h-f,"ms","(returned",m.length,"results)"),0===m.length)return{status:"empty"};const y=e=>{const t=e?.features?.[0],r=t?.attributes;return r?(0,i.extractFnr)(r):null},S=((e,t)=>{if(!a||0===t.length)return null;const r=new Set(t.map((e=>(0,i.normalizeFnrKey)(e.FNR))));if(0===r.size)return null;const n=new Set;for(const t of e){const e=y(t);if(null==e)return null;const o=(0,i.normalizeFnrKey)(e);if(!r.has(o))return null;n.add(o)}return n.size>0?n:null})(m,d);if(S&&S.size>0){return{status:"success",rowsToProcess:[],graphicsToAdd:[],updatedRows:d.filter((e=>!S.has((0,i.normalizeFnrKey)(e.FNR)))),toRemove:S,propertyResults:m}}const w=performance.now();console.log("[PERF-API] Processing property results started");const M=await(0,i.processPropertyQueryResults)({propertyResults:m,config:{propertyDataSourceId:r,ownerDataSourceId:n,enablePIIMasking:c,relationshipId:u,enableBatchOwnerQuery:s},processingContext:{dsManager:o,maxResults:l,signal:g,helpers:{extractFnr:i.extractFnr,queryOwnerByFnr:P,queryOwnersByRelationship:k,createRowId:i.createRowId,formatPropertyWithShare:i.formatPropertyWithShare,formatOwnerInfo:i.formatOwnerInfo,isAbortError:i.isAbortError},messages:{unknownOwner:p("unknownOwner"),errorOwnerQueryFailed:p("errorOwnerQueryFailed"),errorNoDataAvailable:p("errorNoDataAvailable")}},services:{processBatch:z.processBatch,processIndividual:z.processIndividual}}),I=performance.now();console.log("[PERF-API] Processing completed in",I-w,"ms","(produced",M.rowsToProcess.length,"rows)"),i.abortHelpers.throwIfAborted(g);const{toRemove:b,updatedRows:R}=(0,i.calculatePropertyUpdates)(M.rowsToProcess,d,a,l);return{status:"success",rowsToProcess:M.rowsToProcess,graphicsToAdd:M.graphicsToAdd,updatedRows:R,toRemove:b,propertyResults:m}}},6426:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},7390:(e,t,r)=>{var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function l(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function i(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var a="__immutable_invariants_hold";function s(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,a)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var g=["setPrototypeOf"],d=(g.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function p(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function f(e,t){return i(e,a,!0),e}function m(e,t){var r=e[t];i(e,t,(function(){return H(r.apply(e,arguments))}))}function h(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=R.call(this);return o[e]=H(t),w(o)}g.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),p.prototype=new Error,p.prototype.constructor=Error;var y=H([]);function S(e,t,r){var n=e[0];if(1===e.length)return h.call(this,n,t,r);var o,l=e.slice(1),i=this[n];if("object"==typeof i&&null!==i)o=H.setIn(i,l,t);else{var a=l[0];o=""!==a&&isFinite(a)?S.call(y,l,t):L.call(N,l,t)}if(n in this&&i===o)return this;var s=R.call(this);return s[n]=o,w(s)}function w(e){for(var t in d){if(d.hasOwnProperty(t))m(e,d[t])}o.use_static||(i(e,"flatMap",I),i(e,"asObject",v),i(e,"asMutable",R),i(e,"set",h),i(e,"setIn",S),i(e,"update",O),i(e,"updateIn",k),i(e,"getIn",z));for(var r=0,n=e.length;r<n;r++)e[r]=H(e[r]);return f(e)}function M(){return new Date(this.getTime())}function I(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return w(r)}function b(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=l(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return V(r)}function R(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(C(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function v(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),l=o[0],i=o[1];r[l]=i}return V(r)}function C(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,a)||e instanceof Date?e:H.asMutable(e,{deep:!0})}function A(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function D(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),i=t&&t.deep,a=t&&t.mode||"merge",s=t&&t.merger;function g(e,n,o){var a,g=H(n[o]),d=s&&s(e[o],g,t),p=e[o];void 0===r&&void 0===d&&e.hasOwnProperty(o)&&u(g,p)||(u(p,a=void 0!==d?d:i&&c(p)&&c(g)?H.merge(p,g,t):g)&&e.hasOwnProperty(o)||(void 0===r&&(r=A(e,l(e))),r[o]=a))}if(o)for(var d=0,p=e.length;d<p;d++){var f=e[d];for(n in f)f.hasOwnProperty(n)&&g(void 0!==r?r:this,f,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&g(this,e,n);"replace"===a&&function(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=A(e,l(e))),delete r[n])}(this,e)}return void 0===r?this:V(r)}function E(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return H.merge(this,e,{deep:r,mode:"replace"})}var T,x,j,N=H({});function L(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return F.call(this,n,t,r);var o,i=e.slice(1),a=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?H.setIn(a,i,t):L.call(N,i,t),this.hasOwnProperty(n)&&a===o)return this;var s=A(this,l(this));return s[n]=o,V(s)}function F(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=A(this,l(this));return o[e]=H(t),V(o)}function O(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return H.set(this,e,t.apply(n,[n].concat(r)))}function P(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function k(e,t){var r=Array.prototype.slice.call(arguments,2),n=P(this,e);return H.setIn(this,e,t.apply(n,[n].concat(r)))}function z(e,t){var r=P(this,e);return void 0===r?t:r}function G(e){var t,r=l(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=C(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function _(){return{}}function V(e){return o.use_static||(i(e,"merge",D),i(e,"replace",E),i(e,"without",b),i(e,"asMutable",G),i(e,"set",F),i(e,"setIn",L),i(e,"update",O),i(e,"updateIn",k),i(e,"getIn",z)),f(e)}function H(e,t,r){if(s(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(H);if(Array.isArray(e))return w(e.slice());if(e instanceof Date)return l=new Date(e.getTime()),o.use_static||i(l,"asMutable",M),f(l);var l,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:_)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=H(e[c],void 0,r));return V(u)}function U(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function B(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return H.from=H,H.isImmutable=s,H.ImmutableError=p,H.merge=U(D),H.replace=U(E),H.without=U(b),H.asMutable=(T=G,x=R,j=M,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?x.apply(t,e):t instanceof Date?j.apply(t,e):T.apply(t,e)}),H.set=B(F,h),H.setIn=B(L,S),H.update=U(O),H.updateIn=U(k),H.getIn=U(z),H.flatMap=U(I),H.asObject=U(v),o.use_static||(H.static=e({use_static:!0})),Object.freeze(H),H}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},7507:(e,t,r)=>{"use strict";var n,o;r.d(t,{B:()=>n,_:()=>o}),function(e){e.QUERY_ERROR="QUERY_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.VALIDATION_ERROR="VALIDATION_ERROR",e.GEOMETRY_ERROR="GEOMETRY_ERROR"}(n||(n={})),function(e){e.SET_ERROR="PROPERTY_WIDGET/SET_ERROR",e.CLEAR_ERROR="PROPERTY_WIDGET/CLEAR_ERROR",e.SET_SELECTED_PROPERTIES="PROPERTY_WIDGET/SET_SELECTED_PROPERTIES",e.CLEAR_ALL="PROPERTY_WIDGET/CLEAR_ALL",e.SET_QUERY_IN_FLIGHT="PROPERTY_WIDGET/SET_QUERY_IN_FLIGHT",e.SET_RAW_RESULTS="PROPERTY_WIDGET/SET_RAW_RESULTS",e.REMOVE_WIDGET_STATE="PROPERTY_WIDGET/REMOVE_WIDGET_STATE"}(o||(o={}))},7965:(e,t,r)=>{"use strict";var n=r(6426),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,l,i,a,s,u,c=!1;t||(t={}),r=t.debug||!1;try{if(i=n(),a=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var l=o[t.format]||o.default;window.clipboardData.setData(l,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(u),a.selectNodeContents(u),s.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),l=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(l,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(a):s.removeAllRanges()),u&&document.body.removeChild(u),i()}return c}},8491:(e,t,r)=>{"use strict";r.r(t),r.d(t,{abortHelpers:()=>O,buildFnrWhereClause:()=>z,buildHighlightColor:()=>E,buildHighlightSymbolJSON:()=>T,buildTooltipSymbol:()=>M,calculatePropertyUpdates:()=>H,cleanupRemovedGraphics:()=>G,computeWidgetsToClose:()=>Z,copyToClipboard:()=>ne,createPropertyDispatcher:()=>J,createRowId:()=>x,cursorLifecycleHelpers:()=>se,dataSourceHelpers:()=>ie,executeHoverQuery:()=>$,extractFnr:()=>j,formatAddressOnly:()=>D,formatOwnerInfo:()=>R,formatPropertiesForClipboard:()=>C,formatPropertyWithShare:()=>A,getValidatedOutlineWidth:()=>k,isAbortError:()=>L,isDuplicateProperty:()=>_,isValidationFailure:()=>l.k,isValidationSuccess:()=>l.j,logger:()=>p,maskAddress:()=>y,maskName:()=>h,normalizeFnrKey:()=>N,normalizeHostList:()=>le,normalizeHostValue:()=>oe,numberHelpers:()=>F,opacityHelpers:()=>te,outlineWidthHelpers:()=>re,ownerIdentity:()=>w,ownerPrivacy:()=>m,parseArcGISError:()=>P,popupSuppressionManager:()=>ae,processPropertyQueryResults:()=>Y,shouldSkipHoverQuery:()=>q,shouldToggleRemove:()=>V,stripHtml:()=>g,syncCursorGraphics:()=>I,syncGraphicsWithState:()=>B,textSanitizer:()=>c,updateGraphicSymbol:()=>K,updateRawPropertyResults:()=>W,validateMapClickInputs:()=>U,validateMapClickPipeline:()=>Q,validateNumericRange:()=>X});var n=r(7965),o=r.n(n),l=r(1528),i=r(6250),a=r(2796),s=r(844);const u=e=>{if(!e)return"";return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").replace(/[\s\u00A0\u200B]+/g," ").trim()},c={sanitize:u,stripHtml:e=>u(e)},g=e=>c.stripHtml(e),d=e=>"object"==typeof e&&null!==e,p={debug:(e,t)=>{},warn:(e,t)=>{},error:(e,t,r)=>{console.error(`Property Widget: ${e}`,t,r||{})}},f=(e,t)=>{const r=u(e);return r.length<t?"***":r},m={maskName:e=>{const t=f(e,a.nV);return"***"===t?t:t.split(" ").filter(Boolean).map((e=>`${e.charAt(0)}${"*".repeat(Math.min(a.qC,e.length-1))}`)).join(" ")},maskAddress:e=>{const t=f(e,a.nV);return"***"===t?t:`${t.substring(0,2)}${"*".repeat(Math.min(5,t.length-2))}`}},h=m.maskName,y=m.maskAddress,S=e=>null==e?"":"number"==typeof e?u(String(e)):"string"==typeof e?u(e):"",w={buildKey:(e,t,r)=>{const n=[()=>{const t=S(e.AGARLISTA);return t?`A:${t.toLowerCase()}`:null},()=>{const t=[e.NAMN&&`N:${S(e.NAMN)}`,e.BOSTADR&&`B:${S(e.BOSTADR)}`,e.POSTNR&&`P:${S(e.POSTNR)}`,e.POSTADR&&`C:${S(e.POSTADR)}`,e.ORGNR&&`O:${S(e.ORGNR)}`,e.ANDEL&&`S:${S(e.ANDEL)}`].filter(Boolean);return t.length>0?t.join("|").toLowerCase():null},()=>{const r=[t.propertyId&&`PR:${S(t.propertyId)}`,void 0!==t.fnr&&null!==t.fnr&&`FN:${String(t.fnr)}`,void 0!==e.OBJECTID&&null!==e.OBJECTID&&`OB:${String(e.OBJECTID)}`,e.UUID_FASTIGHET&&`UU:${S(e.UUID_FASTIGHET)}`].filter(Boolean);return r.length>0?r.join("|").toLowerCase():null},()=>`IX:${r??0}`];for(const e of n){const t=e();if(t)return t}return`IX:${r??0}`},normalizeValue:S},M=(e,t,r)=>{if(!e?.TextSymbol||!t)return null;const n=g(t);return n?new e.TextSymbol({text:n,color:r.textColor,backgroundColor:r.backgroundColor,horizontalAlignment:r.horizontalAlignment,verticalAlignment:r.verticalAlignment,xoffset:r.xoffset,yoffset:r.yoffset,lineWidth:r.lineWidth,lineHeight:r.lineHeight,font:{family:r.fontFamily,size:r.fontSize,weight:r.fontWeight},kerning:r.kerning}):null},I=({modules:e,layer:t,mapPoint:r,tooltipText:n,highlightColor:o,existing:l,style:i=a.Dj})=>{if(!e?.Graphic||!t)return l??null;if(!r)return l?.pointGraphic&&t.remove(l.pointGraphic),l?.tooltipGraphic&&t.remove(l.tooltipGraphic),null;const s={pointGraphic:l?.pointGraphic??null,tooltipGraphic:l?.tooltipGraphic??null,lastTooltipText:l?.lastTooltipText??null};if(s.pointGraphic?s.pointGraphic.geometry=r:(s.pointGraphic=new e.Graphic({geometry:r,symbol:new e.SimpleMarkerSymbol({style:"cross",size:a.Ye,color:o,outline:{color:[o[0],o[1],o[2],1],width:2.5}})}),t.add(s.pointGraphic)),n){if(s.lastTooltipText!==n){const o=M(e,n,i);o?(s.tooltipGraphic?(s.tooltipGraphic.geometry=r,s.tooltipGraphic.symbol=o):(s.tooltipGraphic=new e.Graphic({geometry:r,symbol:o}),t.add(s.tooltipGraphic)),s.lastTooltipText=n):s.tooltipGraphic&&(t.remove(s.tooltipGraphic),s.tooltipGraphic=null,s.lastTooltipText=null)}else s.tooltipGraphic&&(s.tooltipGraphic.geometry=r)}else s.tooltipGraphic&&(t.remove(s.tooltipGraphic),s.tooltipGraphic=null,s.lastTooltipText=null);return s},b=(e,t)=>{const r=(e=>{const t=new Set;return e.map((e=>e.trim())).filter((e=>!(!e||t.has(e)||(t.add(e),0))))})(u(String(e)).split(";"));return t?r.map((e=>(e=>{const t=e.match(/^(.+?)\s*\(([^)]+)\)\s*$/);if(!t)return m.maskName(e);const[,r,n]=t;return`${m.maskName(r.trim())} (${n.trim()})`})(e))).filter(Boolean).join("; "):r.join("; ")},R=(e,t,r)=>e.AGARLISTA&&"string"==typeof e.AGARLISTA?b(e.AGARLISTA,t):((e,t,r)=>{const n=u(e.NAMN||"")||r,o=t&&n!==r?m.maskName(n):n,l=u(e.BOSTADR||""),i=t&&l?m.maskAddress(l):l,a=u(e.POSTNR||"").replace(/\s+/g,""),s=u(e.POSTADR||""),c=u(e.ORGNR||"");return`${[o,i,a&&s?`${a} ${s}`:a||s].filter(Boolean).join(", ")}${c?` (${c})`:""}`.trim()||r})(e,t,r),v=e=>{if(null==e)return"";const t="string"==typeof e||"number"==typeof e?String(e):"",r=g(t);return r?r.replace(/[\t\r\n]+/g," ").trim():""},C=(e,t,r)=>{if(!e||0===e.length)return"";return e.map((e=>`${v(e.FASTIGHET||e.FNR||"")}\t${(()=>{if(e.rawOwner){const n=R(e.rawOwner,t,r);return v(n)||v(r)}return v(e.BOSTADR)||v(r)})()}`)).join("\n")},A=(e,t)=>{const r=t?.trim(),n=`${e}\xa0`;return r?`${n}(${r})`:n},D=(e,t)=>{const r=u(e.BOSTADR||""),n=t&&r?m.maskAddress(r):r,o=u(e.POSTNR||"").replace(/\s+/g,""),l=u(e.POSTADR||""),i=[];n&&i.push(n);const a=[o,l].filter(Boolean).join(" ");return a&&i.push(a),i.join(", ")},E=(e,t)=>{const r="string"==typeof e?e.trim():"",n=r?a.pd.exec(r):null,o=n?n[1]:e.replace("#","");return[parseInt(o.substring(0,2),16),parseInt(o.substring(2,4),16),parseInt(o.substring(4,6),16),"number"==typeof t&&Number.isFinite(t)?t<0?0:t>1?1:t:.4]},T=(e,t,r)=>{const[n,o,l,i]=e;return"polyline"===r?{style:"solid",color:[n,o,l,i],width:t}:"point"===r?{style:"cross",color:[n,o,l,i],size:a.Ye,outline:{style:"solid",color:[n,o,l,1],width:t}}:{style:"solid",color:[n,o,l,i],outline:{style:"solid",color:[n,o,l,1],width:t}}},x=(e,t)=>`${e}_${t}`,j=e=>{if(!e)return null;const t=e.FNR??e.fnr;return"string"==typeof t||"number"==typeof t?t:null},N=e=>null!=e?String(e):"",L=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"AbortError"===t.name||"string"==typeof t.message&&t.message.toLowerCase().includes("abort")},F={isFiniteNumber:e=>"number"==typeof e&&Number.isFinite(e),clamp:(e,t,r)=>Number.isFinite(e)?e<t?t:e>r?r:e:t,clampWithDefault:(e,t,r,n)=>F.isFiniteNumber(e)?F.clamp(e,t,r):n},O={throwIfAborted:e=>{if(e?.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}},checkAbortedOrStale:(e,t)=>t()?"stale":e.aborted?"aborted":"active",handleOrThrow:(e,t)=>{if(L(e))throw t?.(),e}},P=(e,t)=>{if(!e)return t;if("string"==typeof e)return e;if(d(e)){const t="details"in e?e.details:void 0;if(d(t)){const e=t.message;if("string"==typeof e)return e}const r="message"in e?e.message:void 0;if("string"==typeof r)return r}return t},k=e=>"number"==typeof e&&Number.isFinite(e)?e<.5?.5:e>10?10:e:1,z=(e,t="Invalid FNR: must be a safe integer")=>{if("number"==typeof e){if(!Number.isFinite(e)||!Number.isSafeInteger(e)||e<0)throw new Error(t);return`FNR = ${e}`}const r=String(e).replace(/'/g,"''");if(!r.trim())throw new Error("Invalid FNR: cannot be empty or whitespace-only");return`FNR = '${r}'`},G=e=>{const{toRemove:t,removeGraphicsForFnr:r,normalizeFnrKey:n}=e;t.forEach((e=>{r(e,n)}))},_=(e,t)=>{const r=N(e);return t.some((e=>N(e.FNR)===r))},V=(e,t,r)=>!!r&&_(e,t),H=(e,t,r,n)=>{const o=new Map,l=new Map;t.forEach((e=>{const t=N(e.FNR),r=o.get(t);r?r.push(e):o.set(t,[e]),l.set(e.id,e)}));const i=new Set,a=[],s=new Set;e.forEach((e=>{const t=N(e.FNR);if(r&&!i.has(t)){const e=o.get(t);if(e&&e.length>0)return void i.add(t)}l.has(e.id)||s.has(e.id)||(a.push(e),s.add(e.id))}));const u=i.size>0?t.filter((e=>!i.has(N(e.FNR)))):t.slice();return u.push(...a),u.length>n&&(u.length=n),{toRemove:i,toAdd:a,updatedRows:u}},U=e=>{const{event:t,modules:r,translate:n}=e;return r?t?.mapPoint?{valid:!0,data:{mapPoint:t.mapPoint}}:{valid:!1,error:{type:"GEOMETRY_ERROR",message:n("errorNoMapPoint")},failureReason:"no_map_point"}:{valid:!1,error:{type:"VALIDATION_ERROR",message:n("errorLoadingModules")},failureReason:"modules_not_loaded"}},B=e=>{const{graphicsToAdd:t,selectedRows:r,view:n,helpers:o,highlightColor:l,outlineWidth:i}=e;if(!n)return!1;const a=new Set(r.map((e=>o.normalizeFnrKey(e.FNR)))),s=t.filter((({fnr:e})=>{const t=o.normalizeFnrKey(e);return a.has(t)}));return s.length>0&&(o.addManyGraphicsToMap?o.addManyGraphicsToMap(s,n,o.extractFnr,o.normalizeFnrKey,l,i):s.forEach((({graphic:e})=>{o.addGraphicsToMap(e,n,o.extractFnr,o.normalizeFnrKey,l,i)}))),!0},Q=e=>{const{event:t,modules:r,config:n,dsManager:o,translate:a}=e,s=U({event:t,modules:r,translate:a});if((0,l.k)(s))return s;const u=(0,i.PM)({propertyDsId:n.propertyDataSourceId,ownerDsId:n.ownerDataSourceId,dsManager:o,allowedHosts:n.allowedHosts,translate:a});if((0,l.k)(u))return u;const c=u;return{valid:!0,data:{mapPoint:s.data.mapPoint,manager:c.data.manager}}},Y=async e=>{const{propertyResults:t,config:r,processingContext:n,services:o}=e;return r.enableBatchOwnerQuery&&void 0!==r.relationshipId&&r.propertyDataSourceId&&void 0!==r.relationshipId?await o.processBatch({propertyResults:t,config:{propertyDataSourceId:r.propertyDataSourceId,ownerDataSourceId:r.ownerDataSourceId,enablePIIMasking:r.enablePIIMasking,relationshipId:r.relationshipId},context:n}):await o.processIndividual({propertyResults:t,config:{ownerDataSourceId:r.ownerDataSourceId,enablePIIMasking:r.enablePIIMasking},context:n})},W=(e,t,r,n,o,l)=>{const i=e instanceof Map?e:new Map(Object.entries(e||{}).map((([e,t])=>[e,t]))),a=e=>{if(null==e)return null;if(Array.isArray(e))return e.map((e=>a(e)));if(d(e)){const t=e;if("function"==typeof t.toJSON)return a(t.toJSON());try{return JSON.parse(JSON.stringify(e))}catch(t){const r={};return Object.entries(e).forEach((([e,t])=>{r[e]=a(t)})),r}}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:null},s=e=>({propertyId:e?.propertyId??"",features:Array.isArray(e?.features)?e.features.map((e=>(e=>{if(!e)return{attributes:null,geometry:null,aggregateGeometries:null,symbol:null,popupTemplate:null};const t=e.geometry,r=t?"function"==typeof t.toJSON?t.toJSON():a(t):null,n=e.aggregateGeometries;return{attributes:e.attributes&&"object"==typeof e.attributes?{...e.attributes}:null,geometry:r??null,aggregateGeometries:a(n??null),symbol:a(e.symbol??null),popupTemplate:a(e.popupTemplate??null)}})(e))):[]}),u=new Map(i),c=new Map;r.forEach((e=>{const t=e?.features?.[0],r=t?.attributes,n=r?.FNR??r?.fnr;null!=n&&c.set(l(n),s(e))}));let g=0;const p=new Map;o.forEach((e=>{p.set(l(e.FNR),e.id)})),t.forEach((e=>{const t=l(e.FNR);let n=c.get(t);if(!n&&r.length>0){const e=s(r[Math.min(g,r.length-1)]);g+=1,n=e}n&&u.set(e.id,n)})),n.forEach((e=>{const t=p.get(e);t&&u.delete(t)}));const f={};return u.forEach(((e,t)=>{f[t]=e})),f},J=(e,t)=>{const r=r=>{t&&"function"==typeof e&&e(r)};return{setError:e=>{r(s.propertyActions.setError(e,t))},clearError:()=>{r(s.propertyActions.clearError(t))},setSelectedProperties:e=>{r(s.propertyActions.setSelectedProperties(Array.from(e),t))},clearAll:()=>{r(s.propertyActions.clearAll(t))},setQueryInFlight:e=>{r(s.propertyActions.setQueryInFlight(e,t))},setRawResults:e=>{r(s.propertyActions.setRawResults(e,t))},removeWidgetState:()=>{r(s.propertyActions.removeWidgetState(t))}}},Z=(e,t,r)=>{if(!e)return[];const n=[],o=e=>d(e)&&"function"==typeof e.get,l=(e,t)=>{if(e)return o(e)?e.get(t):d(e)?e[t]:void 0},i=(e,t)=>{if(!e)return"";if(o(e)){const r=e.get(t);return"string"==typeof r?r:""}if(d(e)){const r=e[t];return"string"==typeof r?r:""}return""},a=e=>{if(!e)return!1;const t=e.toLowerCase();return t.includes("property")||t.includes("fastighet")},s=e=>{const t=l(r,e);if(!t)return!1;const n=l(t,"manifest");return[i(t,"name"),i(t,"label"),i(t,"manifestLabel"),i(t,"uri"),i(t,"widgetName"),i(n,"name"),i(n,"label"),i(n,"uri")].some(a)};for(const[r,o]of Object.entries(e)){if(r===t||!o)continue;const e=o.state;if(!e)continue;const l="string"==typeof e?e:"number"==typeof e?String(e):null;if(!l)continue;const i=l.toUpperCase();"CLOSED"!==i&&"HIDDEN"!==i&&(o.isClassLoaded&&s(r)&&n.push(r))}return n},$=async e=>{const{mapPoint:t,config:r,dsManager:n,signal:o,enablePIIMasking:a,translate:s}=e,u=(0,i.PM)({propertyDsId:r.propertyDataSourceId,ownerDsId:r.ownerDataSourceId,dsManager:n,allowedHosts:r.allowedHosts,translate:s});if((0,l.k)(u))return null;const{manager:c}=u.data,g=await(0,i.XW)(t,r.propertyDataSourceId,c,{signal:o});if(O.throwIfAborted(o),!g.length||!g[0]?.features?.length)return null;const d=g[0].features[0],p=j(d.attributes),f=d.attributes?.FASTIGHET||"";if(!p||!f)return null;const m=await(0,i.nS)(p,r.ownerDataSourceId,c,{signal:o});O.throwIfAborted(o);let h=s("unknownOwner");if(m.length>0){const e=m[0].attributes;h=R(e,a,s("unknownOwner"))}return{fastighet:f,bostadr:h}},q=(e,t,r)=>{if(!t)return!1;const n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)<r},K=(e,t,r,n)=>{if(!e||!e.geometry)return;const o=e.geometry,l=T(t,r,o.type);"polygon"===o.type||"extent"===o.type?e.symbol=new n.SimpleFillSymbol(l):"polyline"===o.type?e.symbol=new n.SimpleLineSymbol(l):"point"!==o.type&&"multipoint"!==o.type||(e.symbol=new n.SimpleMarkerSymbol(l))},X=e=>{const{value:t,min:r,max:n,errorMessage:o}=e,l="string"==typeof t?parseInt(t,10):t;return isNaN(l)||l<r||l>n?{valid:!1,error:o}:{valid:!0,normalized:l}},ee=(e,t,r)=>Number.isFinite(e)?e<t?t:e>r?r:e:t,te={toPercent:e=>{const t=ee(e,0,1);return Math.round(100*t)},fromPercent:e=>ee(e,0,100)/100,formatPercent:e=>`${ee(Math.round(e),0,100)}%`},re={normalize:e=>{const t=ee(e,.5,10);return Math.round(2*t)/2},formatDisplay:e=>{const t=ee(e,.5,10),r=Math.round(2*t)/2,n=Math.round(r);return Math.abs(r-n)<1e-4?String(n):r.toFixed(1)}},ne=e=>{try{return o()(e,{debug:!1,format:"text/plain"})}catch(e){return!1}},oe=e=>g(e||"").trim(),le=e=>{if(!e||0===e.length)return[];const t=e.map(oe).filter((e=>e.length>0));return Array.from(new Set(t))},ie={extractId:e=>{if(!e||"object"!=typeof e)return null;if((t=e)&&"object"==typeof t&&"function"==typeof t.get){const t=e.get("dataSourceId");return"string"==typeof t?t:null}var t;if("dataSourceId"in e){const t=e.dataSourceId;return"string"==typeof t?t:null}return null},findById:(e,t)=>{if(!t||!e)return null;const r=e;if("function"==typeof r.find){const e=r.find((e=>!!e&&ie.extractId(e)===t));if(e)return e}if((n=e)&&"object"==typeof n&&"function"==typeof n.asMutable){const r=e.asMutable({deep:!1});if(Array.isArray(r))return ie.findById(r,t)}var n;if(Array.isArray(e)||(e=>!(!e||"object"!=typeof e)&&"number"==typeof e.length)(e)){const r=e,n=r.length??0;for(let e=0;e<n;e+=1){const n=r[e];if(n&&ie.extractId(n)===t)return n}}return null}};const ae=new class{constructor(){this.ownersByView=new WeakMap,this.originalStateByView=new WeakMap}resolveView(e){return e}acquire(e,t){if(!t)return;const r=this.resolveView(t),n=r.popupEnabled;if("boolean"!=typeof n)return;let o=this.ownersByView.get(t);o||(o=new Set,this.ownersByView.set(t,o),this.originalStateByView.set(t,n)),o.add(e),r.popupEnabled=!1}release(e,t){if(!t)return;const r=this.ownersByView.get(t);r&&r.delete(e)&&0===r.size&&this.restorePopupState(t)}restorePopupState(e){const t=this.originalStateByView.get(e);if(void 0!==t){this.resolveView(e).popupEnabled=t,this.originalStateByView.delete(e),this.ownersByView.delete(e)}}},se={cleanupHandles:e=>{e.pointerMoveHandle.current&&(e.pointerMoveHandle.current.remove(),e.pointerMoveHandle.current=null,e.clearGraphics()),e.pointerLeaveHandle.current&&(e.pointerLeaveHandle.current.remove(),e.pointerLeaveHandle.current=null),null!==e.rafId.current&&(cancelAnimationFrame(e.rafId.current),e.rafId.current=null)},setupCursorTracking:e=>{const{view:t,widgetId:r,ensureGraphicsLayer:n,cachedLayerRef:o,pointerMoveHandleRef:l,pointerLeaveHandleRef:i,rafIdRef:a,lastCursorPointRef:s,pendingMapPointRef:u,lastHoverQueryPointRef:c,updateCursorPoint:g,throttledHoverQuery:d,cleanupHoverQuery:p}=e;n(t),o.current=t.map.findLayerById(`property-${r}-highlight-layer`),l.current=t.on("pointer-move",(e=>{const r={x:e.x,y:e.y},n=t.toMap(r);if(!n)return s.current=null,u.current=null,g(null),void p();s.current=n,u.current=n,null===a.current&&(a.current=requestAnimationFrame((()=>{a.current=null;const e=u.current;e&&g(e)}))),d(n,r)})),i.current=t.on("pointer-leave",(()=>{s.current=null,u.current=null,c.current=null,null!==a.current&&(cancelAnimationFrame(a.current),a.current=null),g(null),p()}))},resetCursorState:e=>{e.lastCursorPointRef.current=null,e.pendingMapPointRef.current=null,e.cachedLayerRef.current=null,e.clearGraphics(),e.cleanupQuery()},teardownCursorTracking:e=>{null!==e.rafId.current&&(cancelAnimationFrame(e.rafId.current),e.rafId.current=null),e.pointerMoveHandle.current&&(e.pointerMoveHandle.current.remove(),e.pointerMoveHandle.current=null),e.pointerLeaveHandle.current&&(e.pointerLeaveHandle.current.remove(),e.pointerLeaveHandle.current=null),e.cleanupQuery(),e.pendingMapPointRef.current=null,e.cachedLayerRef.current=null,e.canTrackCursor||(e.lastCursorPointRef.current=null),e.clearGraphics()}}},8972:e=>{"use strict";e.exports=l},9244:e=>{"use strict";e.exports=r}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var s={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(s),a.d(s,{__set_webpack_public_path__:()=>Be,default:()=>Ue});var e=a(9244),t=a(2686),r=a(4321),n=a(8972);function o(e,t){return"function"==typeof e?e(t):e}function l(e,t){return r=>{t.setState((t=>({...t,[e]:o(r,t[e])})))}}function i(e){return e instanceof Function}function u(e,t){const r=[],n=e=>{e.forEach((e=>{r.push(e);const o=t(e);null!=o&&o.length&&n(o)}))};return n(e),r}function c(e,t,r){let n,o=[];return l=>{let i;r.key&&r.debug&&(i=Date.now());const a=e(l);if(!(a.length!==o.length||a.some(((e,t)=>o[t]!==e))))return n;let s;if(o=a,r.key&&r.debug&&(s=Date.now()),n=t(...a),null==r||null==r.onChange||r.onChange(n),r.key&&r.debug&&null!=r&&r.debug()){const e=Math.round(100*(Date.now()-i))/100,t=Math.round(100*(Date.now()-s))/100,n=t/16,o=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c\u23f1 ${o(t,5)} /${o(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*n,120))}deg 100% 31%);`,null==r?void 0:r.key)}return n}}function g(e,t,r,n){return{debug:()=>{var r;return null!=(r=null==e?void 0:e.debugAll)?r:e[t]},key:!1,onChange:n}}const d="debugHeaders";function p(e,t,r){var n;let o={id:null!=(n=r.id)?n:t.id,column:t,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=r=>{r.subHeaders&&r.subHeaders.length&&r.subHeaders.map(t),e.push(r)};return t(o),e},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach((t=>{null==t.createHeader||t.createHeader(o,e)})),o}const f={createTable:e=>{e.getHeaderGroups=c((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,r,n,o)=>{var l,i;const a=null!=(l=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?l:[],s=null!=(i=null==o?void 0:o.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?i:[];return m(t,[...a,...r.filter((e=>!(null!=n&&n.includes(e.id)||null!=o&&o.includes(e.id)))),...s],e)}),g(e.options,d)),e.getCenterHeaderGroups=c((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,r,n,o)=>m(t,r=r.filter((e=>!(null!=n&&n.includes(e.id)||null!=o&&o.includes(e.id)))),e,"center")),g(e.options,d)),e.getLeftHeaderGroups=c((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left]),((t,r,n)=>{var o;return m(t,null!=(o=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?o:[],e,"left")}),g(e.options,d)),e.getRightHeaderGroups=c((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right]),((t,r,n)=>{var o;return m(t,null!=(o=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?o:[],e,"right")}),g(e.options,d)),e.getFooterGroups=c((()=>[e.getHeaderGroups()]),(e=>[...e].reverse()),g(e.options,d)),e.getLeftFooterGroups=c((()=>[e.getLeftHeaderGroups()]),(e=>[...e].reverse()),g(e.options,d)),e.getCenterFooterGroups=c((()=>[e.getCenterHeaderGroups()]),(e=>[...e].reverse()),g(e.options,d)),e.getRightFooterGroups=c((()=>[e.getRightHeaderGroups()]),(e=>[...e].reverse()),g(e.options,d)),e.getFlatHeaders=c((()=>[e.getHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),g(e.options,d)),e.getLeftFlatHeaders=c((()=>[e.getLeftHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),g(e.options,d)),e.getCenterFlatHeaders=c((()=>[e.getCenterHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),g(e.options,d)),e.getRightFlatHeaders=c((()=>[e.getRightHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),g(e.options,d)),e.getCenterLeafHeaders=c((()=>[e.getCenterFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),g(e.options,d)),e.getLeftLeafHeaders=c((()=>[e.getLeftFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),g(e.options,d)),e.getRightLeafHeaders=c((()=>[e.getRightFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),g(e.options,d)),e.getLeafHeaders=c((()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()]),((e,t,r)=>{var n,o,l,i,a,s;return[...null!=(n=null==(o=e[0])?void 0:o.headers)?n:[],...null!=(l=null==(i=t[0])?void 0:i.headers)?l:[],...null!=(a=null==(s=r[0])?void 0:s.headers)?a:[]].map((e=>e.getLeafHeaders())).flat()}),g(e.options,d))}};function m(e,t,r,n){var o,l;let i=0;const a=function(e,t){void 0===t&&(t=1),i=Math.max(i,t),e.filter((e=>e.getIsVisible())).forEach((e=>{var r;null!=(r=e.columns)&&r.length&&a(e.columns,t+1)}),0)};a(e);let s=[];const u=(e,t)=>{const o={depth:t,id:[n,`${t}`].filter(Boolean).join("_"),headers:[]},l=[];e.forEach((e=>{const i=[...l].reverse()[0];let a,s=!1;if(e.column.depth===o.depth&&e.column.parent?a=e.column.parent:(a=e.column,s=!0),i&&(null==i?void 0:i.column)===a)i.subHeaders.push(e);else{const o=p(r,a,{id:[n,t,a.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:s,placeholderId:s?`${l.filter((e=>e.column===a)).length}`:void 0,depth:t,index:l.length});o.subHeaders.push(e),l.push(o)}o.headers.push(e),e.headerGroup=o})),s.push(o),t>0&&u(l,t-1)},c=t.map(((e,t)=>p(r,e,{depth:i,index:t})));u(c,i-1),s.reverse();const g=e=>e.filter((e=>e.column.getIsVisible())).map((e=>{let t=0,r=0,n=[0];e.subHeaders&&e.subHeaders.length?(n=[],g(e.subHeaders).forEach((e=>{let{colSpan:r,rowSpan:o}=e;t+=r,n.push(o)}))):t=1;return r+=Math.min(...n),e.colSpan=t,e.rowSpan=r,{colSpan:t,rowSpan:r}}));return g(null!=(o=null==(l=s[0])?void 0:l.headers)?o:[]),s}const h=(e,t,r,n,o,l,i)=>{let a={id:t,index:n,original:r,depth:o,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(a._valuesCache.hasOwnProperty(t))return a._valuesCache[t];const r=e.getColumn(t);return null!=r&&r.accessorFn?(a._valuesCache[t]=r.accessorFn(a.original,n),a._valuesCache[t]):void 0},getUniqueValues:t=>{if(a._uniqueValuesCache.hasOwnProperty(t))return a._uniqueValuesCache[t];const r=e.getColumn(t);return null!=r&&r.accessorFn?r.columnDef.getUniqueValues?(a._uniqueValuesCache[t]=r.columnDef.getUniqueValues(a.original,n),a._uniqueValuesCache[t]):(a._uniqueValuesCache[t]=[a.getValue(t)],a._uniqueValuesCache[t]):void 0},renderValue:t=>{var r;return null!=(r=a.getValue(t))?r:e.options.renderFallbackValue},subRows:null!=l?l:[],getLeafRows:()=>u(a.subRows,(e=>e.subRows)),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let e=[],t=a;for(;;){const r=t.getParentRow();if(!r)break;e.push(r),t=r}return e.reverse()},getAllCells:c((()=>[e.getAllLeafColumns()]),(t=>t.map((t=>function(e,t,r,n){const o={id:`${t.id}_${r.id}`,row:t,column:r,getValue:()=>t.getValue(n),renderValue:()=>{var t;return null!=(t=o.getValue())?t:e.options.renderFallbackValue},getContext:c((()=>[e,r,t,o]),((e,t,r,n)=>({table:e,column:t,row:r,cell:n,getValue:n.getValue,renderValue:n.renderValue})),g(e.options,"debugCells"))};return e._features.forEach((n=>{null==n.createCell||n.createCell(o,r,t,e)}),{}),o}(e,a,t,t.id)))),g(e.options,"debugRows")),_getAllCellsByColumnId:c((()=>[a.getAllCells()]),(e=>e.reduce(((e,t)=>(e[t.column.id]=t,e)),{})),g(e.options,"debugRows"))};for(let t=0;t<e._features.length;t++){const r=e._features[t];null==r||null==r.createRow||r.createRow(a,e)}return a},y={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},S=(e,t,r)=>{var n,o;const l=null==r||null==(n=r.toString())?void 0:n.toLowerCase();return Boolean(null==(o=e.getValue(t))||null==(o=o.toString())||null==(o=o.toLowerCase())?void 0:o.includes(l))};S.autoRemove=e=>E(e);const w=(e,t,r)=>{var n;return Boolean(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.includes(r))};w.autoRemove=e=>E(e);const M=(e,t,r)=>{var n;return(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.toLowerCase())===(null==r?void 0:r.toLowerCase())};M.autoRemove=e=>E(e);const I=(e,t,r)=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(r)};I.autoRemove=e=>E(e);const b=(e,t,r)=>!r.some((r=>{var n;return!(null!=(n=e.getValue(t))&&n.includes(r))}));b.autoRemove=e=>E(e)||!(null!=e&&e.length);const R=(e,t,r)=>r.some((r=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(r)}));R.autoRemove=e=>E(e)||!(null!=e&&e.length);const v=(e,t,r)=>e.getValue(t)===r;v.autoRemove=e=>E(e);const C=(e,t,r)=>e.getValue(t)==r;C.autoRemove=e=>E(e);const A=(e,t,r)=>{let[n,o]=r;const l=e.getValue(t);return l>=n&&l<=o};A.resolveFilterValue=e=>{let[t,r]=e,n="number"!=typeof t?parseFloat(t):t,o="number"!=typeof r?parseFloat(r):r,l=null===t||Number.isNaN(n)?-1/0:n,i=null===r||Number.isNaN(o)?1/0:o;if(l>i){const e=l;l=i,i=e}return[l,i]},A.autoRemove=e=>E(e)||E(e[0])&&E(e[1]);const D={includesString:S,includesStringSensitive:w,equalsString:M,arrIncludes:I,arrIncludesAll:b,arrIncludesSome:R,equals:v,weakEquals:C,inNumberRange:A};function E(e){return null==e||""===e}const T={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:l("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=null==r?void 0:r.getValue(e.id);return"string"==typeof n?D.includesString:"number"==typeof n?D.inNumberRange:"boolean"==typeof n||null!==n&&"object"==typeof n?D.equals:Array.isArray(n)?D.arrIncludes:D.weakEquals},e.getFilterFn=()=>{var r,n;return i(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(r=null==(n=t.options.filterFns)?void 0:n[e.columnDef.filterFn])?r:D[e.columnDef.filterFn]},e.getCanFilter=()=>{var r,n,o;return(null==(r=e.columnDef.enableColumnFilter)||r)&&(null==(n=t.options.enableColumnFilters)||n)&&(null==(o=t.options.enableFilters)||o)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var r;return null==(r=t.getState().columnFilters)||null==(r=r.find((t=>t.id===e.id)))?void 0:r.value},e.getFilterIndex=()=>{var r,n;return null!=(r=null==(n=t.getState().columnFilters)?void 0:n.findIndex((t=>t.id===e.id)))?r:-1},e.setFilterValue=r=>{t.setColumnFilters((t=>{const n=e.getFilterFn(),l=null==t?void 0:t.find((t=>t.id===e.id)),i=o(r,l?l.value:void 0);var a;if(x(n,i,e))return null!=(a=null==t?void 0:t.filter((t=>t.id!==e.id)))?a:[];const s={id:e.id,value:i};var u;return l?null!=(u=null==t?void 0:t.map((t=>t.id===e.id?s:t)))?u:[]:null!=t&&t.length?[...t,s]:[s]}))}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const r=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange((e=>{var n;return null==(n=o(t,e))?void 0:n.filter((e=>{const t=r.find((t=>t.id===e.id));if(t){if(x(t.getFilterFn(),e.value,t))return!1}return!0}))}))},e.resetColumnFilters=t=>{var r,n;e.setColumnFilters(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.columnFilters)?r:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function x(e,t,r){return!(!e||!e.autoRemove)&&e.autoRemove(t,r)||void 0===t||"string"==typeof t&&!t}const j={sum:(e,t,r)=>r.reduce(((t,r)=>{const n=r.getValue(e);return t+("number"==typeof n?n:0)}),0),min:(e,t,r)=>{let n;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(n>r||void 0===n&&r>=r)&&(n=r)})),n},max:(e,t,r)=>{let n;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(n<r||void 0===n&&r>=r)&&(n=r)})),n},extent:(e,t,r)=>{let n,o;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(void 0===n?r>=r&&(n=o=r):(n>r&&(n=r),o<r&&(o=r)))})),[n,o]},mean:(e,t)=>{let r=0,n=0;if(t.forEach((t=>{let o=t.getValue(e);null!=o&&(o=+o)>=o&&(++r,n+=o)})),r)return n/r},median:(e,t)=>{if(!t.length)return;const r=t.map((t=>t.getValue(e)));if(n=r,!Array.isArray(n)||!n.every((e=>"number"==typeof e)))return;var n;if(1===r.length)return r[0];const o=Math.floor(r.length/2),l=r.sort(((e,t)=>e-t));return r.length%2!=0?l[o]:(l[o-1]+l[o])/2},unique:(e,t)=>Array.from(new Set(t.map((t=>t.getValue(e)))).values()),uniqueCount:(e,t)=>new Set(t.map((t=>t.getValue(e)))).size,count:(e,t)=>t.length},N={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,r;return null!=(t=null==(r=e.getValue())||null==r.toString?void 0:r.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:l("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping((t=>null!=t&&t.includes(e.id)?t.filter((t=>t!==e.id)):[...null!=t?t:[],e.id]))},e.getCanGroup=()=>{var r,n;return(null==(r=e.columnDef.enableGrouping)||r)&&(null==(n=t.options.enableGrouping)||n)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var r;return null==(r=t.getState().grouping)?void 0:r.includes(e.id)},e.getGroupedIndex=()=>{var r;return null==(r=t.getState().grouping)?void 0:r.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=null==r?void 0:r.getValue(e.id);return"number"==typeof n?j.sum:"[object Date]"===Object.prototype.toString.call(n)?j.extent:void 0},e.getAggregationFn=()=>{var r,n;if(!e)throw new Error;return i(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(r=null==(n=t.options.aggregationFns)?void 0:n[e.columnDef.aggregationFn])?r:j[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var r,n;e.setGrouping(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.grouping)?r:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=r=>{if(e._groupingValuesCache.hasOwnProperty(r))return e._groupingValuesCache[r];const n=t.getColumn(r);return null!=n&&n.columnDef.getGroupingValue?(e._groupingValuesCache[r]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[r]):e.getValue(r)},e._groupingValuesCache={}},createCell:(e,t,r,n)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===r.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=r.subRows)||!t.length)}}};const L={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:l("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=c((e=>[G(t,e)]),(t=>t.findIndex((t=>t.id===e.id))),g(t.options,"debugColumns")),e.getIsFirstColumn=r=>{var n;return(null==(n=G(t,r)[0])?void 0:n.id)===e.id},e.getIsLastColumn=r=>{var n;const o=G(t,r);return(null==(n=o[o.length-1])?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var r;e.setColumnOrder(t?[]:null!=(r=e.initialState.columnOrder)?r:[])},e._getOrderColumnsFn=c((()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode]),((e,t,r)=>n=>{let o=[];if(null!=e&&e.length){const t=[...e],r=[...n];for(;r.length&&t.length;){const e=t.shift(),n=r.findIndex((t=>t.id===e));n>-1&&o.push(r.splice(n,1)[0])}o=[...o,...r]}else o=n;return function(e,t,r){if(null==t||!t.length||!r)return e;const n=e.filter((e=>!t.includes(e.id)));return"remove"===r?n:[...t.map((t=>e.find((e=>e.id===t)))).filter(Boolean),...n]}(o,t,r)}),g(e.options,"debugTable"))}},F={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:l("columnPinning",e)}),createColumn:(e,t)=>{e.pin=r=>{const n=e.getLeafColumns().map((e=>e.id)).filter(Boolean);t.setColumnPinning((e=>{var t,o,l,i,a,s;return"right"===r?{left:(null!=(l=null==e?void 0:e.left)?l:[]).filter((e=>!(null!=n&&n.includes(e)))),right:[...(null!=(i=null==e?void 0:e.right)?i:[]).filter((e=>!(null!=n&&n.includes(e)))),...n]}:"left"===r?{left:[...(null!=(a=null==e?void 0:e.left)?a:[]).filter((e=>!(null!=n&&n.includes(e)))),...n],right:(null!=(s=null==e?void 0:e.right)?s:[]).filter((e=>!(null!=n&&n.includes(e))))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter((e=>!(null!=n&&n.includes(e)))),right:(null!=(o=null==e?void 0:e.right)?o:[]).filter((e=>!(null!=n&&n.includes(e))))}}))},e.getCanPin=()=>e.getLeafColumns().some((e=>{var r,n,o;return(null==(r=e.columnDef.enablePinning)||r)&&(null==(n=null!=(o=t.options.enableColumnPinning)?o:t.options.enablePinning)||n)})),e.getIsPinned=()=>{const r=e.getLeafColumns().map((e=>e.id)),{left:n,right:o}=t.getState().columnPinning,l=r.some((e=>null==n?void 0:n.includes(e))),i=r.some((e=>null==o?void 0:o.includes(e)));return l?"left":!!i&&"right"},e.getPinnedIndex=()=>{var r,n;const o=e.getIsPinned();return o?null!=(r=null==(n=t.getState().columnPinning)||null==(n=n[o])?void 0:n.indexOf(e.id))?r:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=c((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right]),((e,t,r)=>{const n=[...null!=t?t:[],...null!=r?r:[]];return e.filter((e=>!n.includes(e.column.id)))}),g(t.options,"debugRows")),e.getLeftVisibleCells=c((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"left"})))),g(t.options,"debugRows")),e.getRightVisibleCells=c((()=>[e._getAllVisibleCells(),t.getState().columnPinning.right]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"right"})))),g(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var r,n;return e.setColumnPinning(t?{left:[],right:[]}:null!=(r=null==(n=e.initialState)?void 0:n.columnPinning)?r:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var r;const n=e.getState().columnPinning;var o,l;return t?Boolean(null==(r=n[t])?void 0:r.length):Boolean((null==(o=n.left)?void 0:o.length)||(null==(l=n.right)?void 0:l.length))},e.getLeftLeafColumns=c((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),g(e.options,"debugColumns")),e.getRightLeafColumns=c((()=>[e.getAllLeafColumns(),e.getState().columnPinning.right]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),g(e.options,"debugColumns")),e.getCenterLeafColumns=c((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((e,t,r)=>{const n=[...null!=t?t:[],...null!=r?r:[]];return e.filter((e=>!n.includes(e.id)))}),g(e.options,"debugColumns"))}};const O={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},P={getDefaultColumnDef:()=>O,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:l("columnSizing",e),onColumnSizingInfoChange:l("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var r,n,o;const l=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(r=e.columnDef.minSize)?r:O.minSize,null!=(n=null!=l?l:e.columnDef.size)?n:O.size),null!=(o=e.columnDef.maxSize)?o:O.maxSize)},e.getStart=c((e=>[e,G(t,e),t.getState().columnSizing]),((t,r)=>r.slice(0,e.getIndex(t)).reduce(((e,t)=>e+t.getSize()),0)),g(t.options,"debugColumns")),e.getAfter=c((e=>[e,G(t,e),t.getState().columnSizing]),((t,r)=>r.slice(e.getIndex(t)+1).reduce(((e,t)=>e+t.getSize()),0)),g(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing((t=>{let{[e.id]:r,...n}=t;return n}))},e.getCanResize=()=>{var r,n;return(null==(r=e.columnDef.enableResizing)||r)&&(null==(n=t.options.enableColumnResizing)||n)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const r=e=>{var n;e.subHeaders.length?e.subHeaders.forEach(r):t+=null!=(n=e.column.getSize())?n:0};return r(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=r=>{const n=t.getColumn(e.column.id),o=null==n?void 0:n.getCanResize();return l=>{if(!n||!o)return;if(null==l.persist||l.persist(),z(l)&&l.touches&&l.touches.length>1)return;const i=e.getSize(),a=e?e.getLeafHeaders().map((e=>[e.column.id,e.column.getSize()])):[[n.id,n.getSize()]],s=z(l)?Math.round(l.touches[0].clientX):l.clientX,u={},c=(e,r)=>{"number"==typeof r&&(t.setColumnSizingInfo((e=>{var n,o;const l="rtl"===t.options.columnResizeDirection?-1:1,i=(r-(null!=(n=null==e?void 0:e.startOffset)?n:0))*l,a=Math.max(i/(null!=(o=null==e?void 0:e.startSize)?o:0),-.999999);return e.columnSizingStart.forEach((e=>{let[t,r]=e;u[t]=Math.round(100*Math.max(r+r*a,0))/100})),{...e,deltaOffset:i,deltaPercentage:a}})),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing((e=>({...e,...u}))))},g=e=>c("move",e),d=e=>{c("end",e),t.setColumnSizingInfo((e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]})))},p=r||("undefined"!=typeof document?document:null);const f={moveHandler:e=>g(e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",f.moveHandler),null==p||p.removeEventListener("mouseup",f.upHandler),d(e.clientX)}},m={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),g(e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",m.moveHandler),null==p||p.removeEventListener("touchend",m.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(null==(t=e.touches[0])?void 0:t.clientX)}},h=!!function(){if("boolean"==typeof k)return k;let e=!1;try{const t={get passive(){return e=!0,!1}},r=()=>{};window.addEventListener("test",r,t),window.removeEventListener("test",r)}catch(t){e=!1}return k=e,k}()&&{passive:!1};z(l)?(null==p||p.addEventListener("touchmove",m.moveHandler,h),null==p||p.addEventListener("touchend",m.upHandler,h)):(null==p||p.addEventListener("mousemove",f.moveHandler,h),null==p||p.addEventListener("mouseup",f.upHandler,h)),t.setColumnSizingInfo((e=>({...e,startOffset:s,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:n.id})))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var r;e.setColumnSizing(t?{}:null!=(r=e.initialState.columnSizing)?r:{})},e.resetHeaderSizeInfo=t=>{var r;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(r=e.initialState.columnSizingInfo)?r:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getLeftTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getLeftHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getCenterTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getCenterHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getRightTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getRightHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0}}};let k=null;function z(e){return"touchstart"===e.type}function G(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const _={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:l("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var r;return e.setRowSelection(t?{}:null!=(r=e.initialState.rowSelection)?r:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection((r=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const n={...r},o=e.getPreGroupedRowModel().flatRows;return t?o.forEach((e=>{e.getCanSelect()&&(n[e.id]=!0)})):o.forEach((e=>{delete n[e.id]})),n}))},e.toggleAllPageRowsSelected=t=>e.setRowSelection((r=>{const n=void 0!==t?t:!e.getIsAllPageRowsSelected(),o={...r};return e.getRowModel().rows.forEach((t=>{V(o,t.id,n,!0,e)})),o})),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=c((()=>[e.getState().rowSelection,e.getCoreRowModel()]),((t,r)=>Object.keys(t).length?H(e,r):{rows:[],flatRows:[],rowsById:{}}),g(e.options,"debugTable")),e.getFilteredSelectedRowModel=c((()=>[e.getState().rowSelection,e.getFilteredRowModel()]),((t,r)=>Object.keys(t).length?H(e,r):{rows:[],flatRows:[],rowsById:{}}),g(e.options,"debugTable")),e.getGroupedSelectedRowModel=c((()=>[e.getState().rowSelection,e.getSortedRowModel()]),((t,r)=>Object.keys(t).length?H(e,r):{rows:[],flatRows:[],rowsById:{}}),g(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:r}=e.getState();let n=Boolean(t.length&&Object.keys(r).length);return n&&t.some((e=>e.getCanSelect()&&!r[e.id]))&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter((e=>e.getCanSelect())),{rowSelection:r}=e.getState();let n=!!t.length;return n&&t.some((e=>!r[e.id]))&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var t;const r=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return r>0&&r<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter((e=>e.getCanSelect())).some((e=>e.getIsSelected()||e.getIsSomeSelected()))},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(r,n)=>{const o=e.getIsSelected();t.setRowSelection((l=>{var i;if(r=void 0!==r?r:!o,e.getCanSelect()&&o===r)return l;const a={...l};return V(a,e.id,r,null==(i=null==n?void 0:n.selectChildren)||i,t),a}))},e.getIsSelected=()=>{const{rowSelection:r}=t.getState();return U(e,r)},e.getIsSomeSelected=()=>{const{rowSelection:r}=t.getState();return"some"===B(e,r)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=t.getState();return"all"===B(e,r)},e.getCanSelect=()=>{var r;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(r=t.options.enableRowSelection)||r},e.getCanSelectSubRows=()=>{var r;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(r=t.options.enableSubRowSelection)||r},e.getCanMultiSelect=()=>{var r;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(r=t.options.enableMultiRowSelection)||r},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return r=>{var n;t&&e.toggleSelected(null==(n=r.target)?void 0:n.checked)}}}},V=(e,t,r,n,o)=>{var l;const i=o.getRow(t,!0);r?(i.getCanMultiSelect()||Object.keys(e).forEach((t=>delete e[t])),i.getCanSelect()&&(e[t]=!0)):delete e[t],n&&null!=(l=i.subRows)&&l.length&&i.getCanSelectSubRows()&&i.subRows.forEach((t=>V(e,t.id,r,n,o)))};function H(e,t){const r=e.getState().rowSelection,n=[],o={},l=function(e,t){return e.map((e=>{var t;const i=U(e,r);if(i&&(n.push(e),o[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:l(e.subRows)}),i)return e})).filter(Boolean)};return{rows:l(t.rows),flatRows:n,rowsById:o}}function U(e,t){var r;return null!=(r=t[e.id])&&r}function B(e,t,r){var n;if(null==(n=e.subRows)||!n.length)return!1;let o=!0,l=!1;return e.subRows.forEach((e=>{if((!l||o)&&(e.getCanSelect()&&(U(e,t)?l=!0:o=!1),e.subRows&&e.subRows.length)){const r=B(e,t);"all"===r?l=!0:"some"===r?(l=!0,o=!1):o=!1}})),o?"all":!!l&&"some"}const Q=/([0-9]+)/gm;function Y(e,t){return e===t?0:e>t?1:-1}function W(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function J(e,t){const r=e.split(Q).filter(Boolean),n=t.split(Q).filter(Boolean);for(;r.length&&n.length;){const e=r.shift(),t=n.shift(),o=parseInt(e,10),l=parseInt(t,10),i=[o,l].sort();if(isNaN(i[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(i[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}}return r.length-n.length}const Z={alphanumeric:(e,t,r)=>J(W(e.getValue(r)).toLowerCase(),W(t.getValue(r)).toLowerCase()),alphanumericCaseSensitive:(e,t,r)=>J(W(e.getValue(r)),W(t.getValue(r))),text:(e,t,r)=>Y(W(e.getValue(r)).toLowerCase(),W(t.getValue(r)).toLowerCase()),textCaseSensitive:(e,t,r)=>Y(W(e.getValue(r)),W(t.getValue(r))),datetime:(e,t,r)=>{const n=e.getValue(r),o=t.getValue(r);return n>o?1:n<o?-1:0},basic:(e,t,r)=>Y(e.getValue(r),t.getValue(r))},$=[f,{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:l("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=r=>{e.getCanHide()&&t.setColumnVisibility((t=>({...t,[e.id]:null!=r?r:!e.getIsVisible()})))},e.getIsVisible=()=>{var r,n;const o=e.columns;return null==(r=o.length?o.some((e=>e.getIsVisible())):null==(n=t.getState().columnVisibility)?void 0:n[e.id])||r},e.getCanHide=()=>{var r,n;return(null==(r=e.columnDef.enableHiding)||r)&&(null==(n=t.options.enableHiding)||n)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=c((()=>[e.getAllCells(),t.getState().columnVisibility]),(e=>e.filter((e=>e.column.getIsVisible()))),g(t.options,"debugRows")),e.getVisibleCells=c((()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()]),((e,t,r)=>[...e,...t,...r]),g(t.options,"debugRows"))},createTable:e=>{const t=(t,r)=>c((()=>[r(),r().filter((e=>e.getIsVisible())).map((e=>e.id)).join("_")]),(e=>e.filter((e=>null==e.getIsVisible?void 0:e.getIsVisible()))),g(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,(()=>e.getAllFlatColumns())),e.getVisibleLeafColumns=t(0,(()=>e.getAllLeafColumns())),e.getLeftVisibleLeafColumns=t(0,(()=>e.getLeftLeafColumns())),e.getRightVisibleLeafColumns=t(0,(()=>e.getRightLeafColumns())),e.getCenterVisibleLeafColumns=t(0,(()=>e.getCenterLeafColumns())),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var r;e.setColumnVisibility(t?{}:null!=(r=e.initialState.columnVisibility)?r:{})},e.toggleAllColumnsVisible=t=>{var r;t=null!=(r=t)?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce(((e,r)=>({...e,[r.id]:t||!(null!=r.getCanHide&&r.getCanHide())})),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some((e=>!(null!=e.getIsVisible&&e.getIsVisible()))),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some((e=>null==e.getIsVisible?void 0:e.getIsVisible())),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;e.toggleAllColumnsVisible(null==(r=t.target)?void 0:r.checked)}}},L,F,y,T,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:l("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var r;const n=null==(r=e.getCoreRowModel().flatRows[0])||null==(r=r._getAllCellsByColumnId()[t.id])?void 0:r.getValue();return"string"==typeof n||"number"==typeof n}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var r,n,o,l;return(null==(r=e.columnDef.enableGlobalFilter)||r)&&(null==(n=t.options.enableGlobalFilter)||n)&&(null==(o=t.options.enableFilters)||o)&&(null==(l=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||l)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>D.includesString,e.getGlobalFilterFn=()=>{var t,r;const{globalFilterFn:n}=e.options;return i(n)?n:"auto"===n?e.getGlobalAutoFilterFn():null!=(t=null==(r=e.options.filterFns)?void 0:r[n])?t:D[n]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:l("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const r=t.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const t of r){const r=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(r))return Z.datetime;if("string"==typeof r&&(n=!0,r.split(Q).length>1))return Z.alphanumeric}return n?Z.text:Z.basic},e.getAutoSortDir=()=>{const r=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==r?void 0:r.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var r,n;if(!e)throw new Error;return i(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(r=null==(n=t.options.sortingFns)?void 0:n[e.columnDef.sortingFn])?r:Z[e.columnDef.sortingFn]},e.toggleSorting=(r,n)=>{const o=e.getNextSortingOrder(),l=null!=r;t.setSorting((i=>{const a=null==i?void 0:i.find((t=>t.id===e.id)),s=null==i?void 0:i.findIndex((t=>t.id===e.id));let u,c=[],g=l?r:"desc"===o;var d;(u=null!=i&&i.length&&e.getCanMultiSort()&&n?a?"toggle":"add":null!=i&&i.length&&s!==i.length-1?"replace":a?"toggle":"replace","toggle"===u&&(l||o||(u="remove")),"add"===u)?(c=[...i,{id:e.id,desc:g}],c.splice(0,c.length-(null!=(d=t.options.maxMultiSortColCount)?d:Number.MAX_SAFE_INTEGER))):c="toggle"===u?i.map((t=>t.id===e.id?{...t,desc:g}:t)):"remove"===u?i.filter((t=>t.id!==e.id)):[{id:e.id,desc:g}];return c}))},e.getFirstSortDir=()=>{var r,n;return(null!=(r=null!=(n=e.columnDef.sortDescFirst)?n:t.options.sortDescFirst)?r:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=r=>{var n,o;const l=e.getFirstSortDir(),i=e.getIsSorted();return i?!!(i===l||null!=(n=t.options.enableSortingRemoval)&&!n||r&&null!=(o=t.options.enableMultiRemove)&&!o)&&("desc"===i?"asc":"desc"):l},e.getCanSort=()=>{var r,n;return(null==(r=e.columnDef.enableSorting)||r)&&(null==(n=t.options.enableSorting)||n)&&!!e.accessorFn},e.getCanMultiSort=()=>{var r,n;return null!=(r=null!=(n=e.columnDef.enableMultiSort)?n:t.options.enableMultiSort)?r:!!e.accessorFn},e.getIsSorted=()=>{var r;const n=null==(r=t.getState().sorting)?void 0:r.find((t=>t.id===e.id));return!!n&&(n.desc?"desc":"asc")},e.getSortIndex=()=>{var r,n;return null!=(r=null==(n=t.getState().sorting)?void 0:n.findIndex((t=>t.id===e.id)))?r:-1},e.clearSorting=()=>{t.setSorting((t=>null!=t&&t.length?t.filter((t=>t.id!==e.id)):[]))},e.getToggleSortingHandler=()=>{const r=e.getCanSort();return n=>{r&&(null==n.persist||n.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(n))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var r,n;e.setSorting(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.sorting)?r:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},N,{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:l("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,r=!1;e._autoResetExpanded=()=>{var n,o;if(t){if(null!=(n=null!=(o=e.options.autoResetAll)?o:e.options.autoResetExpanded)?n:!e.options.manualExpanding){if(r)return;r=!0,e._queue((()=>{e.resetExpanded(),r=!1}))}}else e._queue((()=>{t=!0}))},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var r,n;e.setExpanded(t?{}:null!=(r=null==(n=e.initialState)?void 0:n.expanded)?r:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some((e=>e.getCanExpand())),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some((e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach((e=>{const r=e.split(".");t=Math.max(t,r.length)})),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=r=>{t.setExpanded((n=>{var o;const l=!0===n||!(null==n||!n[e.id]);let i={};if(!0===n?Object.keys(t.getRowModel().rowsById).forEach((e=>{i[e]=!0})):i=n,r=null!=(o=r)?o:!l,!l&&r)return{...i,[e.id]:!0};if(l&&!r){const{[e.id]:t,...r}=i;return r}return n}))},e.getIsExpanded=()=>{var r;const n=t.getState().expanded;return!!(null!=(r=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?r:!0===n||(null==n?void 0:n[e.id]))},e.getCanExpand=()=>{var r,n,o;return null!=(r=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?r:(null==(n=t.options.enableExpanding)||n)&&!(null==(o=e.subRows)||!o.length)},e.getIsAllParentsExpanded=()=>{let r=!0,n=e;for(;r&&n.parentId;)n=t.getRow(n.parentId,!0),r=n.getIsExpanded();return r},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:l("pagination",e)}),createTable:e=>{let t=!1,r=!1;e._autoResetPageIndex=()=>{var n,o;if(t){if(null!=(n=null!=(o=e.options.autoResetAll)?o:e.options.autoResetPageIndex)?n:!e.options.manualPagination){if(r)return;r=!0,e._queue((()=>{e.resetPageIndex(),r=!1}))}}else e._queue((()=>{t=!0}))},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange((e=>o(t,e))),e.resetPagination=t=>{var r;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(r=e.initialState.pagination)?r:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination((r=>{let n=o(t,r.pageIndex);const l=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return n=Math.max(0,Math.min(n,l)),{...r,pageIndex:n}}))},e.resetPageIndex=t=>{var r,n;e.setPageIndex(t?0:null!=(r=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageIndex)?r:0)},e.resetPageSize=t=>{var r,n;e.setPageSize(t?10:null!=(r=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageSize)?r:10)},e.setPageSize=t=>{e.setPagination((e=>{const r=Math.max(1,o(t,e.pageSize)),n=e.pageSize*e.pageIndex,l=Math.floor(n/r);return{...e,pageIndex:l,pageSize:r}}))},e.setPageCount=t=>e.setPagination((r=>{var n;let l=o(t,null!=(n=e.options.pageCount)?n:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...r,pageCount:l}})),e.getPageOptions=c((()=>[e.getPageCount()]),(e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map(((e,t)=>t))),t}),g(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,r=e.getPageCount();return-1===r||0!==r&&t<r-1},e.previousPage=()=>e.setPageIndex((e=>e-1)),e.nextPage=()=>e.setPageIndex((e=>e+1)),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:l("rowPinning",e)}),createRow:(e,t)=>{e.pin=(r,n,o)=>{const l=n?e.getLeafRows().map((e=>{let{id:t}=e;return t})):[],i=o?e.getParentRows().map((e=>{let{id:t}=e;return t})):[],a=new Set([...i,e.id,...l]);t.setRowPinning((e=>{var t,n,o,l,i,s;return"bottom"===r?{top:(null!=(o=null==e?void 0:e.top)?o:[]).filter((e=>!(null!=a&&a.has(e)))),bottom:[...(null!=(l=null==e?void 0:e.bottom)?l:[]).filter((e=>!(null!=a&&a.has(e)))),...Array.from(a)]}:"top"===r?{top:[...(null!=(i=null==e?void 0:e.top)?i:[]).filter((e=>!(null!=a&&a.has(e)))),...Array.from(a)],bottom:(null!=(s=null==e?void 0:e.bottom)?s:[]).filter((e=>!(null!=a&&a.has(e))))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter((e=>!(null!=a&&a.has(e)))),bottom:(null!=(n=null==e?void 0:e.bottom)?n:[]).filter((e=>!(null!=a&&a.has(e))))}}))},e.getCanPin=()=>{var r;const{enableRowPinning:n,enablePinning:o}=t.options;return"function"==typeof n?n(e):null==(r=null!=n?n:o)||r},e.getIsPinned=()=>{const r=[e.id],{top:n,bottom:o}=t.getState().rowPinning,l=r.some((e=>null==n?void 0:n.includes(e))),i=r.some((e=>null==o?void 0:o.includes(e)));return l?"top":!!i&&"bottom"},e.getPinnedIndex=()=>{var r,n;const o=e.getIsPinned();if(!o)return-1;const l=null==(r="top"===o?t.getTopRows():t.getBottomRows())?void 0:r.map((e=>{let{id:t}=e;return t}));return null!=(n=null==l?void 0:l.indexOf(e.id))?n:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var r,n;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(r=null==(n=e.initialState)?void 0:n.rowPinning)?r:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var r;const n=e.getState().rowPinning;var o,l;return t?Boolean(null==(r=n[t])?void 0:r.length):Boolean((null==(o=n.top)?void 0:o.length)||(null==(l=n.bottom)?void 0:l.length))},e._getPinnedRows=(t,r,n)=>{var o;return(null==(o=e.options.keepPinnedRows)||o?(null!=r?r:[]).map((t=>{const r=e.getRow(t,!0);return r.getIsAllParentsExpanded()?r:null})):(null!=r?r:[]).map((e=>t.find((t=>t.id===e))))).filter(Boolean).map((e=>({...e,position:n})))},e.getTopRows=c((()=>[e.getRowModel().rows,e.getState().rowPinning.top]),((t,r)=>e._getPinnedRows(t,r,"top")),g(e.options,"debugRows")),e.getBottomRows=c((()=>[e.getRowModel().rows,e.getState().rowPinning.bottom]),((t,r)=>e._getPinnedRows(t,r,"bottom")),g(e.options,"debugRows")),e.getCenterRows=c((()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom]),((e,t,r)=>{const n=new Set([...null!=t?t:[],...null!=r?r:[]]);return e.filter((e=>!n.has(e.id)))}),g(e.options,"debugRows"))}},_,P];function q(e){var t,r;const n=[...$,...null!=(t=e._features)?t:[]];let l={_features:n};const i=l._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l))),{});let a={...null!=(r=e.initialState)?r:{}};l._features.forEach((e=>{var t;a=null!=(t=null==e.getInitialState?void 0:e.getInitialState(a))?t:a}));const s=[];let u=!1;const d={_features:n,options:{...i,...e},initialState:a,_queue:e=>{s.push(e),u||(u=!0,Promise.resolve().then((()=>{for(;s.length;)s.shift()();u=!1})).catch((e=>setTimeout((()=>{throw e})))))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{const t=o(e,l.options);l.options=(e=>l.options.mergeOptions?l.options.mergeOptions(i,e):{...i,...e})(t)},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,r)=>{var n;return null!=(n=null==l.options.getRowId?void 0:l.options.getRowId(e,t,r))?n:`${r?[r.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let r=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!r&&(r=l.getCoreRowModel().rowsById[e],!r))throw new Error;return r},_getDefaultColumnDef:c((()=>[l.options.defaultColumn]),(e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,r;return null!=(t=null==(r=e.renderValue())||null==r.toString?void 0:r.toString())?t:null},...l._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef())),{}),...e}}),g(e,"debugColumns")),_getColumnDefs:()=>l.options.columns,getAllColumns:c((()=>[l._getColumnDefs()]),(e=>{const t=function(e,r,n){return void 0===n&&(n=0),e.map((e=>{const o=function(e,t,r,n){var o,l;const i={...e._getDefaultColumnDef(),...t},a=i.accessorKey;let s,u=null!=(o=null!=(l=i.id)?l:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?o:"string"==typeof i.header?i.header:void 0;if(i.accessorFn?s=i.accessorFn:a&&(s=a.includes(".")?e=>{let t=e;for(const e of a.split(".")){var r;t=null==(r=t)?void 0:r[e]}return t}:e=>e[i.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:s,parent:n,depth:r,columnDef:i,columns:[],getFlatColumns:c((()=>[!0]),(()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap((e=>e.getFlatColumns()))]}),g(e.options,"debugColumns")),getLeafColumns:c((()=>[e._getOrderColumnsFn()]),(e=>{var t;if(null!=(t=d.columns)&&t.length){let t=d.columns.flatMap((e=>e.getLeafColumns()));return e(t)}return[d]}),g(e.options,"debugColumns"))};for(const t of e._features)null==t.createColumn||t.createColumn(d,e);return d}(l,e,n,r),i=e;return o.columns=i.columns?t(i.columns,o,n+1):[],o}))};return t(e)}),g(e,"debugColumns")),getAllFlatColumns:c((()=>[l.getAllColumns()]),(e=>e.flatMap((e=>e.getFlatColumns()))),g(e,"debugColumns")),_getAllFlatColumnsById:c((()=>[l.getAllFlatColumns()]),(e=>e.reduce(((e,t)=>(e[t.id]=t,e)),{})),g(e,"debugColumns")),getAllLeafColumns:c((()=>[l.getAllColumns(),l._getOrderColumnsFn()]),((e,t)=>t(e.flatMap((e=>e.getLeafColumns())))),g(e,"debugColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){const t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}function K(e,t,r){return r.options.filterFromLeafRows?function(e,t,r){var n;const o=[],l={},i=null!=(n=r.options.maxLeafRowFilterDepth)?n:100,a=function(e,n){void 0===n&&(n=0);const s=[];for(let c=0;c<e.length;c++){var u;let g=e[c];const d=h(r,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(d.columnFilters=g.columnFilters,null!=(u=g.subRows)&&u.length&&n<i){if(d.subRows=a(g.subRows,n+1),g=d,t(g)&&!d.subRows.length){s.push(g),l[g.id]=g,o.push(g);continue}if(t(g)||d.subRows.length){s.push(g),l[g.id]=g,o.push(g);continue}}else g=d,t(g)&&(s.push(g),l[g.id]=g,o.push(g))}return s};return{rows:a(e),flatRows:o,rowsById:l}}(e,t,r):function(e,t,r){var n;const o=[],l={},i=null!=(n=r.options.maxLeafRowFilterDepth)?n:100,a=function(e,n){void 0===n&&(n=0);const s=[];for(let c=0;c<e.length;c++){let g=e[c];if(t(g)){var u;if(null!=(u=g.subRows)&&u.length&&n<i){const e=h(r,g.id,g.original,g.index,g.depth,void 0,g.parentId);e.subRows=a(g.subRows,n+1),g=e}s.push(g),o.push(g),l[g.id]=g}}return s};return{rows:a(e),flatRows:o,rowsById:l}}(e,t,r)}function X(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(r=e)||"function"==typeof r||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(r)?n.createElement(e,t):e:null;var r}var ee=a(2796);const te={accessor:(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e},re=e=>e.id,ne=t=>{const{data:r,columns:o,translate:l,styles:i}=t,[a,s]=e.React.useState([]),[u,d]=e.React.useState([]),p=function(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[r]=n.useState((()=>({current:q(t)}))),[o,l]=n.useState((()=>r.current.initialState));return r.current.setOptions((t=>({...t,...e,state:{...o,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}}))),r.current}({data:r,columns:o,getRowId:re,state:{sorting:a,columnFilters:u},onSortingChange:s,onColumnFiltersChange:d,enableSorting:!0,enableColumnFilters:!0,enableFilters:!0,enableMultiSort:!1,getCoreRowModel:e=>c((()=>[e.options.data]),(t=>{const r={rows:[],flatRows:[],rowsById:{}},n=function(t,o,l){void 0===o&&(o=0);const i=[];for(let s=0;s<t.length;s++){const u=h(e,e._getRowId(t[s],s,l),t[s],s,o,void 0,null==l?void 0:l.id);var a;r.flatRows.push(u),r.rowsById[u.id]=u,i.push(u),e.options.getSubRows&&(u.originalSubRows=e.options.getSubRows(t[s],s),null!=(a=u.originalSubRows)&&a.length&&(u.subRows=n(u.originalSubRows,o+1,u)))}return i};return r.rows=n(t),r}),g(e.options,"debugTable",0,(()=>e._autoResetPageIndex()))),getSortedRowModel:e=>c((()=>[e.getState().sorting,e.getPreSortedRowModel()]),((t,r)=>{if(!r.rows.length||null==t||!t.length)return r;const n=e.getState().sorting,o=[],l=n.filter((t=>{var r;return null==(r=e.getColumn(t.id))?void 0:r.getCanSort()})),i={};l.forEach((t=>{const r=e.getColumn(t.id);r&&(i[t.id]={sortUndefined:r.columnDef.sortUndefined,invertSorting:r.columnDef.invertSorting,sortingFn:r.getSortingFn()})}));const a=e=>{const t=e.map((e=>({...e})));return t.sort(((e,t)=>{for(let n=0;n<l.length;n+=1){var r;const o=l[n],a=i[o.id],s=a.sortUndefined,u=null!=(r=null==o?void 0:o.desc)&&r;let c=0;if(s){const r=void 0===e.getValue(o.id),n=void 0===t.getValue(o.id);if(r||n){if("first"===s)return r?-1:1;if("last"===s)return r?1:-1;c=r&&n?0:r?s:-s}}if(0===c&&(c=a.sortingFn(e,t,o.id)),0!==c)return u&&(c*=-1),a.invertSorting&&(c*=-1),c}return e.index-t.index})),t.forEach((e=>{var t;o.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=a(e.subRows))})),t};return{rows:a(r.rows),flatRows:o,rowsById:r.rowsById}}),g(e.options,"debugTable",0,(()=>e._autoResetPageIndex()))),getFilteredRowModel:e=>c((()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter]),((t,r,n)=>{if(!t.rows.length||(null==r||!r.length)&&!n){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}const o=[],l=[];(null!=r?r:[]).forEach((t=>{var r;const n=e.getColumn(t.id);if(!n)return;const l=n.getFilterFn();l&&o.push({id:t.id,filterFn:l,resolvedValue:null!=(r=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?r:t.value})}));const i=(null!=r?r:[]).map((e=>e.id)),a=e.getGlobalFilterFn(),s=e.getAllLeafColumns().filter((e=>e.getCanGlobalFilter()));let u,c;n&&a&&s.length&&(i.push("__global__"),s.forEach((e=>{var t;l.push({id:e.id,filterFn:a,resolvedValue:null!=(t=null==a.resolveFilterValue?void 0:a.resolveFilterValue(n))?t:n})})));for(let e=0;e<t.flatRows.length;e++){const r=t.flatRows[e];if(r.columnFilters={},o.length)for(let e=0;e<o.length;e++){u=o[e];const t=u.id;r.columnFilters[t]=u.filterFn(r,t,u.resolvedValue,(e=>{r.columnFiltersMeta[t]=e}))}if(l.length){for(let e=0;e<l.length;e++){c=l[e];const t=c.id;if(c.filterFn(r,t,c.resolvedValue,(e=>{r.columnFiltersMeta[t]=e}))){r.columnFilters.__global__=!0;break}}!0!==r.columnFilters.__global__&&(r.columnFilters.__global__=!1)}}return K(t.rows,(e=>{for(let t=0;t<i.length;t++)if(!1===e.columnFilters[i[t]])return!1;return!0}),e)}),g(e.options,"debugTable",0,(()=>e._autoResetPageIndex())))}),f=(e=>e.getRowModel().rows)(p);return(0,e.jsx)("div",{css:i.tableContainer,role:"region","aria-label":l("widgetTitle")},(0,e.jsx)("table",{css:i.table,role:"table"},(0,e.jsx)("thead",{css:i.thead},p.getHeaderGroups().map((t=>(0,e.jsx)("tr",{key:t.id,css:i.tr,role:"row"},t.headers.map((t=>{return(0,e.jsx)("th",{key:t.id,css:i.th,onClick:t.column.getToggleSortingHandler(),role:"columnheader","aria-sort":t.column.getIsSorted()?"asc"===t.column.getIsSorted()?"ascending":"descending":"none",tabIndex:0,onKeyDown:e=>{if("Enter"===e.key||" "===e.key){e.preventDefault();const r=t.column.getToggleSortingHandler();r&&r(e.nativeEvent)}}},X(t.column.columnDef.header,t.getContext()),(r=t.column.getIsSorted())?(0,e.jsx)("span",{css:i.sortIndicator,"aria-hidden":"true"},"asc"===r?"\u2191":"\u2193"):null);var r})))))),(0,e.jsx)("tbody",{css:i.tbody},f.map((t=>(0,e.jsx)("tr",{key:t.id,css:i.tr,role:"row"},t.getVisibleCells().map((t=>(0,e.jsx)("td",{key:t.id,css:i.td,role:"cell"},X(t.column.columnDef.cell,t.getContext()))))))))))},oe={widgetTitle:"Property Owner",description:"Retrieve property ownership information",loading:"Loading...",loadingData:"Retrieving property data...",loadingModules:"Loading map modules...",queryingProperty:"Searching property...",queryingOwner:"Retrieving owner information...",noResults:"No properties found",propertySelected:"Properties selected:",clickMapToSelectProperties:"Click on the map to select properties",cursorTooltipNoProperty:"No property at cursor",cursorTooltipFormat:"{fastighet}",multipleOwnersFound:"Multiple owners found",emptyStatePrompt:"Click on property",widgetNotConfigured:"Widget is not configured. Please configure data sources in settings.",readyToSelect:"Click on the map to select a property",columnFastighet:"Property",columnAddress:"Address",actions:"Actions",errorTitle:"Error",errorModuleTitle:"Module Error",errorLoadingModules:"Could not load required map modules",errorNoMapPoint:"Could not read map coordinates",errorQueryFailed:"Could not retrieve property data",errorOwnerQueryFailed:"Could not retrieve owner information",errorNetworkError:"Network error. Check your connection",errorNoDataAvailable:"No data available",errorHostNotAllowed:"Selected data source host is not allowed",errorUnknown:"An unknown error occurred",unknownOwner:"Unknown owner",removeProperty:"Remove property",clearAll:"Clear all",noPropertiesSelected:"No properties selected",bufferSearch:"Buffer search",bufferDistance:"Buffer distance",searchRadius:"Search within radius",invalidDistance:"Invalid distance",meters:"Meters",kilometers:"Kilometers",feet:"Feet",miles:"Miles",applyBuffer:"Apply buffer",bufferingGeometry:"Buffering geometry...",undo:"Undo",undoLastAction:"Undo last action",close:"Close",invalidHexColorFormat:"Invalid hex color format",ownerQueryFailedLog:"Owner query failed",unknownErrorLog:"Unknown error",invalidFnrError:"Invalid FNR: must be a safe integer",unknownErrorGeneric:"An unknown error occurred",errorBoundaryMessage:"Widget error. Please refresh the page.",errorBoundaryConsoleLog:"Property widget error:",exportData:"Export",exportJSON:"JSON",exportJSONDesc:"Raw query results with full metadata",exportCSV:"CSV",exportCSVDesc:"Spreadsheet format (attributes only)",exportGeoJSON:"GeoJSON",exportGeoJSONDesc:"Geographic data format",copyToClipboard:"Copy to clipboard",copiedSuccess:"Copied {count} properties to clipboard.",copyFailed:"Copy failed. Please try again or use Ctrl+C to copy manually."};var le=a(7507),ie=a(1888);const ae=(t,r={})=>(0,e.css)({display:"flex",flexFlow:`${t} nowrap`,...r}),se=(e,t={})=>ae(e,{flex:"0 0 auto",...t}),ue=()=>(t=>{const{spacing:r,color:n,typography:o}=t.sys,l=n?.surface?.background,i=(e=>`2px solid ${e}`)(l),a={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 1 0"};return{parent:ae("column",{flex:"1 1 auto",overflowY:"auto",blockSize:"100%",gap:r?.(2),backgroundColor:n?.surface?.paper}),alert:(0,e.css)({width:"100% !important",inlineSize:"100% !important",minInlineSize:"0 !important",maxInlineSize:"100% !important",flex:"0 0 auto",boxSizing:"border-box"}),header:ae("column",{alignItems:"stretch",gap:r?.(2),paddingInline:r?.(1)}),headerActions:se("row",{alignItems:"center",justifyContent:"end",gap:r?.(2)}),cols:se("row",{borderBlockStart:i,borderBlockEnd:i}),col:(0,e.css)({flex:"1 1 0",display:"flex",justifyContent:"center",borderInlineEnd:i,"&:last-child":{borderInlineEnd:"none"},padding:r?.(1)}),body:ae("column",{flex:"1 1 0",overflow:"auto",position:"relative"}),tableContainer:ae("column",{flex:"1 1 0",overflow:"hidden"}),table:(0,e.css)({width:"100%",borderCollapse:"collapse",tableLayout:"auto"}),thead:(0,e.css)({position:"sticky",top:0,zIndex:1}),th:(0,e.css)({padding:r?.(1),textAlign:"left",borderBlockEnd:i,borderInlineEnd:i,"&:last-child":{borderInlineEnd:"none"},fontWeight:500,cursor:"pointer",userSelect:"none"}),tbody:(0,e.css)({}),tr:(0,e.css)({"&:hover":{backgroundColor:n?.surface?.background}}),td:(0,e.css)({padding:r?.(1),borderInlineEnd:i,overflow:"hidden",whiteSpace:"nowrap","&:last-child":{borderInlineEnd:"none",whiteSpace:"normal"},fontFamily:o?.label2?.fontFamily,fontSize:o?.label2?.fontSize,fontWeight:o?.label2?.fontWeight}),sortIndicator:(0,e.css)({marginInlineStart:r?.(1),display:"inline-block"}),emptyState:(0,e.css)({...a,gap:r?.(4)}),svgState:(0,e.css)({opacity:.1}),messageState:(0,e.css)({fontFamily:o?.label2?.fontFamily,fontSize:o?.label2?.fontSize,fontWeight:o?.label2?.fontWeight,textAlign:"center",opacity:.7}),loadingInline:(0,e.css)({marginBlockStart:r?.(2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:r?.(1)}),loadingMessage:(0,e.css)({fontFamily:o?.body1?.fontFamily,fontSize:o?.body1?.fontSize}),loadingState:(0,e.css)({...a}),errorWrap:ae("column",{flex:"1 1 auto",gap:r?.(1),padding:r?.(2)}),errorHint:(0,e.css)({color:l}),buttons:se("row",{gap:r?.(1)}),feedback:(0,e.css)({inlineSize:"100%"}),feedbackInput:(0,e.css)({inlineSize:"100%",marginBlockStart:r?.(1)}),footer:se("row",{borderBlockStart:i,fontFamily:o?.label2?.fontFamily,fontSize:o?.label2?.fontSize,fontWeight:o?.label2?.fontWeight,position:"relative",overflow:"visible",inlineSize:"100%"}),footerAlertOverlay:(0,e.css)({position:"absolute",insetBlockStart:0,insetInlineStart:0,insetInlineEnd:0,insetBlockEnd:0,zIndex:10,pointerEvents:"all",display:"flex",flexDirection:"column",justifyContent:"flex-end",inlineSize:"100%",width:"100%",padding:r?.(1),gap:r?.(1)})}})((0,ie.useTheme)());var ce=a(8491);const ge=e=>"function"==typeof e,de=e=>"2d"===e?.type,pe=()=>{const[r,n]=e.React.useState(null),[o,l]=e.React.useState(!0),[i,a]=e.React.useState(null);return e.hooks.useEffectOnce((()=>{const e=globalThis.__ESRI_TEST_STUB__;"function"!=typeof e?(async()=>{try{const e=await(0,t.loadArcGISJSAPIModules)(ee.RF.slice()),[r,o,l,i,a,s,u]=e;n({SimpleFillSymbol:r,SimpleLineSymbol:o,SimpleMarkerSymbol:l,TextSymbol:i,Graphic:a,GraphicsLayer:s,Extent:u})}catch(e){a(e instanceof Error?e:new Error(String(e)))}finally{l(!1)}})():(async()=>{try{const t=await Promise.resolve(e(ee.RF));if(!(e=>{if(!e||"object"!=typeof e)return!1;const t=e;return ge(t.SimpleFillSymbol)&&ge(t.SimpleLineSymbol)&&ge(t.SimpleMarkerSymbol)&&ge(t.TextSymbol)&&ge(t.Graphic)&&ge(t.GraphicsLayer)&&ge(t.Extent)})(t))throw new Error("Invalid Esri module stub");n(t)}catch(e){a(e instanceof Error?e:new Error(String(e)))}finally{l(!1)}})()})),{modules:r,loading:o,error:i}},fe=(t,r,n)=>{const o=Number.isFinite(r)&&r>=0?r:0,l=e.React.useRef(null),i=e.React.useRef(!1),a=e.React.useRef(!0),s=e.hooks.useLatest(t),u=e.hooks.useLatest(n),c=e.hooks.useEventCallback((e=>{if(i.current===e)return;i.current=e;const t=u.current?.onPendingChange;if("function"==typeof t)try{t(e)}catch(e){ce.logger.debug("onPendingChange callback failed",{error:e})}})),g=e.hooks.useEventCallback((()=>{l.current&&(clearTimeout(l.current),l.current=null),i.current&&c(!1)})),d=e.hooks.useEventCallback(((...e)=>{l.current&&clearTimeout(l.current),c(!0),l.current=setTimeout((()=>{if(l.current=null,a.current)try{s.current(...e)}finally{c(!1)}}),o)})),p=e.React.useRef(null),f=e.hooks.useLatest(d),m=e.hooks.useLatest(g);if(!p.current){const e=(...e)=>{f.current(...e)};e.cancel=()=>m.current(),p.current=e}return e.hooks.useEffectOnce((()=>()=>{a.current=!1,m.current()})),p.current};var me=a(6250),he=a(844);const ye=()=>{try{if("undefined"==typeof window)return!1;const e="undefined"!=typeof navigator?navigator:void 0,t=e?.globalPrivacyControl;if(t)return!1;const r=window,n=e?.doNotTrack??r.doNotTrack??e?.msDoNotTrack;if("1"===n||"yes"===n)return!1;const o="undefined"!=typeof document&&document.cookie||"";if(o.split(";").map((e=>e.trim())).some((e=>"esri_disallow_tracking=1"===e)))return!1;const l=window.localStorage?window.localStorage.getItem("esri_allow_tracking"):null;return"false"!==l&&"true"===l}catch(e){return!1}},Se=e=>{ye()},we=e=>{if(ye())try{Se((e.operation,e.success,Math.round(e.duration))),e.error&&Se((e.operation,e.error))}catch(e){}},Me=(e,t,r)=>{if(ye())try{(()=>{if("string"==typeof t)return t;if(t&&"object"==typeof t){const e=t;return e.message??e.details?.message??"Unknown error"}})();Se()}catch(e){}},Ie=(e,t)=>{ye()&&Se()};var be=a(1688),Re=a.n(be),ve=a(3230),Ce=a.n(ve),Ae=a(2732),De=a.n(Ae),Ee=a(2945),Te=a.n(Ee),xe=a(3396),je=a.n(xe);const Ne=e=>{if(null==e)return"";if("string"==typeof e)return(0,ce.stripHtml)(e);if("number"==typeof e||"bigint"==typeof e)return(0,ce.stripHtml)(String(e));if("boolean"==typeof e)return e?"true":"false";if("object"==typeof e)try{return(0,ce.stripHtml)(JSON.stringify(e))}catch(t){e.constructor;return Me(0,t),""}return"symbol"==typeof e?(0,ce.stripHtml)(e.description??""):"function"==typeof e?(0,ce.stripHtml)(e.name??""):""},Le=e=>{const t=Ne(e);return""===t?'""':t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t},Fe=e=>"number"==typeof e&&Number.isFinite(e),Oe=e=>Array.isArray(e)&&e.length>=2&&e.every(Fe),Pe=e=>Array.isArray(e)&&e.length>0&&e.every(Oe),ke=e=>Array.isArray(e)&&e.length>0&&e.every(Pe),ze=e=>e.map((e=>e.map((e=>e.slice())))),Ge=e=>({type:"FeatureCollection",features:(e||[]).filter((e=>Boolean(e.geometryType)&&e.geometry)).map((e=>{const t=e.geometry,r=(e.geometryType||"").toLowerCase();let n=null;if("polygon"===r){const e=t.rings;ke(e)&&(n={type:"Polygon",coordinates:ze(e)})}else if("extent"===r){const e=(e=>{if(!(Fe(e.xmin)&&Fe(e.ymin)&&Fe(e.xmax)&&Fe(e.ymax)))return null;const t=e.xmin,r=e.ymin,n=e.xmax,o=e.ymax;return t>=n||r>=o?null:[[[t,r],[n,r],[n,o],[t,o],[t,r]]]})(t);e&&(n={type:"Polygon",coordinates:e})}else if("polyline"===r){const e=t.paths;ke(e)&&(n={type:"MultiLineString",coordinates:ze(e)})}else if("point"===r){const e=(e=>{if(!Fe(e.x)||!Fe(e.y))return null;const t=[e.x,e.y];return Fe(e.z)&&t.push(e.z),t})(t);e&&(n={type:"Point",coordinates:e})}else if("multipoint"===r){const e=t.points;Pe(e)&&(n={type:"MultiPoint",coordinates:(o=e,o.map((e=>e.slice())))})}var o;return n?{type:"Feature",id:e.id,properties:{FNR:Ne(e.FNR),UUID_FASTIGHET:Ne(e.UUID_FASTIGHET),FASTIGHET:Ne(e.FASTIGHET),BOSTADR:Ne(e.BOSTADR)},geometry:n}:null})).filter((e=>null!==e))}),_e=(e,t,r,n,o)=>{const{format:l,filename:i,rowCount:a,definition:s}=r;try{let e="",r="application/json;charset=utf-8",c=s?.extension||"json";if("json"===l){const l=((e,t,r)=>e&&0!==e.length?e.map((e=>({FASTIGHET:Ne(e.FASTIGHET||e.FNR||""),ADDRESS:(()=>{if(e.rawOwner){const n=(0,ce.formatOwnerInfo)(e.rawOwner,t,r);return Ne(n)}const n=e.BOSTADR||e.ADDRESS||r;return Ne(n)})()}))):[])(t,n,o);e=JSON.stringify(l,null,2),r=s?.mimeType||"application/json;charset=utf-8"}else if("csv"===l)e=(u=t)&&0!==u.length?[ee.Ac.join(","),...u.map((e=>{const t={FNR:Le(e.FNR),UUID_FASTIGHET:Le(e.UUID_FASTIGHET),FASTIGHET:Le(e.FASTIGHET),BOSTADR:Le(e.BOSTADR),ADDRESS:Le(e.ADDRESS)};return ee.Ac.map((e=>t[e])).join(",")}))].join("\n"):"",r=s?.mimeType||"text/csv;charset=utf-8",c=s?.extension||"csv";else{if("geojson"!==l)throw new Error(`Unsupported format: ${l}`);e=JSON.stringify(Ge(t),null,2),r=s?.mimeType||"application/geo+json;charset=utf-8",c=s?.extension||"geojson"}const g=new Blob([e],{type:r}),d=URL.createObjectURL(g),p=((e,t,r)=>`${e.replace(/[^a-zA-Z0-9-_]/g,"-")||"property-export"}-${r}rows-${(new Date).toISOString().split("T")[0]}.${t}`)(i,c,a),f=document.createElement("a");f.href=d,f.download=p,f.style.display="none",document.body.appendChild(f),f.click(),setTimeout((()=>{document.body.removeChild(f),URL.revokeObjectURL(d)}),100),Se()}catch(e){if(console.error("Export failed:",e),Me(0,e),e instanceof Error)throw e;throw new Error(String(e))}var u};class Ve extends e.React.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){Me(0,e,t.componentStack)}render(){return this.state.hasError?(0,e.jsx)("div",{css:this.props.styles.errorWrap},(0,e.jsx)(r.Alert,{type:"error",fullWidth:!0,css:this.props.styles.alert,text:this.props.translate("errorBoundaryMessage")}),this.state.error&&(0,e.jsx)("div",{css:this.props.styles.errorHint},this.state.error.message)):this.props.children}}const He=n=>{const{config:o,id:l,useMapWidgetIds:i}=n,s=ue(),u=e.hooks.useTranslation(r.defaultMessages,oe),c=n.widgetId,g=("string"==typeof c&&c.length>0?c:l)??l,d=e.React.useRef((0,he.createPropertySelectors)(g)),p=e.hooks.usePrevious(g);(!d.current||p&&p!==g)&&(d.current=(0,he.createPropertySelectors)(g));const f=d.current,m=e=>{if(!e)return null;return"function"==typeof e.asMutable?e:null},h=e.ReactRedux.useSelector((e=>{const t=e.widgetsRuntimeInfo?.[g];return void 0!==t?.state?t.state:e.widgetsRuntimeInfo?.[l]?.state})),y=e.hooks.usePrevious(h),S=e.ReactRedux.useSelector(f.selectError),w=e.ReactRedux.useSelector(f.selectSelectedProperties),M=e.ReactRedux.useSelector(f.selectRawResults),I=w.length,b=I>0,[R,v]=e.React.useState(null);e.hooks.useUpdateEffect((()=>{if(!R||"undefined"==typeof window)return;const e=window.setTimeout((()=>{v(null)}),4e3);return()=>{window.clearTimeout(e)}}),[R]),e.hooks.useUpdateEffect((()=>{b||R&&v(null)}),[b]);const C=e.React.useRef((0,ce.createPropertyDispatcher)(n.dispatch,g));e.hooks.useUpdateEffect((()=>{C.current=(0,ce.createPropertyDispatcher)(n.dispatch,g)}),[n.dispatch,g]);const A=e.hooks.useLatest(w),D=e.hooks.useLatest(M);e.hooks.useEffectOnce((()=>{}));const E=m(ce.dataSourceHelpers.findById(n.useDataSources,o.propertyDataSourceId)),T=m(ce.dataSourceHelpers.findById(n.useDataSources,o.ownerDataSourceId)),x=ce.dataSourceHelpers.extractId(E),j=ce.dataSourceHelpers.extractId(T),{modules:N,loading:L,error:F}=pe(),{ensureGraphicsLayer:O,clearGraphics:P,removeGraphicsForFnr:k,addGraphicsToMap:z,addManyGraphicsToMap:G,destroyGraphicsLayer:_}=((t,r)=>{const n=e.hooks.useLatest(t),o=e.hooks.useLatest(r),l=e.React.useRef(null),i=e.React.useRef(new Map),a=e.hooks.useEventCallback((e=>{const t=n.current,r=o.current;if(!t||!e||!r)return!1;const i=`property-${r}-highlight-layer`,a=l.current;if(a&&a.id!==i&&(e.map?.remove(a),a.destroy(),l.current=null),!l.current){const n=e.map.findLayerById(i);if(n)return l.current=n,!0;const o=r.length>16?`${r.substring(0,16)}...`:r,a=new t.GraphicsLayer({id:i,listMode:"hide",title:`Property Highlights (${o})`});return e.map.add(a),l.current=a,!0}return!e.map.findLayerById(l.current.id)&&(e.map.add(l.current),!0)})),s=e.hooks.useEventCallback((()=>{l.current&&l.current.removeAll(),i.current.clear()})),u=e.hooks.useEventCallback(((e,t)=>{const r=l.current;if(!r||null==e)return;const n=t(e),o=i.current.get(n);o&&o.length>0&&(r.removeMany(o),i.current.delete(n))})),c=(e,t,r)=>{const o=n.current;if(!o||!e)return null;const l=e.geometry;if(!l)return null;const i=l.type;if("polygon"===i||"extent"===i){const e=(0,ce.buildHighlightSymbolJSON)(t,r,"polygon");return new o.SimpleFillSymbol(e)}if("polyline"===i){const e=(0,ce.buildHighlightSymbolJSON)(t,r,"polyline");return new o.SimpleLineSymbol(e)}if("point"===i||"multipoint"===i){const e=(0,ce.buildHighlightSymbolJSON)(t,r,"point");return new o.SimpleMarkerSymbol(e)}return null},g=e.hooks.useEventCallback(((e,t,r,o,s,g)=>{const d=n.current;if(!d||!e||!t)return;a(t);const p=l.current;if(!p)return;const f=r(e.attributes??null),m=c(e,s,g);if(!m)return;const h=new d.Graphic({geometry:e.geometry,symbol:m,attributes:e.attributes?{...e.attributes,FNR:f}:{FNR:f}});if(u(f,o),p.add(h),!f)return;const y=o(f),S=i.current.get(y);S?S.push(h):i.current.set(y,[h])})),d=e.hooks.useEventCallback(((e,t,r,o,s,g)=>{const d=n.current;if(!d||!e.length||!t)return;a(t);const p=l.current;if(!p)return;const f=[];e.forEach((({graphic:e,fnr:t})=>{const n=e.attributes??null,l=t??r(n);if(null==l)return;const a=c(e,s,g);if(!a)return;const p=new d.Graphic({geometry:e.geometry,symbol:a,attributes:e.attributes?{...e.attributes,FNR:l}:{FNR:l}});u(l,o),f.push(p);const m=o(l),h=i.current.get(m);h?h.push(p):i.current.set(m,[p])})),f.length>0&&requestAnimationFrame((()=>{p&&!p.destroyed&&p.addMany(f)}))})),p=e.hooks.useEventCallback((e=>{if(!l.current)return;const t=l.current;l.current=null,i.current.clear(),e&&e.map?.remove(t),t.destroy()}));return e.hooks.useUnmount((()=>{l.current&&(l.current.destroy?.(),l.current=null),i.current.clear()})),{graphicsLayerRef:l,graphicsMapRef:i,ensureGraphicsLayer:a,clearGraphics:s,removeGraphicsForFnr:u,addGraphicsToMap:g,addManyGraphicsToMap:d,destroyGraphicsLayer:p}})(N,g),{disablePopup:V,restorePopup:H}=(t=>{const[r]=e.React.useState((()=>Symbol(`property-popup-${t}`))),n=e.React.useRef(r),o=e.React.useRef(void 0),l=e.hooks.usePrevious(t);e.hooks.useUpdateEffect((()=>{if(l&&l!==t){const e=o.current;e&&ce.popupSuppressionManager.release(n.current,e),n.current=Symbol(`property-popup-${t}`)}}),[t,l]);const i=e.hooks.useEventCallback((e=>{const t=e??o.current;t&&(ce.popupSuppressionManager.release(n.current,t),t===o.current&&(o.current=void 0))})),a=e.hooks.useEventCallback((e=>{e&&(o.current=e,ce.popupSuppressionManager.acquire(n.current,e))})),s=e.hooks.useEventCallback((e=>{i(e)}));return e.hooks.useUnmount((()=>{const e=o.current;e&&(ce.popupSuppressionManager.release(n.current,e),o.current=void 0)})),{disablePopup:a,restorePopup:i,cleanup:s}})(g),{getController:U,releaseController:B,abortAll:Q}=(()=>{const t=e.React.useRef([]),r=e.React.useRef(new Set),n=e.hooks.useEventCallback((()=>{let e=t.current.pop();for(;e&&e.signal.aborted;)e=t.current.pop();const n=e||new AbortController;return r.current.add(n),n})),o=e.hooks.useEventCallback((e=>{r.current.delete(e),e.signal.aborted||t.current.length<ee.bI&&t.current.push(e)})),l=e.hooks.useEventCallback((()=>{r.current.forEach((e=>{e.signal.aborted||e.abort()})),r.current.clear(),t.current=[]}));return e.hooks.useUnmount((()=>{l()})),{getController:n,releaseController:o,abortAll:l}})(),Y=e.React.useRef(null);Y.current||(Y.current=e.DataSourceManager.getInstance());const W=e.React.useRef(0),J=e.hooks.useEventCallback((e=>{Q(),(0,me.Mv)(),P();const t=A.current??[];e&&t.length>0&&Se(t.length),C.current.clearAll(),C.current.setRawResults(null),C.current.setQueryInFlight(!1)})),Z=e.hooks.useEventCallback((()=>{J(!0)})),$=e.hooks.useEventCallback((()=>{J(!1)})),q=e.hooks.useEventCallback(((e,t,r)=>{C.current.setError({type:e,message:t,details:r})})),K=o.maxResults,X=o.enableToggleRemoval,re=o.enablePIIMasking,ie=i?.[0],ae=o.highlightColor,se=o.highlightOpacity,ge=o.outlineWidth,{hoverTooltipData:ye,isHoverQueryActive:be,queryPropertyAtPoint:ve,lastHoverQueryPointRef:Ae,cleanup:Ee}=(t=>{const{config:r,dsManager:n,enablePIIMasking:o,translate:l}=t,[i,s]=e.React.useState(null),[u,c]=e.React.useState(!1),g=e.React.useRef(null),d=e.React.useRef(null),p=e.hooks.useEventCallback((async e=>{g.current&&(g.current.abort(),g.current=null);const t=new AbortController;g.current=t,c(!0);try{const{executeHoverQuery:i}=a(8491),u=await i({mapPoint:e,config:{propertyDataSourceId:r.propertyDataSourceId,ownerDataSourceId:r.ownerDataSourceId,allowedHosts:r.allowedHosts},dsManager:n,signal:t.signal,enablePIIMasking:o,translate:l});if(t.signal.aborted)return;s(u),c(!1)}catch(e){if((0,ce.isAbortError)(e))return;s(null),c(!1)}finally{g.current===t&&(g.current=null)}})),f=e.hooks.useEventCallback((()=>{g.current&&(g.current.abort(),g.current=null),s(null),c(!1),d.current=null}));return e.hooks.useUnmount((()=>{f()})),{hoverTooltipData:i,isHoverQueryActive:u,queryPropertyAtPoint:p,lastHoverQueryPointRef:d,cleanup:f}})({config:{propertyDataSourceId:o.propertyDataSourceId,ownerDataSourceId:o.ownerDataSourceId,allowedHosts:o.allowedHosts},dsManager:Y.current,enablePIIMasking:re,translate:u}),xe=((t,r)=>{const n=Number.isFinite(r)&&r>=0?r:0,o=e.React.useRef(0),l=e.React.useRef(null),i=e.React.useRef(null),a=e.React.useRef(!0),s=e.hooks.useLatest(t),u=e.hooks.useEventCallback((e=>{if(a.current){o.current=Date.now(),i.current=null;try{s.current(...e)}catch(e){(0,ce.isAbortError)(e)||console.error("Throttled function error:",e)}}})),c=e.hooks.useEventCallback(((...e)=>{const t=Date.now()-o.current;if(t>=n)u(e);else if(i.current=e,!l.current){const e=n-t;l.current=setTimeout((()=>{l.current=null,i.current&&a.current&&u(i.current)}),e)}}));return e.hooks.useEffectOnce((()=>()=>{a.current=!1,l.current&&(clearTimeout(l.current),l.current=null)})),c})(((e,t)=>{(0,ce.shouldSkipHoverQuery)(t,Ae.current,ee.zW)||(Ae.current=t,ve(e))}),100);e.hooks.useUpdateEffect((()=>{const e=A.current??[];if(0===e.length)return;Ie();const t=e.map((e=>{if(!e.rawOwner||"object"!=typeof e.rawOwner)return e;const t=(0,ce.formatOwnerInfo)(e.rawOwner,re,u("unknownOwner"));return{...e,BOSTADR:t,ADDRESS:t}}));C.current.setSelectedProperties(t)}),[re,u]),e.hooks.useUpdateEffect((()=>{const e=A.current??[];if(e.length<=K)return;Se(e.length);const t=e.slice(0,K),r=e.slice(K);r.forEach((e=>{const t=e.FNR;null!=t&&k(t,ce.normalizeFnrKey)})),C.current.setSelectedProperties(t);const n=D.current;if(n&&Object.keys(n).length>0){const e={};Object.keys(n).forEach((t=>{if(!r.some((e=>e.id===t))){const r=n[t];if(r){const n=JSON.parse(JSON.stringify(r));e[t]=n}}})),C.current.setRawResults(e)}}),[K,ce.normalizeFnrKey,k,Se]),e.hooks.useUpdateEffect((()=>{Ie()}),[X]),e.hooks.useUpdateEffect((()=>{Ie(0,o.enableBatchOwnerQuery)}),[o.enableBatchOwnerQuery,o.relationshipId]);const Ne=e.React.useRef((e=>{const{translate:t}=e;return[te.accessor("FASTIGHET",{id:ee.rb.FASTIGHET,header:()=>t("columnFastighet"),cell:e=>e.getValue(),enableSorting:!0,enableColumnFilter:!0,filterFn:"includesString"}),te.accessor("ADDRESS",{id:ee.rb.ADDRESS,header:()=>t("columnAddress"),cell:e=>e.getValue(),enableSorting:!0,enableColumnFilter:!0,filterFn:"includesString"})]})({translate:u})),Le=Ne.current,Fe=e.hooks.useEventCallback((()=>{if(!o?.autoCloseOtherWidgets)return;if(!g)return;const t="function"==typeof e.getAppStore?(0,e.getAppStore)():null;if(!t)return;const r=t.getState?.();if(!r)return;const l=r.widgetsRuntimeInfo,i=(()=>{if(!r||"object"!=typeof r)return null;const e=r,t=e=>{if(!e||"object"!=typeof e)return null;const t=e;if("function"==typeof t.get){const e=t.get("widgets");if(void 0!==e)return e}return"widgets"in t?t.widgets??null:null},n=t(e.appConfig);if(null!==n)return n;if("function"==typeof e.get){const r=t(e.get("appConfig"));if(null!==r)return r}return null})(),a=(0,ce.computeWidgetsToClose)(l,g,i);if(0===a.length)return;const s=a.filter((e=>{const t=l?.[e];return Boolean(t?.isClassLoaded)}));0!==s.length&&(Se(s.length),n.dispatch(e.appActions.closeWidgets(s)))})),Oe=e.hooks.useEventCallback((e=>{if(console.log("[Export] Starting export:",{format:e,hasSelectedProperties:b,rawPropertyResults:M}),!b)return void console.log("[Export] No selected properties, aborting");if(!M)return void console.log("[Export] No raw results available, aborting");let t;if(M instanceof Map)t=M;else{if(!(r=M)||"object"!=typeof r||r instanceof Map)return void console.log("[Export] Invalid rawPropertyResults type:",typeof M);t=new Map,Object.keys(M).forEach((e=>{const r=M[e];null!=r&&t.set(e,r)}))}var r;if(console.log("[Export] Results map size:",t.size),0===t.size)return void console.log("[Export] Results map is empty, aborting");const n=[];if(w.forEach((e=>{const r=t.get(e.id);console.log("[Export] Looking up row:",e.id,"Found:",!!r),r&&n.push(r)})),console.log("[Export] Selected raw data count:",n.length),0===n.length)return void console.log("[Export] No raw data found for selected rows, aborting");const l=Array.from(w);try{_e(0,l,{format:e,filename:"property-export",rowCount:l.length,definition:ee.UP.find((t=>t.id===e))},o.enablePIIMasking,u("unknownOwner"))}catch(e){console.error("Export failed",e)}})),Pe=e.hooks.useEventCallback((e=>{["json","csv","geojson"].includes(e)&&Oe(e)})),ke=e.hooks.useEventCallback((()=>{v(null);const e=A.current??[];if(e&&0!==e.length)try{const t=(0,ce.formatPropertiesForClipboard)(e,re,u("unknownOwner")),r=(0,ce.copyToClipboard)(t),n=e.length;if(r){const e=u("copiedSuccess"),t="string"==typeof e?e.replace("{count}",String(n)):"";v({type:"success",text:t||("string"==typeof e?e:"")}),Se()}else v({type:"error",text:u("copyFailed")}),Se()}catch(e){console.error("Copy failed:",e),v({type:"error",text:u("copyFailed")}),Me(0,e)}})),ze=e.hooks.useEventCallback((()=>{q(le.B.VALIDATION_ERROR,u("errorNoDataAvailable"))})),Ge=e.hooks.useEventCallback((()=>{q(le.B.VALIDATION_ERROR,u("errorNoDataAvailable"))})),Ve=e.hooks.useEventCallback((async e=>{const t=performance.now();console.log("[PERF] Map click started at",t);const r=(e=>{const t=performance.now();return{success:()=>{const r=performance.now()-t;we({operation:e,duration:r,success:!0})},failure:r=>{const n=performance.now()-t;we({operation:e,duration:n,success:!1,error:r})}}})("map_click_query"),n=(0,ce.validateMapClickPipeline)({event:e,modules:N,config:o,dsManager:Y.current,translate:u});if((0,ce.isValidationFailure)(n)){const{error:e,failureReason:t}=n;return q(e.type,e.message),r.failure(t),void Me(0,t)}const{mapPoint:l,manager:i}=n.data,a=W.current+1;W.current=a;const s=()=>a!==W.current;C.current.clearError(),C.current.setQueryInFlight(!0);const c=A.current??[],g=Array.isArray(c)?c:Array.from(c),d=U();try{const e=performance.now();console.log("[PERF] Pipeline started at",e-t,"ms");const n=await(0,me.JQ)({mapPoint:l,propertyDataSourceId:o.propertyDataSourceId,ownerDataSourceId:o.ownerDataSourceId,dsManager:i,maxResults:K,toggleEnabled:X,enableBatchOwnerQuery:o.enableBatchOwnerQuery,relationshipId:o.relationshipId,enablePIIMasking:re,signal:d.signal,selectedProperties:g,translate:u}),a=performance.now();console.log("[PERF] Pipeline completed at",a-t,"ms","(took",a-e,"ms)");const c=ce.abortHelpers.checkAbortedOrStale(d.signal,s);if("stale"===c)return;if("aborted"===c)return void r.failure("aborted");if("empty"===n.status)return s()||C.current.setQueryInFlight(!1),void r.success();const p=g.filter((e=>n.toRemove.has((0,ce.normalizeFnrKey)(e.FNR))));if(p.length>0&&Se(p.length),!s()){const e=D.current??{},r=(0,ce.updateRawPropertyResults)(e,n.rowsToProcess,n.propertyResults,n.toRemove,g,ce.normalizeFnrKey),o=C.current,l=r,i=n.updatedRows;(0,ce.cleanupRemovedGraphics)({toRemove:n.toRemove,removeGraphicsForFnr:k,normalizeFnrKey:ce.normalizeFnrKey});const a=(0,ce.buildHighlightColor)(ae,se),s=(0,ce.getValidatedOutlineWidth)(ge),u={addGraphicsToMap:z,addManyGraphicsToMap:G,extractFnr:ce.extractFnr,normalizeFnrKey:ce.normalizeFnrKey};(e=>{const{graphicsToAdd:t,selectedRows:r,getCurrentView:n,helpers:o,highlightColor:l,outlineWidth:i}=e,a=n();a&&(0,ce.syncGraphicsWithState)({graphicsToAdd:t,selectedRows:r,view:a,helpers:o,highlightColor:l,outlineWidth:i})})({graphicsToAdd:n.graphicsToAdd,selectedRows:n.updatedRows,getCurrentView:Ue,helpers:u,highlightColor:a,outlineWidth:s});const c=performance.now();console.log("[PERF] Graphics sync started at",c-t,"ms");const d=performance.now();console.log("[PERF] Redux update started at",d-t,"ms"),o.setSelectedProperties(i),o.setRawResults(l),o.setQueryInFlight(!1);const p=performance.now();console.log("[PERF] Redux update completed at",p-t,"ms","(took",p-d,"ms)"),console.log("[PERF] TOTAL TIME:",p-t,"ms")}r.success(),Se(n.rowsToProcess.length),Ie(),Ie()}catch(e){if(s())return;if((0,ce.isAbortError)(e))return r.failure("aborted"),void C.current.setQueryInFlight(!1);ce.logger.error("Property query error:",e,{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,propertyDsId:o.propertyDataSourceId,ownerDsId:o.ownerDataSourceId}),q(le.B.QUERY_ERROR,u("errorQueryFailed")),r.failure("query_error"),Me(0,e)}finally{B(d)}})),{onActiveViewChange:He,getCurrentView:Ue,reactivateMapView:Be,cleanup:Qe}=(t=>{const{modules:r,ensureGraphicsLayer:n,destroyGraphicsLayer:o,disablePopup:l,restorePopup:i,onMapClick:a}=t,s=e.React.useRef(null),u=e.React.useRef(null),c=()=>{const e=s.current?.view;return de(e)?e:null},g=e.hooks.useEventCallback((e=>{l(e),n(e),u.current&&(u.current.remove(),u.current=null);try{u.current=e.on("click",a)}catch(e){console.error("Failed to register map click handler",e),u.current=null}})),d=e.hooks.useEventCallback((()=>{const e=c();e&&(i(e),o(e),u.current&&(u.current.remove(),u.current=null))})),p=e.hooks.useEventCallback((e=>{const t=e?.view;if(!de(t))return;const n=t,o=c();o&&o!==n&&d(),s.current=e??null,r&&g(n)})),f=e.hooks.useEventCallback((()=>{const e=c();if(e&&r){l(e),u.current&&(u.current.remove(),u.current=null);try{u.current=e.on("click",a)}catch(e){console.error("Failed to reactivate map click handler",e),u.current=null}}})),m=e.hooks.useEventCallback((()=>{const e=c();i(e??void 0),u.current&&(u.current.remove(),u.current=null),e&&o(e)}));return e.hooks.useUnmount((()=>{m()})),e.hooks.useUpdateEffect((()=>{const e=c();r&&e&&!u.current&&g(e)}),[r,g]),{onActiveViewChange:p,getCurrentView:c,reactivateMapView:f,cleanup:m}})({modules:N,ensureGraphicsLayer:O,destroyGraphicsLayer:_,disablePopup:V,restorePopup:H,onMapClick:Ve}),Ye=e.React.useRef(null),We=e.React.useRef(null),Je=e.React.useRef(null),Ze=e.React.useRef(null),$e=e.React.useRef(null),qe=e.React.useRef(null),Ke=e.React.useRef(null),Xe=u("cursorTooltipNoProperty"),et=u("cursorTooltipFormat"),tt=e.hooks.useLatest(Xe),rt=e.hooks.useLatest(et),nt=e.hooks.useLatest(ae),ot=e.hooks.useLatest(se),lt=e.hooks.useLatest(ge),it=e.hooks.useEventCallback((()=>{if(null!==qe.current&&(cancelAnimationFrame(qe.current),qe.current=null),Ke.current=null,!Ye.current)return;const e=$e.current;e&&(Ye.current.pointGraphic&&e.remove(Ye.current.pointGraphic),Ye.current.tooltipGraphic&&e.remove(Ye.current.tooltipGraphic)),Ye.current=null})),at=e.hooks.useEventCallback((e=>{if(!e)return void it();if(!N?.Graphic||!N?.TextSymbol)return void it();const t=$e.current;if(!t)return void it();if(!N?.Graphic||!N?.TextSymbol)return void it();const r=(0,ce.buildHighlightColor)(nt.current,ot.current),n=(0,ce.getValidatedOutlineWidth)(lt.current);let o=null;ye?o=rt.current.replace("{fastighet}",ye.fastighet):be||(o=tt.current),Ye.current=(0,ce.syncCursorGraphics)({modules:N,layer:t,mapPoint:e,tooltipText:o,highlightColor:r,outlineWidth:n,existing:Ye.current,style:ee.Dj})}));e.hooks.useUpdateEffect((()=>{const t=Ue();if(!t)return;const r=h===e.WidgetState.Opened||h===e.WidgetState.Active;ce.cursorLifecycleHelpers.cleanupHandles({pointerMoveHandle:We,pointerLeaveHandle:Je,rafId:qe,clearGraphics:it,cleanupQuery:Ee});const n=r&&!!N?.TextSymbol&&!!N?.Graphic;return n?ce.cursorLifecycleHelpers.setupCursorTracking({view:t,widgetId:g,ensureGraphicsLayer:O,cachedLayerRef:$e,pointerMoveHandleRef:We,pointerLeaveHandleRef:Je,rafIdRef:qe,lastCursorPointRef:Ze,pendingMapPointRef:Ke,lastHoverQueryPointRef:Ae,updateCursorPoint:at,throttledHoverQuery:xe,cleanupHoverQuery:Ee}):ce.cursorLifecycleHelpers.resetCursorState({lastCursorPointRef:Ze,pendingMapPointRef:Ke,cachedLayerRef:$e,clearGraphics:it,cleanupQuery:Ee}),()=>{ce.cursorLifecycleHelpers.teardownCursorTracking({rafId:qe,pointerMoveHandle:We,pointerLeaveHandle:Je,lastCursorPointRef:Ze,pendingMapPointRef:Ke,cachedLayerRef:$e,canTrackCursor:n,clearGraphics:it,cleanupQuery:Ee})}}),[h,N,g]),e.hooks.useUnmount((()=>{null!==qe.current&&(cancelAnimationFrame(qe.current),qe.current=null),We.current&&(We.current.remove(),We.current=null),Je.current&&(Je.current.remove(),Je.current=null),Ee(),Ke.current=null,$e.current=null,Ze.current=null,it()})),e.hooks.useUpdateEffect((()=>{Ze.current&&at(Ze.current)}),[ye,be]);const st=fe((()=>{const e=A.current??[],t=Array.isArray(e)?e:Array.from(e);if(0===t.length)return;const r=Ue();if(!r||!N)return;const n=r.map.findLayerById(`property-${g}-highlight-layer`);if(!n)return;const o=(0,ce.buildHighlightColor)(ae,se),l=(0,ce.getValidatedOutlineWidth)(ge),i=new Set(t.map((e=>(0,ce.normalizeFnrKey)(e.FNR))));n.graphics.forEach((e=>{if(!e?.geometry)return;const t=(0,ce.extractFnr)(e.attributes);if(!t)return;const r=(0,ce.normalizeFnrKey)(t);i.has(r)&&(0,ce.updateGraphicSymbol)(e,o,l,N)}))}),100);e.hooks.useUpdateEffect((()=>{st()}),[ae,se,ge]),e.hooks.useUpdateEffect((()=>{if(!(h!==e.WidgetState.Opened&&h!==e.WidgetState.Active||y!==e.WidgetState.Closed&&y!==e.WidgetState.Hidden&&void 0!==y)&&N){Ue()&&(Be(),Se())}}),[h,y,N,Be,Ue]),e.hooks.useUpdateEffect((()=>{h===e.WidgetState.Closed&&y!==e.WidgetState.Closed&&($(),Qe())}),[h,y,$,Qe]),e.hooks.useUpdateEffect((()=>{!(h!==e.WidgetState.Opened&&h!==e.WidgetState.Active||y!==e.WidgetState.Closed&&y!==e.WidgetState.Hidden&&void 0!==y)&&Fe()}),[h,y,Fe]),e.hooks.useUnmount((()=>{Q(),(0,me.Mv)(),P(),C.current.removeWidgetState()}));const ut=o.propertyDataSourceId&&o.ownerDataSourceId;return L?(0,e.jsx)("div",{css:s.parent,role:"region","aria-label":u("widgetTitle")},(0,e.jsx)("div",{css:s.emptyState,role:"status","aria-live":"polite","aria-busy":"true"},(0,e.jsx)(r.Loading,{css:s.loadingState,type:r.LoadingType.Donut,width:150,height:150,"aria-label":u("loadingModules")}))):F?(0,e.jsx)("div",{css:s.parent,role:"region","aria-label":u("widgetTitle")},(0,e.jsx)("div",{css:s.body,role:"main"},(0,e.jsx)("div",{css:s.emptyState,role:"status","aria-live":"polite"},(0,e.jsx)(r.SVG,{css:s.svgState,src:Ce(),width:100,height:100}),(0,e.jsx)("div",{css:s.messageState},u("widgetNotConfigured")))),(0,e.jsx)("div",{css:s.footer},(0,e.jsx)("div",{css:s.col},u("propertySelected")),(0,e.jsx)("div",{css:s.col},"0"),(0,e.jsx)("div",{css:s.footerAlertOverlay},(0,e.jsx)(r.Alert,{type:"error",fullWidth:!0,css:s.alert,text:u("errorLoadingModules"),role:"alert"})))):(0,e.jsx)("div",{css:s.parent,role:"region","aria-label":u("widgetTitle")},E?(0,e.jsx)(e.DataSourceComponent,{key:`${l}-property-ds`,useDataSource:E,onCreateDataSourceFailed:ze}):null,T&&j!==x?(0,e.jsx)(e.DataSourceComponent,{key:`${l}-owner-ds`,useDataSource:T,onCreateDataSourceFailed:Ge}):null,(0,e.jsx)("div",{css:s.header},(0,e.jsx)("div",{css:s.headerActions},(0,e.jsx)("div",{css:s.buttons},(0,e.jsx)(r.Button,{type:"tertiary",icon:!0,onClick:ke,title:u("copyToClipboard"),"aria-label":u("copyToClipboard"),disabled:!b},(0,e.jsx)(r.SVG,{src:je(),size:20})),(0,e.jsx)(r.Dropdown,{activeIcon:!0,menuRole:"listbox","aria-label":u("exportData")},(0,e.jsx)(r.DropdownButton,{arrow:!1,icon:!0,type:"tertiary",disabled:!b,title:u("exportData"),role:"combobox"},(0,e.jsx)(r.SVG,{src:Te(),size:20})),(0,e.jsx)(r.DropdownMenu,{alignment:"start"},ee.UP.map((t=>(0,e.jsx)(r.DropdownItem,{key:t.id,onClick:()=>Pe(t.id),role:"menuitem",title:u(`export${t.label}Desc`)},u(`export${t.label}`)))))),(0,e.jsx)(r.Button,{type:"tertiary",icon:!0,onClick:Z,title:u("clearAll"),disabled:!b},(0,e.jsx)(r.SVG,{src:Re(),size:20}))))),(0,e.jsx)("div",{css:s.body,role:"main"},ut?(()=>{if(b){const t=Array.isArray(w)?w:Array.from(w);return(0,e.jsx)(ne,{data:t,columns:Le,translate:u,styles:s})}return(0,e.jsx)("div",{css:s.emptyState,role:"status","aria-live":"polite"},(0,e.jsx)(r.SVG,{css:s.svgState,src:De(),width:100,height:100,"aria-label":u("clickMapToSelectProperties")}),(0,e.jsx)("div",{css:s.messageState},u("clickMapToSelectProperties")))})():(0,e.jsx)("div",{css:s.emptyState,role:"status","aria-live":"polite"},(0,e.jsx)(r.SVG,{css:s.svgState,src:Ce(),width:100,height:100}),(0,e.jsx)("div",{css:s.messageState},u("widgetNotConfigured")))),(0,e.jsx)("div",{css:s.footer},(0,e.jsx)("div",{css:s.col},u("propertySelected")),(0,e.jsx)("div",{css:s.col},I),R||S?(0,e.jsx)("div",{css:s.footerAlertOverlay},S?(0,e.jsx)(r.Alert,{type:"error",fullWidth:!0,css:s.alert,text:S.message,role:"alert"}):null,R?(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(r.Alert,{type:R.type,fullWidth:!0,css:s.alert,text:R.text,role:"status"})):null):null),ie?(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:ie,onActiveViewChange:He}):null)},Ue=t=>{const n=ue(),o=e.hooks.useTranslation(r.defaultMessages,oe);return(0,e.jsx)(Ve,{styles:n,translate:o},(0,e.jsx)(He,{...t}))};function Be(e){a.p=e}})(),s})())}}}));