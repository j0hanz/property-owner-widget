System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-theme"],(function(e,r){var t={},o={},n={},a={};return{setters:[function(e){t.DataSourceManager=e.DataSourceManager,t.React=e.React,t.css=e.css,t.hooks=e.hooks,t.jsx=e.jsx},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent,o.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){n.Alert=e.Alert,n.Button=e.Button,n.Loading=e.Loading,n.LoadingType=e.LoadingType,n.SVG=e.SVG},function(e){a.useTheme=e.useTheme}],execute:function(){e((()=>{var e={1688:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTciIHZpZXdCb3g9IjAgMCAxNiAxNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAxMlYxMC41SDFMMSAxMkgyLjVWMTNIMUMwLjQ0NzcxNiAxMyAwIDEyLjU1MjMgMCAxMlpNMSAxSDIuNVYyTDEgMlYzLjVIMFYyQzAgMS40NDc3MiAwLjQ0NzcxNSAxIDEgMVpNMSA4LjVIMFY1LjVIMVY4LjVaTTQuNSAyVjFINy41VjJINC41Wk05LjUgMlYxSDExQzExLjU1MjMgMSAxMiAxLjQ0NzcyIDEyIDJWMy41SDExVjJIOS41Wk0xNC4zMTMzIDE2LjAyMDRMMTAuNzc3OCAxMi40ODQ5TDcuMjQyMjYgMTYuMDIwNEw2LjUzNTE2IDE1LjMxMzNMMTAuMDcwNyAxMS43Nzc4TDYuNTM1MTYgOC4yNDIyNkw3LjI0MjI2IDcuNTM1MTZMMTAuNzc3OCAxMS4wNzA3TDE0LjMxMzMgNy41MzUxNkwxNS4wMjA0IDguMjQyMjZMMTEuNDg0OSAxMS43Nzc4TDE1LjAyMDQgMTUuMzEzM0wxNC4zMTMzIDE2LjAyMDRaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo="},1888:e=>{"use strict";e.exports=a},2686:e=>{"use strict";e.exports=o},2732:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjMDAwMDAwIj4NCiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiDQogICAgICAgIGNvbG9yPSJjdXJyZW50Q29sb3IiPg0KICAgICAgICA8cGF0aA0KICAgICAgICAgICAgZD0iTTExLjUgMjFjLTQuNDc4IDAtNi43MTggMC04LjEwOS0xLjM5MVMyIDE1Ljk3OSAyIDExLjVjMC00LjQ3OCAwLTYuNzE4IDEuMzkxLTguMTA5UzcuMDIxIDIgMTEuNSAyYzQuNDc4IDAgNi43MTggMCA4LjEwOSAxLjM5MVMyMSA3LjAyMSAyMSAxMS41TTIgN2gxOW0tMTEgOWgxbS01IDBoMW0zLTRoNG0tOCAwaDEiIC8+DQogICAgICAgIDxwYXRoIGQ9Ik0yMC40IDIwLjRMMjIgMjJtLS44LTQuNGEzLjYgMy42IDAgMSAwLTcuMiAwYTMuNiAzLjYgMCAwIDAgNy4yIDAiIC8+DQogICAgPC9nPg0KPC9zdmc+"},4321:e=>{"use strict";e.exports=n},6466:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTIgNi41QzEyIDkuNTM3NTcgOS41Mzc1NyAxMiA2LjUgMTJDMy40NjI0MyAxMiAxIDkuNTM3NTcgMSA2LjVDMSAzLjQ2MjQzIDMuNDYyNDMgMSA2LjUgMUM5LjUzNzU3IDEgMTIgMy40NjI0MyAxMiA2LjVaTTEwLjcyOTEgMTEuNDM2MkM5LjU5MjM3IDEyLjQxMSA4LjExNDk3IDEzIDYuNSAxM0MyLjkxMDE1IDEzIDAgMTAuMDg5OSAwIDYuNUMwIDIuOTEwMTUgMi45MTAxNSAwIDYuNSAwQzEwLjA4OTkgMCAxMyAyLjkxMDE1IDEzIDYuNUMxMyA4LjExNDkzIDEyLjQxMTEgOS41OTIzIDExLjQzNjIgMTAuNzI5MUwxNS41NzMzIDE0Ljg2NjFDMTUuNzY4NiAxNS4wNjE0IDE1Ljc2ODYgMTUuMzc4IDE1LjU3MzMgMTUuNTczMkMxNS4zNzgxIDE1Ljc2ODUgMTUuMDYxNSAxNS43Njg1IDE0Ljg2NjIgMTUuNTczMkwxMC43MjkxIDExLjQzNjJaTTcgNkgxMFY3SDdWMTBINlY3SDNWNkg2VjNIN1Y2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K"},9067:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0Ij4NCiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiDQogICAgICAgIGQ9Ik0yMC45OTggMTIuNXMuMDAyLS40Ny4wMDItMWMwLTQuNDc4IDAtNi43MTgtMS4zOTEtOC4xMDlTMTUuOTc5IDIgMTEuNSAyQzcuMDIyIDIgNC43ODIgMiAzLjM5MSAzLjM5MVMyIDcuMDIxIDIgMTEuNWMwIDQuNDc4IDAgNi43MTggMS4zOTEgOC4xMDlTNy4wMjEgMjEgMTEuNSAyMWMuNTMgMCAxLS4wMDIgMS0uMDAyTTIgN2gxOW0tMTEgOWgxLjVNNiAxNmgxbTMtNGg2TTYgMTJoMW05IDRsMyAzbTAgMGwzIDNtLTMtM2wtMyAzbTMtM2wzLTMiDQogICAgICAgIGNvbG9yPSJjdXJyZW50Q29sb3IiIC8+DQo8L3N2Zz4="},9244:e=>{"use strict";e.exports=t}},r={};function i(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,i),n.exports}i.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return i.d(r,{a:r}),r},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var s={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(s),i.d(s,{__set_webpack_public_path__:()=>ce,default:()=>le});var e,r=i(9244),t=i(2686),o=i(4321);!function(e){e.QUERY_ERROR="QUERY_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.VALIDATION_ERROR="VALIDATION_ERROR",e.GEOMETRY_ERROR="GEOMETRY_ERROR"}(e||(e={}));var n=i(1888);const a=e=>{var r;return{fontFamily:null==e?void 0:e.fontFamily,fontWeight:null===(r=null==e?void 0:e.fontWeight)||void 0===r?void 0:r.toString(),fontSize:null==e?void 0:e.fontSize,fontStyle:null==e?void 0:e.fontStyle,lineHeight:null==e?void 0:e.lineHeight,color:null==e?void 0:e.color}},l=(e,t={})=>(0,r.css)(Object.assign({display:"flex",flexFlow:"column"===e?"column nowrap":"row nowrap"},t)),c=(e,r={})=>l(e,Object.assign({flex:"0 0 auto"},r)),u=()=>(e=>{var t,o,n,i,s,u;const d=e.sys.spacing,g=e.sys.color,p=e.sys.typography;return{parent:l("column",{flex:"1 1 auto",overflowY:"auto",blockSize:"100%",gap:null==d?void 0:d(2),backgroundColor:null===(t=null==g?void 0:g.surface)||void 0===t?void 0:t.paper}),header:c("row",{alignItems:"center",justifyContent:"end",paddingInline:null==d?void 0:d(1)}),cols:c("row",{borderBlockStart:`1px solid ${null===(o=null==g?void 0:g.surface)||void 0===o?void 0:o.backgroundHint}`,borderBlockEnd:`1px solid ${null===(n=null==g?void 0:g.surface)||void 0===n?void 0:n.backgroundHint}`}),col:(0,r.css)({flex:"1 1 0",display:"flex",justifyContent:"center",padding:null==d?void 0:d(1)}),body:l("column",{flex:"1 1 0",overflow:"auto"}),emptyState:(0,r.css)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 1 0",gap:null==d?void 0:d(4)}),svgState:(0,r.css)({opacity:.2}),messageState:(0,r.css)(Object.assign(Object.assign({},a(null==p?void 0:p.label2)),{textAlign:"center",opacity:.8})),loadingState:(0,r.css)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 1 0",gap:null==d?void 0:d(4)}),listContainer:l("column",{flex:"1 1 0",overflow:"auto",alignItems:"stretch"}),list:c("column"),row:c("row",{gap:null==d?void 0:d(2),padding:null==d?void 0:d(1),borderBlockEnd:`1px solid ${null===(i=null==g?void 0:g.surface)||void 0===i?void 0:i.backgroundHint}`,alignItems:"center"}),column:(0,r.css)({flex:"1 1 0",minWidth:0}),actions:c("row",{alignItems:"center"}),errorWrap:l("column",{flex:"1 1 auto",gap:null==d?void 0:d(1),padding:null==d?void 0:d(2)}),errorHint:(0,r.css)({color:null===(s=null==g?void 0:g.surface)||void 0===s?void 0:s.backgroundHint}),buttons:c("row",{gap:null==d?void 0:d(2)}),footer:c("row",Object.assign({borderBlockStart:`1px solid ${null===(u=null==g?void 0:g.surface)||void 0===u?void 0:u.backgroundHint}`},a(null==p?void 0:p.label2)))}})((0,n.useTheme)()),d=["esri/symbols/SimpleFillSymbol","esri/Graphic","esri/layers/GraphicsLayer","esri/geometry/Extent"],g="FASTIGHET",p="BOSTADR",v=[0,180,216,.4],y=new Map,h=new Map;var f=function(e,r,t,o){return new(t||(t=Promise))((function(n,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((o=o.apply(e,r||[])).next())}))};const I=(e,t)=>{const o=r.React.useRef(null),n=r.React.useRef(new Map),a=r.hooks.useEventCallback((r=>{e&&r&&(o.current?r.map.findLayerById(o.current.id)||r.map.add(o.current):(o.current=new e.GraphicsLayer({id:`${t}-property-highlight-layer`,listMode:"hide"}),r.map.add(o.current)))})),i=r.hooks.useEventCallback((()=>{o.current&&o.current.removeAll(),n.current.clear()})),s=r.hooks.useEventCallback(((e,r)=>{const t=o.current;if(!t)return;const a=r(e),i=n.current.get(a);i&&i.length>0&&(t.removeMany(i),n.current.delete(a))})),l=r.hooks.useEventCallback(((r,t,i,l,c,u)=>{if(!e||!r||!t)return;a(t);const d=o.current;if(!d)return;const g=i(r.attributes||null),p=((r,t)=>e?new e.SimpleFillSymbol({color:r,outline:{color:[r[0],r[1],r[2],1],width:t}}):null)(c,u);if(!p)return;const v=r.clone();if(v.symbol=p,v.attributes=Object.assign(Object.assign({},v.attributes||{}),{FNR:g}),s(g,l),d.add(v),!g)return;const y=l(g),h=n.current.get(y)||[];n.current.set(y,[...h,v])})),c=r.hooks.useEventCallback((e=>{var r;e&&o.current&&(null===(r=e.map)||void 0===r||r.remove(o.current),o.current.destroy(),o.current=null,n.current.clear())}));return r.hooks.useUnmount((()=>{var e,r;o.current&&(null===(r=(e=o.current).destroy)||void 0===r||r.call(e),o.current=null),n.current.clear()})),{graphicsLayerRef:o,graphicsMapRef:n,ensureGraphicsLayer:a,clearGraphics:i,removeGraphicsForFnr:s,addGraphicsToMap:l,destroyGraphicsLayer:c}};function w(e){return!e.valid}var M=function(e,r,t,o){return new(t||(t=Promise))((function(n,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((o=o.apply(e,r||[])).next())}))};const m=e=>{if(!e)return"";return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").replace(/[\s\u00A0\u200B]+/g," ").trim()},b=(e,r)=>{const t=m(e);return t.length<r?"***":t},A=(e,r,t)=>{const o=m(e.NAMN||"")||t,n=r&&o!==t?(e=>{const r=b(e,3);return"***"===r?r:r.split(" ").filter(Boolean).map((e=>`${e.charAt(0)}${"*".repeat(Math.min(3,e.length-1))}`)).join(" ")})(o):o,a=m(e.BOSTADR||""),i=r&&a?(e=>{const r=b(e,3);return"***"===r?r:`${r.substring(0,2)}${"*".repeat(Math.min(5,r.length-2))}`})(a):a,s=m(e.POSTNR||"").replace(/\s+/g,""),l=m(e.POSTADR||""),c=m(e.ORGNR||"");return[n,i,s&&l?`${s} ${l}`:s||l].filter(Boolean).join(", ")+(c?` (${c})`:"")},S=(e,r)=>{const t=null==r?void 0:r.trim();return t?`${e} (${t})`:e},D=(e,r)=>`${e}_${r}`,R=(e,r)=>{try{const o=new URL(e);return!(e=>{const r=e.toLowerCase();return"localhost"===r||"127.0.0.1"===r||"::1"===r||"[::1]"===r||/^10\./.test(r)||/^172\.(1[6-9]|2[0-9]|3[0-1])\./.test(r)||/^192\.168\./.test(r)})(o.hostname)&&(e=>"https:"===e.protocol&&(""===e.port||"443"===e.port))(o)&&(t=o.pathname,/\/(MapServer|FeatureServer)\/\d+(\/query)?$/.test(t))&&((e,r)=>!r||0===r.length||r.some((r=>e===r||e.endsWith("."+r))))(o.hostname,r)}catch(e){return!1}var t},E=(e,r="Invalid FNR: must be a safe integer")=>{if("number"==typeof e){if(!Number.isFinite(e)||!Number.isSafeInteger(e)||e<0)throw new Error(r);return`FNR = ${e}`}const t=String(e).replace(/'/g,"''");if(!t.trim())throw new Error("Invalid FNR: cannot be empty or whitespace-only");return`FNR = '${t}'`},x=e=>{if(!e)return null;return e.FNR||e.fnr||null},j=e=>null!=e?String(e):"",T=e=>"AbortError"===(null==e?void 0:e.name)||"string"==typeof(null==e?void 0:e.message)&&e.message.toLowerCase().includes("abort"),N=(e,r)=>{var t;return e?"string"==typeof e?e:(null===(t=e.details)||void 0===t?void 0:t.message)||e.message||r:r},O=e=>{var r,t,o,n,a;if(!e)return null;const i=null===(t=null===(r=e.getLayerDefinition)||void 0===r?void 0:r.call(e))||void 0===t?void 0:t.url;if(i)return i;const s=null===(n=null===(o=e.getDataSourceJson)||void 0===o?void 0:o.call(e))||void 0===n?void 0:n.url;return s||((null==e?void 0:e.url)||(null===(a=null==e?void 0:e.layer)||void 0===a?void 0:a.url)||null)},C=(e,r,t)=>({valid:!1,error:{type:e,message:r},failureReason:t}),k=e=>null!==e&&"function"==typeof e.query,L=(e,r)=>{var t;const o=null===(t=e.features)||void 0===t?void 0:t[0];if(!(null==o?void 0:o.attributes)||!(null==o?void 0:o.geometry))return null;const n=r(o.attributes);return n?{fnr:n,attrs:o.attributes,graphic:o}:null},P=e=>M(void 0,void 0,void 0,(function*(){const{batch:r,config:o,dsManager:n,maxResults:a,currentRowCount:i,signal:s,helpers:l,messages:c}=e,[u]=yield(0,t.loadArcGISJSAPIModules)(["esri/core/promiseUtils"]),d=yield u.eachAlways(r.map((e=>(e=>M(void 0,void 0,void 0,(function*(){const{fnr:r,config:t,dsManager:o,signal:n,helpers:a}=e;try{if(null==n?void 0:n.aborted)throw new DOMException("Aborted","AbortError");return{ownerFeatures:yield a.queryOwnerByFnr(r,t.ownerDataSourceId,o,{signal:n}),queryFailed:!1}}catch(e){if(a.isAbortError(e))throw e instanceof Error?e:new Error(String(e));return{ownerFeatures:[],queryFailed:!0}}})))({fnr:e.fnr,config:{ownerDataSourceId:o.ownerDataSourceId},dsManager:n,signal:s,helpers:{queryOwnerByFnr:l.queryOwnerByFnr,isAbortError:l.isAbortError}}).then((r=>Object.assign(Object.assign({},r),{validated:e})))))),g=[],p=[];for(const e of d){if(e.error){l.isAbortError(e.error)||console.log("Owner query failed for batch item:",e.error);continue}if(!e.value){console.log("Owner query returned no value for batch item");continue}const{validated:r,ownerFeatures:t,queryFailed:n}=e.value;if(i+g.length>=a)break;const s=_({fnr:r.fnr,propertyAttrs:r.attrs,ownerFeatures:t,queryFailed:n,propertyGraphic:r.graphic,config:{enablePIIMasking:o.enablePIIMasking},helpers:{createRowId:l.createRowId,formatPropertyWithShare:l.formatPropertyWithShare,formatOwnerInfo:l.formatOwnerInfo},messages:c}),u=a-(i+g.length),d=s.slice(0,u);g.push(...d),d.length>0&&p.push({graphic:r.graphic,fnr:r.fnr})}return{rows:g,graphics:p}})),F=e=>({id:e.createRowId(e.fnr,e.objectId),FNR:e.fnr,UUID_FASTIGHET:e.uuidFastighet,FASTIGHET:e.fastighet,BOSTADR:e.bostadr,graphic:e.graphic}),_=e=>{const{fnr:r,propertyAttrs:t,ownerFeatures:o,queryFailed:n,propertyGraphic:a,config:i,helpers:s,messages:l}=e;return o.length>0?o.map((e=>{const t=e.attributes;return F({fnr:r,objectId:t.OBJECTID,uuidFastighet:t.UUID_FASTIGHET,fastighet:s.formatPropertyWithShare(t.FASTIGHET,t.ANDEL||""),bostadr:s.formatOwnerInfo(t,i.enablePIIMasking,l.unknownOwner),graphic:a,createRowId:s.createRowId})})):[F({fnr:r,objectId:t.OBJECTID,uuidFastighet:t.UUID_FASTIGHET,fastighet:t.FASTIGHET,bostadr:n?l.errorOwnerQueryFailed:l.errorNoDataAvailable,graphic:a,createRowId:s.createRowId})]};var z=function(e,r,t,o){return new(t||(t=Promise))((function(n,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((o=o.apply(e,r||[])).next())}))};const G=(e,r)=>`${e}:${JSON.stringify(r)}`,V=(e,r,t,o)=>{const n=Date.now(),a=e.get(r);if(a&&n-a.timestamp<300){if(null==o?void 0:o.aborted){const e=new Error("AbortError");return e.name="AbortError",Promise.reject(e)}return a.promise}const i=t().catch((e=>{throw e instanceof Error?e:new Error(String(e))})).finally((()=>{setTimeout((()=>e.delete(r)),300)}));return e.set(r,{promise:i,timestamp:n}),i},U=(e,r,t,o)=>z(void 0,void 0,void 0,(function*(){const n=G("owner",{fnr:String(e),dsId:r});return V(h,n,(()=>z(void 0,void 0,void 0,(function*(){var n,a;try{if(null===(n=null==o?void 0:o.signal)||void 0===n?void 0:n.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}const i=t.getDataSource(r);if(!i)throw new Error("Owner data source not found");const s=yield i.query({where:E(e),returnGeometry:!1,outFields:["*"]});if(null===(a=null==o?void 0:o.signal)||void 0===a?void 0:a.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}return(null==s?void 0:s.records)?s.records.map((e=>e.getData())):[]}catch(e){if(T(e))throw e;throw new Error(N(e,"Owner query failed"))}}))),null==o?void 0:o.signal)})),W=()=>{y.clear(),h.clear()},Q=(e,r,o,n,a,i)=>z(void 0,void 0,void 0,(function*(){var o,s,l;try{if(null===(o=null==i?void 0:i.signal)||void 0===o?void 0:o.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}if(!e||0===e.length)return new Map;const c=n.getDataSource(r);if(!c)throw new Error("Property data source not found");const u=c.getLayerDefinition(),d=null==u?void 0:u.url;if(!d)throw new Error("Property layer URL not available");const g=yield(0,t.loadArcGISJSAPIModules)(["esri/tasks/QueryTask","esri/rest/support/RelationshipQuery"]),[p,v]=g,y=new p({url:d}),h=new v,f=[],I=new Map,w=yield c.query({where:e.map((e=>E(e))).join(" OR "),outFields:["FNR","OBJECTID"],returnGeometry:!1});if(null===(s=null==i?void 0:i.signal)||void 0===s?void 0:s.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}if(!(null==w?void 0:w.records)||0===w.records.length)return new Map;w.records.forEach((e=>{const r=e.getData(),t=r.OBJECTID,o=String(r.FNR);f.push(t),I.set(t,o)})),h.objectIds=f,h.relationshipId=a,h.outFields=["*"];const M=yield y.executeRelationshipQuery(h);if(null===(l=null==i?void 0:i.signal)||void 0===l?void 0:l.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}const m=new Map;return f.forEach((e=>{const r=M[e],t=I.get(e);if(t&&r&&r.features){const e=r.features.map((e=>e.attributes));m.set(t,e)}})),m}catch(e){if(T(e))throw e;throw new Error(N(e,"Relationship query failed"))}})),B=()=>{try{if("undefined"==typeof window)return!1;if(!0===(null===navigator||void 0===navigator?void 0:navigator.globalPrivacyControl))return!1;const e=(null===navigator||void 0===navigator?void 0:navigator.doNotTrack)||(null===window||void 0===window?void 0:window.doNotTrack)||(null===navigator||void 0===navigator?void 0:navigator.msDoNotTrack);if("1"===e||"yes"===e)return!1;if(("undefined"!=typeof document&&document.cookie||"").includes("esri_disallow_tracking=1"))return!1;const r=window.localStorage?window.localStorage.getItem("esri_allow_tracking"):null;return"false"!==r&&"true"===r}catch(e){return!1}},Y=e=>{if(B())try{console.log("[Property Widget Telemetry]",e)}catch(e){console.log("Telemetry tracking failed",e)}},H=e=>{if(B())try{Y({category:"Performance",action:e.operation,label:e.success?"success":"failure",value:Math.round(e.duration)}),e.error&&Y({category:"Error",action:e.operation,label:e.error})}catch(e){console.log("Performance tracking failed",e)}},J=(e,r,t)=>{var o;if(B())try{const n="string"==typeof r?r:(null==r?void 0:r.message)||(null===(o=null==r?void 0:r.details)||void 0===o?void 0:o.message)||"Unknown error";Y({category:"Error",action:e,label:t?`${n}: ${t}`:n})}catch(e){console.log("Error tracking failed",e)}},Z=(e,r)=>{B()&&Y({category:"Feature",action:e,label:r?"enabled":"disabled"})};var q=i(1688),$=i.n(q),K=i(6466),X=i.n(K),ee=i(9067),re=i.n(ee),te=i(2732),oe=i.n(te),ne=function(e,r,t,o){return new(t||(t=Promise))((function(n,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((o=o.apply(e,r||[])).next())}))};const ae=e=>{const{graphicsToAdd:r,selectedRows:t,getCurrentView:o,helpers:n,highlightColor:a,outlineWidth:i}=e,s=o();if(!s)return void console.log("syncSelectionGraphics: no active view, deferring graphics sync");const l=(e=>{const{graphicsToAdd:r,selectedRows:t,view:o,helpers:n,highlightColor:a,outlineWidth:i}=e;if(!o)return console.log("syncGraphicsWithState: view is null or undefined, cannot sync graphics"),!1;const s=new Set(t.map((e=>n.normalizeFnrKey(e.FNR))));return r.forEach((({graphic:e,fnr:r})=>{const t=n.normalizeFnrKey(r);s.has(t)&&n.addGraphicsToMap(e,o,n.extractFnr,n.normalizeFnrKey,a,i)})),!0})({graphicsToAdd:r,selectedRows:t,view:s,helpers:n,highlightColor:a,outlineWidth:i});l||console.log("syncSelectionGraphics: failed to sync graphics with state")};class ie extends r.React.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.log(this.props.translate("errorBoundaryConsoleLog"),e,r),J("error_boundary",e,r.componentStack)}render(){return this.state.hasError?(0,r.jsx)("div",{css:this.props.styles.errorWrap},(0,r.jsx)(o.Alert,{type:"error",withIcon:!0,text:this.props.translate("errorBoundaryMessage")}),this.state.error&&(0,r.jsx)("div",{css:this.props.styles.errorHint},this.state.error.message)):this.props.children}}const se=n=>{const{config:a,id:i,useMapWidgetIds:s}=n,l=u(),c=r.hooks.useTranslation(),{modules:h,loading:m,error:b}=(()=>{const[e,o]=r.React.useState(null),[n,a]=r.React.useState(!0),[i,s]=r.React.useState(null);return r.hooks.useEffectOnce((()=>{const e=null===globalThis||void 0===globalThis?void 0:globalThis.__ESRI_TEST_STUB__;f(void 0,void 0,void 0,"function"!=typeof e?function*(){try{const e=yield(0,t.loadArcGISJSAPIModules)(d.slice()),[r,n,a,i]=e;o({SimpleFillSymbol:r,Graphic:n,GraphicsLayer:a,Extent:i})}catch(e){s(e)}finally{a(!1)}}:function*(){try{const r=yield Promise.resolve(e(d));o(r)}catch(e){s(e)}finally{a(!1)}})})),{modules:e,loading:n,error:i}})(),{ensureGraphicsLayer:_,clearGraphics:B,removeGraphicsForFnr:q,addGraphicsToMap:K,destroyGraphicsLayer:ee}=I(h,i),{disablePopup:te,restorePopup:ie}=(()=>{const e=r.React.useRef(new Map),t=r.hooks.useEventCallback((r=>{if(!r)return;const t=r.popup,o=e.current.get(r);t&&void 0!==o&&(t.autoOpenEnabled=o,e.current.delete(r))})),o=r.hooks.useEventCallback((r=>{if(!r)return;const t=r.popup;t&&"boolean"==typeof t.autoOpenEnabled&&(e.current.has(r)||e.current.set(r,t.autoOpenEnabled),t.autoOpenEnabled=!1)})),n=r.hooks.useEventCallback((e=>{t(e)}));return{disablePopup:o,restorePopup:t,cleanup:n}})(),{getController:se,releaseController:le,abortAll:ce}=(()=>{const e=r.React.useRef([]),t=r.React.useRef(new Set),o=r.hooks.useEventCallback((()=>{let r=e.current.pop();for(;r&&r.signal.aborted;)r=e.current.pop();const o=r||new AbortController;return t.current.add(o),o})),n=r.hooks.useEventCallback((r=>{t.current.delete(r),r.signal.aborted||e.current.length<10&&e.current.push(r)})),a=r.hooks.useEventCallback((()=>{t.current.forEach((e=>{e.signal.aborted||e.abort()})),t.current.clear(),e.current=[]}));return r.hooks.useUnmount((()=>{a()})),{getController:o,releaseController:n,abortAll:a}})(),ue=r.React.useRef(null);ue.current||(ue.current=r.DataSourceManager.getInstance());const de=r.React.useRef(0),[ge,pe]=r.React.useState({loading:!1,error:null,selectedProperties:[]}),ve=a.maxResults,ye=a.enableToggleRemoval,he=a.enablePIIMasking,fe=null==s?void 0:s[0],Ie=r.hooks.useEventCallback((e=>{q(e,j),pe((r=>{const t=[],o=[];return r.selectedProperties.forEach((r=>{r.FNR!==e?o.push(r):t.push(r)})),0===t.length?r:(Y({category:"Property",action:"remove",value:t.length}),Object.assign(Object.assign({},r),{selectedProperties:o}))}))})),we=r.hooks.useEventCallback((()=>{ce(),W(),B(),pe((e=>(Y({category:"Property",action:"clear_all",value:e.selectedProperties.length}),Object.assign(Object.assign({},e),{selectedProperties:[],error:null}))))})),Me=r.hooks.useEventCallback((()=>ne(void 0,void 0,void 0,(function*(){const r=De();if(!r)return void me(e.VALIDATION_ERROR,c("errorNoMapPoint"));const t=ge.selectedProperties.map((e=>e.FNR));if(0===t.length)return void me(e.VALIDATION_ERROR,c("noPropertiesSelected"));if(!a.propertyDataSourceId||!ue.current)return void me(e.VALIDATION_ERROR,c("errorNoDataAvailable"));pe((e=>Object.assign(Object.assign({},e),{loading:!0,error:null})));const o=se();try{const n=yield((e,r,t,o)=>z(void 0,void 0,void 0,(function*(){var n,a;try{if(null===(n=null==o?void 0:o.signal)||void 0===n?void 0:n.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}if(!e||0===e.length)return null;const i=t.getDataSource(r);if(!i)throw new Error("Property data source not found");const s=e.map((e=>E(e))).join(" OR "),l=yield i.query({where:s,returnGeometry:!0,outFields:["FNR"]});if(null===(a=null==o?void 0:o.signal)||void 0===a?void 0:a.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}if(!(null==l?void 0:l.records)||0===l.records.length)return null;let c=null;return l.records.forEach((e=>{const r=e.getData().geometry;r&&r.extent&&(c=c?c.union(r.extent):r.extent.clone())})),c}catch(e){if(T(e))throw e;throw new Error(N(e,"Extent query failed"))}})))(t,a.propertyDataSourceId,ue.current,{signal:o.signal});if(o.signal.aborted)return void pe((e=>Object.assign(Object.assign({},e),{loading:!1})));if(!n)return void me(e.VALIDATION_ERROR,c("errorNoDataAvailable"));yield r.goTo(n.expand(1.2),{duration:1e3}),pe((e=>Object.assign(Object.assign({},e),{loading:!1}))),Y({category:"Navigation",action:"zoom_to_results",value:t.length})}catch(r){if(T(r))return void pe((e=>Object.assign(Object.assign({},e),{loading:!1})));me(e.QUERY_ERROR,c("errorQueryFailed")),J("zoom_to_results",r)}finally{le(o)}})))),me=r.hooks.useEventCallback(((e,r,t)=>{pe((o=>Object.assign(Object.assign({},o),{loading:!1,error:{type:e,message:r,details:t}})))})),be=r.hooks.useEventCallback((r=>ne(void 0,void 0,void 0,(function*(){ce();const t=(e=>{const r=performance.now();return{success:()=>{const t=performance.now()-r;H({operation:e,duration:t,success:!0})},failure:t=>{const o=performance.now()-r;H({operation:e,duration:o,success:!1,error:t})}}})("map_click_query"),o=((e,r,t,o)=>r?(null==e?void 0:e.mapPoint)?{valid:!0,data:{mapPoint:e.mapPoint}}:{valid:!1,error:{type:"GEOMETRY_ERROR",message:o("errorNoMapPoint")},failureReason:"no_map_point"}:{valid:!1,error:{type:"VALIDATION_ERROR",message:o("errorLoadingModules")},failureReason:"modules_not_loaded"})(r,h,0,c);if(w(o)){const{error:e}=o;return me(e.type,e.message),t.failure(e.type),void J("map_click_validation",e.type,e.message)}const{mapPoint:n}=o.data,i=(e=>{const{propertyDsId:r,ownerDsId:t,dsManager:o,allowedHosts:n,translate:a}=e;if(!r||!t)return C("VALIDATION_ERROR",a("errorNoDataAvailable"),"missing_data_sources");if(!o)return C("QUERY_ERROR",a("errorQueryFailed"),"no_data_source_manager");const i=o.getDataSource(r),s=o.getDataSource(t);if(!i||!s)return C("VALIDATION_ERROR",a("errorNoDataAvailable"),"missing_data_source_instance");if(!k(i))return C("VALIDATION_ERROR",a("errorNoDataAvailable"),"property_ds_not_queryable");if(!k(s))return C("VALIDATION_ERROR",a("errorNoDataAvailable"),"owner_ds_not_queryable");const l=null==n?void 0:n.map((e=>e.trim())).filter((e=>e.length>0)),c=O(i);if(!c||!R(c,l))return C("VALIDATION_ERROR",a("errorHostNotAllowed"),"property_disallowed_host");const u=O(s);return u&&R(u,l)?{valid:!0,data:{manager:o}}:C("VALIDATION_ERROR",a("errorHostNotAllowed"),"owner_disallowed_host")})({propertyDsId:a.propertyDataSourceId,ownerDsId:a.ownerDataSourceId,dsManager:ue.current,allowedHosts:a.allowedHosts,translate:c});if(w(i)){const{error:e,failureReason:r}=i;return me(e.type,e.message),t.failure(r),void J("map_click",r)}const{manager:s}=i.data,l=de.current+1;de.current=l;const u=()=>l!==de.current;pe((e=>Object.assign(Object.assign({},e),{loading:!0,error:null})));const d=se();try{const e=yield(p=n,f=a.propertyDataSourceId,I=s,m={signal:d.signal},z(void 0,void 0,void 0,(function*(){var e;const r=G("property",{x:Math.round(100*p.x)/100,y:Math.round(100*p.y)/100,wkid:null===(e=p.spatialReference)||void 0===e?void 0:e.wkid,dsId:f});return V(y,r,(()=>z(void 0,void 0,void 0,(function*(){var e,r;try{if(null===(e=null==m?void 0:m.signal)||void 0===e?void 0:e.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}const t=I.getDataSource(f);if(!t)throw new Error("Property data source not found");const o=yield t.query({geometry:p,returnGeometry:!0,outFields:["*"],spatialRel:"esriSpatialRelIntersects"});if(null===(r=null==m?void 0:m.signal)||void 0===r?void 0:r.aborted){const e=new Error("AbortError");throw e.name="AbortError",e}return(null==o?void 0:o.records)?o.records.map((e=>{const r=e.getData();return{features:[r],propertyId:r.attributes.FNR}})):[]}catch(e){if(T(e))throw e;throw new Error(N(e,"Property query failed"))}}))),null==m?void 0:m.signal)})));if(d.signal.aborted||u()){if(u())return;return pe((e=>Object.assign(Object.assign({},e),{loading:!1}))),void t.failure("aborted")}if(!e.length){if(u())return;return pe((e=>Object.assign(Object.assign({},e),{loading:!1}))),t.success(),void Y({category:"Query",action:"property_query",label:"no_results"})}const r=a.enableBatchOwnerQuery&&void 0!==a.relationshipId&&a.propertyDataSourceId,{rowsToProcess:o,graphicsToAdd:i}=r?yield(g={propertyResults:e,config:{propertyDataSourceId:a.propertyDataSourceId,ownerDataSourceId:a.ownerDataSourceId,enablePIIMasking:he,relationshipId:a.relationshipId},dsManager:s,maxResults:ve,signal:d.signal,helpers:{extractFnr:x,queryOwnersByRelationship:Q,createRowId:D,formatPropertyWithShare:S,formatOwnerInfo:A,isAbortError:T},messages:{unknownOwner:c("unknownOwner"),errorOwnerQueryFailed:c("errorOwnerQueryFailed"),errorNoDataAvailable:c("errorNoDataAvailable")}},M(void 0,void 0,void 0,(function*(){const{propertyResults:e,config:r,dsManager:t,maxResults:o,helpers:n,messages:a,signal:i}=g,s=[],l=[],c=new Set,u=[];for(const r of e){const e=L(r,n.extractFnr);if(e&&!c.has(e.fnr)&&(c.add(e.fnr),u.push(e),u.length>=o))break}if(0===u.length)return{rowsToProcess:[],graphicsToAdd:[]};const d=u.map((e=>e.fnr));let p;try{p=yield n.queryOwnersByRelationship(d,r.propertyDataSourceId,r.ownerDataSourceId,t,r.relationshipId,{signal:i})}catch(e){if(n.isAbortError(e))throw e;console.error("Batch owner query failed:",e),p=new Map}for(const{fnr:e,attrs:t,graphic:o}of u){const i=p.get(String(e))||[];if(i.length>0)for(const s of i){const i=n.formatOwnerInfo(s,r.enablePIIMasking,a.unknownOwner),c=n.formatPropertyWithShare(t.FASTIGHET,s.ANDEL);l.push(F({fnr:e,objectId:t.OBJECTID,uuidFastighet:t.UUID_FASTIGHET,fastighet:c,bostadr:i,graphic:o,createRowId:n.createRowId}))}else l.push(F({fnr:e,objectId:t.OBJECTID,uuidFastighet:t.UUID_FASTIGHET,fastighet:t.FASTIGHET,bostadr:a.errorNoDataAvailable,graphic:o,createRowId:n.createRowId}));s.push({graphic:o,fnr:e})}return{rowsToProcess:l,graphicsToAdd:s}}))):yield(e=>M(void 0,void 0,void 0,(function*(){const{propertyResults:r,config:t,dsManager:o,maxResults:n,helpers:a,messages:i,signal:s}=e,l=[],c=[],u=new Set,d=[];for(const e of r){const r=L(e,a.extractFnr);r&&!u.has(r.fnr)&&(u.add(r.fnr),d.push(r))}for(let e=0;e<d.length;){const r=n-c.length;if(r<=0)break;const u=Math.min(r,5,d.length-e),g=d.slice(e,e+u),{rows:p,graphics:v}=yield P({batch:g,config:{ownerDataSourceId:t.ownerDataSourceId,enablePIIMasking:t.enablePIIMasking},dsManager:o,maxResults:n,currentRowCount:c.length,signal:s,helpers:{queryOwnerByFnr:a.queryOwnerByFnr,isAbortError:a.isAbortError,createRowId:a.createRowId,formatPropertyWithShare:a.formatPropertyWithShare,formatOwnerInfo:a.formatOwnerInfo},messages:i});c.push(...p),l.push(...v),e+=u}return{rowsToProcess:c,graphicsToAdd:l}})))({propertyResults:e,config:{ownerDataSourceId:a.ownerDataSourceId,enablePIIMasking:he},dsManager:s,maxResults:ve,signal:d.signal,helpers:{extractFnr:x,queryOwnerByFnr:U,createRowId:D,formatPropertyWithShare:S,formatOwnerInfo:A,isAbortError:T},messages:{unknownOwner:c("unknownOwner"),errorOwnerQueryFailed:c("errorOwnerQueryFailed"),errorNoDataAvailable:c("errorNoDataAvailable")}});if(d.signal.aborted||u()){if(u())return;return pe((e=>Object.assign(Object.assign({},e),{loading:!1}))),void t.failure("aborted")}let l=null,h=null;if(u())return;if(pe((e=>{if(u())return e;const{updatedRows:r,toRemove:t}=((e,r,t,o)=>{const n=new Set,a=[],i=new Set(r.map((e=>j(e.FNR)))),s=new Set(r.map((e=>e.id))),l=new Set,c=new Set;for(const r of e){const e=j(r.FNR);t&&i.has(e)&&!c.has(e)?(n.add(e),c.add(e)):s.has(r.id)||l.has(r.id)||(a.push(r),l.add(r.id))}const u=[...r.filter((e=>!n.has(j(e.FNR)))),...a];return u.length>o&&(u.length=o),{toRemove:n,toAdd:a,updatedRows:u}})(o,e.selectedProperties,ye,ve);if(l={updatedRows:r,previousRows:e.selectedProperties},h={graphicsToAdd:i,selectedRows:r,getCurrentView:De,helpers:{addGraphicsToMap:K,extractFnr:x,normalizeFnrKey:j},highlightColor:v,outlineWidth:2},t.size>0){const r=e.selectedProperties.filter((e=>t.has(j(e.FNR))));r.length>0&&Y({category:"Property",action:"toggle_remove",value:r.length})}return Object.assign(Object.assign({},e),{loading:!1,selectedProperties:r})})),u())return void le(d);l&&(e=>{const{updatedRows:r,previousRows:t,removeGraphicsForFnr:o,normalizeFnrKey:n}=e,a=new Set(r.map((e=>n(e.FNR))));t.forEach((e=>{const r=n(e.FNR);a.has(r)||o(e.FNR,n)}))})({updatedRows:l.updatedRows,previousRows:l.previousRows,removeGraphicsForFnr:q,normalizeFnrKey:j}),h&&ae(h),t.success(),Y({category:"Query",action:"property_query",label:"success",value:o.length}),Z("pii_masking",he),Z("toggle_removal",ye)}catch(r){if(u())return;if(T(r))return pe((e=>Object.assign(Object.assign({},e),{loading:!1}))),void t.failure("aborted");me(e.QUERY_ERROR,c("errorQueryFailed")),t.failure("query_error"),J("property_query",r)}finally{le(d)}var g,p,f,I,m})))),Ae=(e=>{const[o,n]=r.React.useState(null),[a,i]=r.React.useState(null);return r.hooks.useEffectOnce((()=>{(0,t.loadArcGISJSAPIModules)(["esri/core/promiseUtils"]).then((([e])=>{i(e)}))})),r.hooks.useUpdateEffect((()=>{a&&e&&n((()=>a.debounce(e)))}),[a,e]),o||e})(be),{onActiveViewChange:Se,getCurrentView:De}=(e=>{const{modules:t,ensureGraphicsLayer:o,destroyGraphicsLayer:n,disablePopup:a,restorePopup:i,onMapClick:s}=e,l=r.React.useRef(null),c=r.React.useRef(null),u=r.hooks.useEventCallback((e=>{a(e),o(e),c.current&&c.current.remove(),c.current=e.on("click",s)})),d=r.hooks.useEventCallback((()=>{var e;const r=null===(e=l.current)||void 0===e?void 0:e.view;r&&(i(r),n(r),c.current&&(c.current.remove(),c.current=null))})),g=r.hooks.useEventCallback((e=>{var r;if(!t)return;const o=null==e?void 0:e.view;if(!o)return;const n=null===(r=l.current)||void 0===r?void 0:r.view;n&&n!==o&&d(),l.current=e,u(o)})),p=r.hooks.useEventCallback((()=>{var e;const r=null===(e=l.current)||void 0===e?void 0:e.view;i(r),c.current&&(c.current.remove(),c.current=null),r&&n(r)}));return r.hooks.useUnmount((()=>{p()})),{onActiveViewChange:g,getCurrentView:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.view},cleanup:p}})({modules:h,ensureGraphicsLayer:_,destroyGraphicsLayer:ee,disablePopup:te,restorePopup:ie,onMapClick:Ae});r.hooks.useUnmount((()=>{ce(),W()}));const Re=a.propertyDataSourceId&&a.ownerDataSourceId;return m?(0,r.jsx)("div",{css:l.parent,role:"region","aria-label":c("widgetTitle")},(0,r.jsx)("div",{css:l.emptyState,role:"status","aria-live":"polite","aria-busy":"true"},(0,r.jsx)(o.Loading,{css:l.loadingState,type:o.LoadingType.Donut,width:100,height:100}),(0,r.jsx)("div",{css:l.messageState},c("loadingModules")))):b?(0,r.jsx)("div",{css:l.parent,role:"region","aria-label":c("widgetTitle")},(0,r.jsx)("div",{css:l.emptyState,role:"alert","aria-live":"assertive"},(0,r.jsx)(o.Alert,{type:"error",withIcon:!0,text:c("errorLoadingModules")}))):(0,r.jsx)("div",{css:l.parent,role:"region","aria-label":c("widgetTitle")},(0,r.jsx)("div",{css:l.header},(0,r.jsx)("div",{css:l.buttons},(0,r.jsx)(o.Button,{type:"tertiary",icon:!0,onClick:Me,title:c("zoomToResults"),disabled:0===ge.selectedProperties.length||ge.loading,"aria-label":c("zoomToResults")},(0,r.jsx)(o.SVG,{src:X()})),(0,r.jsx)(o.Button,{type:"tertiary",icon:!0,onClick:we,title:c("clearAll"),disabled:0===ge.selectedProperties.length},(0,r.jsx)(o.SVG,{src:$()})))),(0,r.jsx)("div",{css:l.cols},(0,r.jsx)("div",{css:l.col},c("columnFastighet")),(0,r.jsx)("div",{css:l.col},c("columnOwner"))),(0,r.jsx)("div",{css:l.body,role:"main"},!Re&&(0,r.jsx)("div",{css:l.emptyState,role:"status","aria-live":"polite"},(0,r.jsx)(o.SVG,{css:l.svgState,src:re(),width:100,height:100}),(0,r.jsx)("div",{css:l.messageState},c("widgetNotConfigured"))),Re&&ge.loading&&(0,r.jsx)("div",{css:l.emptyState,role:"status","aria-live":"polite","aria-busy":"true"},(0,r.jsx)(o.Loading,{css:l.loadingState,type:o.LoadingType.Donut,width:100,height:100}),(0,r.jsx)("div",{css:l.messageState},c("loadingData"))),Re&&ge.error&&(0,r.jsx)("div",{css:l.emptyState,role:"alert","aria-live":"assertive"},(0,r.jsx)(o.Alert,{type:"error",withIcon:!0,text:ge.error.message}),ge.error.details&&(0,r.jsx)("div",null,ge.error.details)),Re&&!ge.loading&&!ge.error&&0===ge.selectedProperties.length&&(0,r.jsx)("div",{css:l.emptyState,role:"status","aria-live":"polite"},(0,r.jsx)(o.SVG,{css:l.svgState,src:oe(),width:100,height:100}),(0,r.jsx)("div",{css:l.messageState},c("readyToSelect"))),Re&&!ge.loading&&!ge.error&&ge.selectedProperties.length>0&&(0,r.jsx)("div",{css:l.list,role:"list","aria-label":c("widgetTitle")},ge.selectedProperties.map((e=>(0,r.jsx)("div",{css:l.row,role:"listitem",key:e.id},(0,r.jsx)("div",{css:l.column,"data-column":g},e.FASTIGHET),(0,r.jsx)("div",{css:l.column,"data-column":p},e.BOSTADR),(0,r.jsx)("div",{css:l.actions},(0,r.jsx)(o.Button,{type:"tertiary",size:"sm",onClick:()=>Ie(e.FNR),"aria-label":`${c("removeProperty")} ${e.FASTIGHET}`},c("removeProperty")))))))),(0,r.jsx)("div",{css:l.footer},(0,r.jsx)("div",{css:l.col},c("propertySelected")),(0,r.jsx)("div",{css:l.col},ge.selectedProperties.length)),fe&&(0,r.jsx)(t.JimuMapViewComponent,{useMapWidgetId:fe,onActiveViewChange:Se}))},le=e=>{const t=u(),o=r.hooks.useTranslation();return(0,r.jsx)(ie,{styles:t,translate:o},(0,r.jsx)(se,Object.assign({},e)))};function ce(e){i.p=e}})(),s})())}}}));